(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){var n=e[i][1][r];return o(n||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}require("core-js/modules/es6.weak-map.js");require("core-js/modules/es6.array.from.js");require("core-js/modules/es7.symbol.async-iterator.js");require("core-js/modules/es6.symbol.js");require("core-js/modules/es6.regexp.to-string.js");require("core-js/modules/es6.array.sort.js");require("core-js/modules/es6.function.name.js");require("core-js/modules/es7.array.includes.js");require("core-js/modules/es6.string.includes.js");require("core-js/modules/es6.string.iterator.js");require("core-js/modules/es6.string.starts-with.js");require("core-js/modules/web.dom.iterable.js");require("core-js/modules/es6.array.iterator.js");require("core-js/modules/es6.object.keys.js");require("core-js/modules/es6.string.ends-with.js");require("regenerator-runtime/runtime.js");require("core-js/modules/es6.promise.js");require("core-js/modules/es6.object.to-string.js");var Sentry=_interopRequireWildcard(require("@sentry/browser"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj.default=obj;if(cache){cache.set(obj,newObj)}return newObj}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _classPrivateFieldLooseBase(receiver,privateKey){if(!Object.prototype.hasOwnProperty.call(receiver,privateKey)){throw new TypeError("attempted to use private field on non-instance")}return receiver}var id=0;function _classPrivateFieldLooseKey(name){return"__private_"+id+++"_"+name}var _transformUpgradeVersion=_classPrivateFieldLooseKey("transformUpgradeVersion");var _transformUpgradeDate=_classPrivateFieldLooseKey("transformUpgradeDate");var _pending=_classPrivateFieldLooseKey("pending");var _PendingRequest=_classPrivateFieldLooseKey("PendingRequest");var _request=_classPrivateFieldLooseKey("request");var _do=_classPrivateFieldLooseKey("do");var _doBatch=_classPrivateFieldLooseKey("doBatch");var _doResponse=_classPrivateFieldLooseKey("doResponse");var KFWProxy=function(){function KFWProxy(){var base=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"https://kfwproxy.geek1011.net";_classCallCheck(this,KFWProxy);Object.defineProperty(this,_doResponse,{value:_doResponse2});Object.defineProperty(this,_doBatch,{value:_doBatch2});Object.defineProperty(this,_do,{value:_do2});Object.defineProperty(this,_request,{value:_request2});Object.defineProperty(this,_pending,{writable:true,value:null});Object.defineProperty(this,_PendingRequest,{writable:true,value:function value(url){var _this=this;var json=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var transform=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;_classCallCheck(this,value);this.url=url;this.transform=transform;this.json=json;this.promise=new Promise((function(a,b){_this.resolve=a;_this.reject=b}))}});this.base=base}_createClass(KFWProxy,[{key:"latestVersion",value:function(){var _latestVersion=_asyncToGenerator(regeneratorRuntime.mark((function _callee(id){var affiliate,version,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:affiliate=_args.length>1&&_args[1]!==undefined?_args[1]:"kobo";version="0.0";if(id=="00000000-0000-0000-0000-000000000381")version="4.7.10364";_context.next=5;return this.UpgradeCheck(id,affiliate,version);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}}),_callee,this)})));function latestVersion(_x){return _latestVersion.apply(this,arguments)}return latestVersion}()},{key:"UpgradeCheck",value:function(){var _UpgradeCheck=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(id){var affiliate,version,serial,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:affiliate=_args2.length>1&&_args2[1]!==undefined?_args2[1]:"kobo";version=_args2.length>2&&_args2[2]!==undefined?_args2[2]:"0.0";serial=_args2.length>3&&_args2[3]!==undefined?_args2[3]:"N0";_context2.next=5;return this.KoboAPI("1.0/UpgradeCheck/Device/".concat(id,"/").concat(affiliate,"/").concat(version,"/").concat(serial),true,KFWProxy.transformUpgrade);case 5:return _context2.abrupt("return",_context2.sent);case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function UpgradeCheck(_x2){return _UpgradeCheck.apply(this,arguments)}return UpgradeCheck}()},{key:"ReleaseNotes",value:function(){var _ReleaseNotes=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var n,m,_args3=arguments;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:n=_args3.length>0&&_args3[0]!==undefined?_args3[0]:1;if(!(typeof n==="string")){_context3.next=6;break}m=n.match(/\/1\.0\/ReleaseNotes\/([0-9]+)/);if(!(!m||m.length!=2)){_context3.next=5;break}throw new Error('Failed to extract release note number from "'.concat(n,'"'));case 5:n=m[1];case 6:_context3.next=8;return this.KoboAPI("1.0/ReleaseNotes/".concat(n),false,KFWProxy.transformNotes);case 8:return _context3.abrupt("return",_context3.sent);case 9:case"end":return _context3.stop()}}}),_callee3,this)})));function ReleaseNotes(){return _ReleaseNotes.apply(this,arguments)}return ReleaseNotes}()},{key:"KoboAPI",value:function(){var _KoboAPI=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(path){var json,transform,_args4=arguments;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:json=_args4.length>1&&_args4[1]!==undefined?_args4[1]:false;transform=_args4.length>2&&_args4[2]!==undefined?_args4[2]:null;_context4.next=4;return _classPrivateFieldLooseBase(this,_request)[_request]("".concat(this.base,"/api.kobobooks.com/").concat(path),json,transform);case 4:return _context4.abrupt("return",_context4.sent);case 5:case"end":return _context4.stop()}}}),_callee4,this)})));function KoboAPI(_x3){return _KoboAPI.apply(this,arguments)}return KoboAPI}()},{key:"batch",value:function batch(){if(!_classPrivateFieldLooseBase(this,_pending)[_pending])_classPrivateFieldLooseBase(this,_pending)[_pending]=[]}},{key:"endBatch",value:function endBatch(){if(_classPrivateFieldLooseBase(this,_pending)[_pending]){var _classPrivateFieldLoo;(_classPrivateFieldLoo=_classPrivateFieldLooseBase(this,_doBatch))[_doBatch].apply(_classPrivateFieldLoo,_toConsumableArray(_classPrivateFieldLooseBase(this,_pending)[_pending]));_classPrivateFieldLooseBase(this,_pending)[_pending]=null}}}],[{key:"transformUpgrade",value:function transformUpgrade(obj){obj.UpgradeVersion=_classPrivateFieldLooseBase(KFWProxy,_transformUpgradeVersion)[_transformUpgradeVersion](obj.UpgradeURL);obj.UpgradeDate=_classPrivateFieldLooseBase(KFWProxy,_transformUpgradeDate)[_transformUpgradeDate](obj.UpgradeURL,obj.UpgradeVersion);if(false)if(Math.random()>.5)obj.UpgradeVersion="1.2.3";return obj}},{key:"versionCompare",value:function versionCompare(a,b){if(!a)return-1;if(!b)return 1;if(a.endsWith("-s")&&b==a.substring(0,a.length-2))return 1;if(b.endsWith("-s")&&a==b.substring(0,b.length-2))return-1;var as=a.split(".").map((function(x){return parseInt(x,10)}));var bs=b.split(".").map((function(x){return parseInt(x,10)}));for(var i=0;i<Math.max(as.length,bs.length);i++){if(as[i]==null)return bs[i]==0?0:-1;if(bs[i]==null)return as[i]==0?0:1;if(as[i]<bs[i])return-1;if(as[i]>bs[i])return 1}return 0}},{key:"transformNotes",value:function transformNotes(html){var css="p{margin:0}";try{var doc=(new DOMParser).parseFromString(html,"text/html");doc.head.appendChild(doc.createElement("style")).textContent=css;return doc.documentElement.innerHTML}catch(ex){console.warn("tranform notes failed ".concat(ex,", falling back to innerHTML method"));var _doc=document.createElement("div");_doc.innerHTML=html;return"<html><head><title></title><style>".concat(css,"</style></head><body>").concat(_doc.innerHTML,"</body></html>")}}}]);return KFWProxy}();var _transformUpgradeDate2=function _transformUpgradeDate2(url,version){if(!url||!version||version=="0.0")return"Unknown";switch(version){case"3.4.1":return"May 2014";case"4.6.9960":return"October 2017";case"4.6.10075":return"November 2017";case"4.9.11311":return"June 2018";case"4.9.11314":return"June 2018";case"4.28.17623":return"June 2021"}var m=url.match(/\/firmwares\/kobo[0-9]\/(.+?)\//);if(!m||m.length!=2)throw new Error('Failed to extract date from "'.concat(url,'" and "').concat(version,'"'));var _m$1$replace$split=m[1].replace(/([0-9]+)/," $1").split(" "),_m$1$replace$split2=_slicedToArray(_m$1$replace$split,2),month=_m$1$replace$split2[0],year=_m$1$replace$split2[1];switch(month=month.charAt(0).toUpperCase()+month.slice(1)){case"Jan":month="January";break;case"Feb":month="February";break;case"Mar":month="March";break;case"Apr":month="April";break;case"Jun":month="June";break;case"Jul":month="July";break;case"Aug":month="August";break;case"Sep":month="September";break;case"Sept":month="September";break;case"Oct":month="October";break;case"Nov":month="November";break;case"Dec":month="December";break;case"Rakuten-":month="Unknown";break}return[month,year].join(" ").trim()};var _transformUpgradeVersion2=function _transformUpgradeVersion2(url){if(!url)return"0.0";url=url.split("?")[0];if(url.endsWith("/kobo7/April2018/kobo-update-4.8.zip"))return"4.8.10956";if(url.endsWith("/kobo7/May2018/kobo-update-4.8.zip"))return"4.8.11090";if(url.endsWith("/kobo4/May2018/kobo-update-4.9.11311.zip"))return"4.9.11314";if(url.endsWith("/kobo5/May2018/kobo-update-4.9.11311.zip"))return"4.9.11314";if(url.endsWith("/kobo6/Aug2018/kobo-update-4.10.zip"))return"4.10.11591";if(url.endsWith("/kobo7/Aug2018/kobo-update-4.10.zip"))return"4.10.11591";var m=url.match(/\/kobo-update-([0-9.]+(?:-s)?)(?:-TF[0-9]+|-TouchFW-[0-9]+)?\.zip/);if(!m||m.length!=2)throw new Error('Failed to extract version from "'.concat(url,'"'));return m[1]};Object.defineProperty(KFWProxy,_transformUpgradeVersion,{value:_transformUpgradeVersion2});Object.defineProperty(KFWProxy,_transformUpgradeDate,{value:_transformUpgradeDate2});var _request2=function(){var _request3=_asyncToGenerator(regeneratorRuntime.mark((function _callee17(url){var json,transform,req,_args17=arguments;return regeneratorRuntime.wrap((function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:json=_args17.length>1&&_args17[1]!==undefined?_args17[1]:false;transform=_args17.length>2&&_args17[2]!==undefined?_args17[2]:null;req=new(_classPrivateFieldLooseBase(this,_PendingRequest)[_PendingRequest])(url,json,transform);if(_classPrivateFieldLooseBase(this,_pending)[_pending]&&url.startsWith("".concat(this.base,"/api.kobobooks.com/"))){_classPrivateFieldLooseBase(this,_pending)[_pending].push(req)}else{_classPrivateFieldLooseBase(this,_do)[_do](req)}return _context17.abrupt("return",req.promise);case 5:case"end":return _context17.stop()}}}),_callee17,this)})));function _request2(_x10){return _request3.apply(this,arguments)}return _request2}();var _do2=function(){var _do3=_asyncToGenerator(regeneratorRuntime.mark((function _callee18(req){var _this5=this;var xhr;return regeneratorRuntime.wrap((function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:xhr=new XMLHttpRequest;xhr.addEventListener("load",(function(ev){return _classPrivateFieldLooseBase(_this5,_doResponse)[_doResponse](req,xhr.responseText,xhr.status,xhr.statusText,xhr.getResponseHeader("X-KFWProxy-Request-Id"))}));xhr.addEventListener("error",(function(ev){return req.reject(new Error('Request to "'.concat(req.url,'" failed')))}));xhr.addEventListener("abort",(function(ev){return req.reject(new Error('Request to "'.concat(req.url,'" aborted')))}));xhr.open("GET",req.url);xhr.send();_context18.next=8;return req.promise;case 8:return _context18.abrupt("return",_context18.sent);case 9:case"end":return _context18.stop()}}}),_callee18)})));function _do2(_x11){return _do3.apply(this,arguments)}return _do2}();var _doBatch2=function(){var _doBatch3=_asyncToGenerator(regeneratorRuntime.mark((function _callee19(){var _this6=this;var _len,req,_key,xhr,_args19=arguments;return regeneratorRuntime.wrap((function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:for(_len=_args19.length,req=new Array(_len),_key=0;_key<_len;_key++){req[_key]=_args19[_key]}if(!(req.length==0)){_context19.next=3;break}return _context19.abrupt("return");case 3:xhr=new XMLHttpRequest;xhr.addEventListener("load",(function(ev){var requestID=xhr.getResponseHeader("X-KFWProxy-Request-Id");try{if(xhr.status!=200)throw"".concat(xhr.status," ").concat(xhr.statusText);var rsp=JSON.parse(xhr.responseText);if(!Array.isArray(rsp))throw"response not an array";if(rsp.length!=req.length)throw"found ".concat(rsp.length," responses, but expected ").concat(req.length);for(var i=0;i<req.length;i++){_classPrivateFieldLooseBase(_this6,_doResponse)[_doResponse](req[i],rsp[i].body,rsp[i].status,"",requestID)}}catch(ex){var _iterator19=_createForOfIteratorHelper(req),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var r=_step19.value;r.reject(new Error('Batch request including "'.concat(r.url,'" failed: ').concat(ex)))}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}Sentry.captureException(new Error("Batch request failed: ".concat(ex)),{extra:{requestID:requestID}});return}}));xhr.addEventListener("error",(function(ev){return req.forEach((function(r){return r.reject(new Error('Batch request including "'.concat(r.url,'" failed')))}))}));xhr.addEventListener("abort",(function(ev){return req.forEach((function(r){return r.reject(new Error('Batch request including "'.concat(r.url,'" aborted')))}))}));xhr.open("GET","".concat(this.base,"/api.kobobooks.com?h=1&x=").concat(req.map((function(r){return encodeURIComponent(r.url.replace("".concat(_this6.base,"/api.kobobooks.com/"),""))})).join("&x=")));xhr.send();_context19.next=11;return Promise.all(req.map((function(r){return r.promise})));case 11:return _context19.abrupt("return",_context19.sent);case 12:case"end":return _context19.stop()}}}),_callee19,this)})));function _doBatch2(){return _doBatch3.apply(this,arguments)}return _doBatch2}();var _doResponse2=function _doResponse2(req,body,status){var statusText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var requestID=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;if(status!=200){req.reject(new Error('Request to "'.concat(req.url,'" failed: ').concat(status," ").concat(statusText)));Sentry.captureException(new Error('Request to "'.concat(req.url,'" failed: ').concat(status," ").concat(statusText)),{extra:{requestID:requestID}});return}var obj=body;if(req.json){try{obj=JSON.parse(obj)}catch(ex){req.reject(new Error('Request to "'.concat(req.url,'" failed: ').concat(ex)));return}}if(req.transform){try{obj=req.transform(obj)}catch(ex){req.reject(new Error('Request to "'.concat(req.url,'" failed: transform error: ').concat(ex)));return}}req.resolve(obj)};var KoboFirmwareOldVersionsData=window.KoboFirmwareOldVersionsData=function(){var resolve,reject;var promise=new Promise((function(a,b){resolve=a;reject=b}));var timeout=window.setTimeout((function(){if("KoboFirmwareOldVersionsDataRaw"in window){resolve(KoboFirmwareOldVersionsDataRaw);console.warn("async old versions load failed, but still found the data afterwards...");return}reject(new Error("Failed to load old versions data: Timed out"));console.error("old versions load failed");Sentry.captureException(new Error("Failed to load old versions data: Timed out"))}),1e4);promise.resolve=function(data){window.clearTimeout(timeout);resolve(data)};return promise}();var _db=_classPrivateFieldLooseKey("db");var _db2=_classPrivateFieldLooseKey("__db");var _db3=_classPrivateFieldLooseKey("_db");var KoboFirmwareDB=function(){function KoboFirmwareDB(){var db=arguments.length>0&&arguments[0]!==undefined?arguments[0]:KoboFirmwareOldVersionsData;_classCallCheck(this,KoboFirmwareDB);Object.defineProperty(this,_db3,{value:_db4});Object.defineProperty(this,_db,{writable:true,value:void 0});Object.defineProperty(this,_db2,{writable:true,value:void 0});_classPrivateFieldLooseBase(this,_db)[_db]=db}_createClass(KoboFirmwareDB,[{key:"versionsForDevice",value:function(){var _versionsForDevice=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(id){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _classPrivateFieldLooseBase(this,_db3)[_db3]();case 2:return _context5.abrupt("return",_context5.sent.filter((function(_ref){var _ref2=_slicedToArray(_ref,4),did=_ref2[1];return did==id})).reverse().map((function(_ref3){var _ref4=_slicedToArray(_ref3,5),version=_ref4[2],date=_ref4[3],download=_ref4[4];return{version:version,date:date,download:download}})));case 3:case"end":return _context5.stop()}}}),_callee5,this)})));function versionsForDevice(_x4){return _versionsForDevice.apply(this,arguments)}return versionsForDevice}()},{key:"versionsByDevice",value:function(){var _versionsByDevice=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var tmp,_id,earliest,version;return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _classPrivateFieldLooseBase(this,_db3)[_db3]();case 2:tmp=_context6.sent.reduce((function(acc,_ref5){var _ref6=_slicedToArray(_ref5,4),id=_ref6[1],version=_ref6[2],date=_ref6[3];(acc[id]=acc[id]||{})[version]=date;return acc}),{});for(_id in tmp){earliest=void 0;for(version in tmp[_id]){if(!earliest||KFWProxy.versionCompare(earliest,version)==1)earliest=version}tmp[_id].earliest=earliest}return _context6.abrupt("return",tmp);case 5:case"end":return _context6.stop()}}}),_callee6,this)})));function versionsByDevice(){return _versionsByDevice.apply(this,arguments)}return versionsByDevice}()},{key:"versions",value:function(){var _versions=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){return regeneratorRuntime.wrap((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.t0=Object;_context7.next=3;return _classPrivateFieldLooseBase(this,_db3)[_db3]();case 3:_context7.t1=_context7.sent.reduce((function(acc,_ref7){var _ref8=_slicedToArray(_ref7,4),version=_ref8[2];acc[version]=null;return acc}),{});return _context7.abrupt("return",_context7.t0.keys.call(_context7.t0,_context7.t1).reverse());case 5:case"end":return _context7.stop()}}}),_callee7,this)})));function versions(){return _versions.apply(this,arguments)}return versions}()},{key:"downloadsByVersion",value:function(){var _downloadsByVersion=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){var tmp,cur,curv,devs,devsh,_iterator,_step,_step$value,_hardware,_id3,version,date,download,i,hardware,_id2;return regeneratorRuntime.wrap((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:tmp=[];devs={},devsh={};_context8.t0=_createForOfIteratorHelper;_context8.next=5;return _classPrivateFieldLooseBase(this,_db3)[_db3]();case 5:_context8.t1=_context8.sent;_iterator=(0,_context8.t0)(_context8.t1);try{for(_iterator.s();!(_step=_iterator.n()).done;){_step$value=_slicedToArray(_step.value,5),_hardware=_step$value[0],_id3=_step$value[1],version=_step$value[2],date=_step$value[3],download=_step$value[4];if(curv!=version){if(cur)tmp.push(cur);cur={version:version,date:date,for:{},download:_defineProperty({},_hardware,download)};curv=version}if(_hardware in cur.download){if(cur.download[_hardware]!=download)cur.download[_hardware]="varies"}else{cur.download[_hardware]=download}cur.for[_id3]=true;if(!(_id3 in devs)){{devs[_id3]=_hardware}(devsh[_hardware]=devsh[_hardware]||{})[_id3]=null}}}catch(err){_iterator.e(err)}finally{_iterator.f()}tmp.push(cur);for(i=0;i<tmp.length;i++){tmp[i].notfor=[];for(hardware in tmp[i].download){for(_id2 in devsh[hardware]){if(!(_id2 in tmp[i].for))tmp[i].notfor.push(_id2)}}tmp[i].for=Object.keys(tmp[i].for)}return _context8.abrupt("return",tmp);case 11:case"end":return _context8.stop()}}}),_callee8,this)})));function downloadsByVersion(){return _downloadsByVersion.apply(this,arguments)}return downloadsByVersion}()}]);return KoboFirmwareDB}();var _db4=function(){var _db6=_asyncToGenerator(regeneratorRuntime.mark((function _callee20(){return regeneratorRuntime.wrap((function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:if(!_classPrivateFieldLooseBase(this,_db2)[_db2]){_context20.next=2;break}return _context20.abrupt("return",_classPrivateFieldLooseBase(this,_db2)[_db2]);case 2:_context20.next=4;return _classPrivateFieldLooseBase(this,_db)[_db];case 4:_classPrivateFieldLooseBase(this,_db2)[_db2]=_context20.sent.sort((function(_ref13,_ref14){var _ref15=_slicedToArray(_ref13,4),aid=_ref15[1],aversion=_ref15[2];var _ref16=_slicedToArray(_ref14,4),bid=_ref16[1],bversion=_ref16[2];var a=KFWProxy.versionCompare(aversion,bversion);return a==0?aid.localeCompare(bid):a}));return _context20.abrupt("return",_classPrivateFieldLooseBase(this,_db2)[_db2]);case 6:case"end":return _context20.stop()}}}),_callee20,this)})));function _db4(){return _db6.apply(this,arguments)}return _db4}();var _kfw=_classPrivateFieldLooseKey("kfw");var _db5=_classPrivateFieldLooseKey("db");var _affiliates=_classPrivateFieldLooseKey("affiliates");var _devices=_classPrivateFieldLooseKey("devices");var _req=_classPrivateFieldLooseKey("req");var _load=_classPrivateFieldLooseKey("load");var _ctr=_classPrivateFieldLooseKey("ctr");var _listify=_classPrivateFieldLooseKey("listify");var _modal=_classPrivateFieldLooseKey("modal");var _el=_classPrivateFieldLooseKey("el");var KoboFirmware=function(){_createClass(KoboFirmware,[{key:"debug",get:function get(){return{KFWProxy:KFWProxy,KoboFirmwareDB:KoboFirmwareDB,KoboFirmwareOldVersionsData:KoboFirmwareOldVersionsData,KoboFirmware:KoboFirmware,kfw:_classPrivateFieldLooseBase(this,_kfw)[_kfw],db:_classPrivateFieldLooseBase(this,_db5)[_db5],affiliates:_classPrivateFieldLooseBase(this,_affiliates)[_affiliates],devices:_classPrivateFieldLooseBase(this,_devices)[_devices],req:_classPrivateFieldLooseBase(this,_req)[_req]}}}]);function KoboFirmware(){var kfw=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new KFWProxy;var db=arguments.length>1&&arguments[1]!==undefined?arguments[1]:new KoboFirmwareDB;var affiliates=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["kobo","bestbuyca","fnac","beta","rakutenbooks","walmartca"];var devices=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[["kobo3","00000000-0000-0000-0000-000000000310","Kobo Touch A/B"],["kobo4","00000000-0000-0000-0000-000000000320","Kobo Touch C"],["kobo4","00000000-0000-0000-0000-000000000340","Kobo Mini"],["kobo4","00000000-0000-0000-0000-000000000330","Kobo Glo"],["kobo6","00000000-0000-0000-0000-000000000371","Kobo Glo HD"],["kobo6","00000000-0000-0000-0000-000000000372","Kobo Touch 2.0"],["kobo5","00000000-0000-0000-0000-000000000360","Kobo Aura"],["kobo4","00000000-0000-0000-0000-000000000350","Kobo Aura HD"],["kobo5","00000000-0000-0000-0000-000000000370","Kobo Aura H2O"],["kobo6","00000000-0000-0000-0000-000000000374","Kobo Aura H2O Edition 2 v1"],["kobo7","00000000-0000-0000-0000-000000000378","Kobo Aura H2O Edition 2 v2"],["kobo6","00000000-0000-0000-0000-000000000373","Kobo Aura ONE"],["kobo6","00000000-0000-0000-0000-000000000381","Kobo Aura ONE Limited Edition"],["kobo6","00000000-0000-0000-0000-000000000375","Kobo Aura Edition 2 v1"],["kobo7","00000000-0000-0000-0000-000000000379","Kobo Aura Edition 2 v2"],["kobo7","00000000-0000-0000-0000-000000000382","Kobo Nia"],["kobo7","00000000-0000-0000-0000-000000000376","Kobo Clara HD"],["kobo7","00000000-0000-0000-0000-000000000380","Kobo Forma"],["kobo7","00000000-0000-0000-0000-000000000384","Kobo Libra H2O"],["kobo8","00000000-0000-0000-0000-000000000387","Kobo Elipsa"]];_classCallCheck(this,KoboFirmware);Object.defineProperty(this,_ctr,{value:_ctr2});Object.defineProperty(this,_load,{value:_load2});Object.defineProperty(this,_kfw,{writable:true,value:void 0});Object.defineProperty(this,_db5,{writable:true,value:void 0});Object.defineProperty(this,_affiliates,{writable:true,value:void 0});Object.defineProperty(this,_devices,{writable:true,value:void 0});Object.defineProperty(this,_req,{writable:true,value:void 0});_classPrivateFieldLooseBase(this,_kfw)[_kfw]=kfw;_classPrivateFieldLooseBase(this,_db5)[_db5]=db;_classPrivateFieldLooseBase(this,_affiliates)[_affiliates]=affiliates;_classPrivateFieldLooseBase(this,_devices)[_devices]=[];var _iterator2=_createForOfIteratorHelper(devices),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var device=_step2.value;if(!Array.isArray(device)||device.length!=3)throw new TypeError("Invalid device ".concat(JSON.stringify(device),": incorrect length"));var _device=_slicedToArray(device,3),hardware=_device[0],_id4=_device[1],name=_device[2];if(!hardware||typeof hardware!=="string"||!hardware.startsWith("kobo"))throw new TypeError("Invalid device ".concat(JSON.stringify(device),": bad hardware"));if(!_id4||typeof _id4!=="string"||_id4.length!=36){throw new TypeError("Invalid device ".concat(JSON.stringify(device),": bad id"))}if(!name||typeof name!=="string"||name.length==0)throw new TypeError("Invalid device ".concat(JSON.stringify(device),": bad device"));_classPrivateFieldLooseBase(this,_devices)[_devices].push({hardware:hardware,id:_id4,name:name})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}_classPrivateFieldLooseBase(this,_load)[_load]()}_createClass(KoboFirmware,[{key:"renderLatest",value:function(){var _renderLatest=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(table){var _this2=this;var ths,trm,trs,_iterator3,_step3,_loop;return regeneratorRuntime.wrap((function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:ths=document.createDocumentFragment();_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Model",["kfw-latest__model"]);_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Hardware",["kfw-latest__hardware"]);_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Version",["kfw-latest__version"]);_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Date",["kfw-latest__date"]);_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Links",["kfw-latest__links"]);table.querySelector("thead tr").appendChild(ths);trm={};trs=document.createDocumentFragment();_iterator3=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]);try{_loop=function _loop(){var device=_step3.value;var tr=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](trs,"tr");trm[device.id]={model:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td",device.name,["kfw-latest__model"],{title:"ID: ".concat(device.id)}),hardware:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td",device.hardware,["kfw-latest__hardware"]),version:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td","Loading",["kfw-latest__version"]),date:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td",null,["kfw-latest__date"]),linksw:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td",null,["kfw-latest__links"])};var linksw1=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](trm[device.id].linksw,"span",null,[],{style:"display: inline-block; vertical-align: top;"});var linksw2=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](trm[device.id].linksw,"span",null,[],{style:"display: inline-block; vertical-align: top;"});trm[device.id].links={download:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](linksw1,"a","Download",["kfw-latest__links__download"],{style:"display: none;",rel:"noopener"}),notes:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](linksw1,"a","Notes",["kfw-latest__links__notes"],{style:"display: none;",rel:"noopener",target:"_blank"}),affiliates:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](linksw2,"button","Other Affiliates",["kfw-latest__links__affiliates"],{style:"display: none;"}),versions:_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](linksw2,"button","Other Versions",["kfw-latest__links__versions"],{})};trm[device.id].links.versions.addEventListener("click",(function(ev){_classPrivateFieldLooseBase(KoboFirmware,_modal)[_modal]("Other versions for ".concat(device.name),_asyncToGenerator(regeneratorRuntime.mark((function _callee12(){var frag,_iterator5,_step5,version,el;return regeneratorRuntime.wrap((function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:frag=document.createDocumentFragment();_context12.t0=_createForOfIteratorHelper;_context12.next=4;return _classPrivateFieldLooseBase(_this2,_db5)[_db5].versionsForDevice(device.id);case 4:_context12.t1=_context12.sent;_iterator5=(0,_context12.t0)(_context12.t1);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){version=_step5.value;if(!version.download.includes(device.hardware))console.warn("possible hardware mismatch",device,version);el=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](frag,"div","".concat(version.version," - ").concat(version.date,' - <a href="').concat(version.download,'" rel="noopener">Download</a> - ').concat(device.hardware),[],{},true);_classPrivateFieldLooseBase(_this2,_ctr)[_ctr](el.querySelector("a"),["dl","Firmware"],["dl-version-".concat(version.version),"Firmware ".concat(version.version)],["dl-device-".concat(device.id.replace(/^[0-]+/,"")),"".concat(device.hardware," / ").concat(device.name)])}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return _context12.abrupt("return",frag);case 8:case"end":return _context12.stop()}}}),_callee12)}))));ev.preventDefault()}))};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop()}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}table.querySelector("tbody").appendChild(trs);_context13.next=14;return Promise.all(_classPrivateFieldLooseBase(this,_devices)[_devices].map((function(device){return function(){var _ref9=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(device){var _latest;var latest,latests,_iterator4,_step4,affiliate,info;return regeneratorRuntime.wrap((function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;latests=[];_iterator4=_createForOfIteratorHelper(_classPrivateFieldLooseBase(_this2,_affiliates)[_affiliates]);_context11.prev=3;_iterator4.s();case 5:if((_step4=_iterator4.n()).done){_context11.next=30;break}affiliate=_step4.value;info=void 0;_context11.prev=8;_context11.next=11;return _classPrivateFieldLooseBase(_this2,_req)[_req][device.id][affiliate];case 11:info=_context11.sent;_context11.next=20;break;case 14:_context11.prev=14;_context11.t0=_context11["catch"](8);_classPrivateFieldLooseBase(_this2,_req)[_req][device.id][affiliate]=_classPrivateFieldLooseBase(_this2,_kfw)[_kfw].latestVersion(device.id,affiliate);_context11.next=19;return _classPrivateFieldLooseBase(_this2,_req)[_req][device.id][affiliate];case 19:info=_context11.sent;case 20:_context11.t1=KFWProxy.versionCompare((_latest=latest)===null||_latest===void 0?void 0:_latest.UpgradeVersion,info.UpgradeVersion);_context11.next=_context11.t1===-1?23:_context11.t1===0?26:28;break;case 23:latest=info;latests=[affiliate];return _context11.abrupt("break",28);case 26:latests.push(affiliate);return _context11.abrupt("break",28);case 28:_context11.next=5;break;case 30:_context11.next=35;break;case 32:_context11.prev=32;_context11.t2=_context11["catch"](3);_iterator4.e(_context11.t2);case 35:_context11.prev=35;_iterator4.f();return _context11.finish(35);case 38:trm[device.id].version.textContent=latest.UpgradeVersion;trm[device.id].date.textContent=latest.UpgradeDate;trm[device.id].version.setAttribute("title","Affiliates with version: ".concat(latests.join(", ")));trm[device.id].links.download.href=latest.UpgradeURL;trm[device.id].links.download.style.removeProperty("display");trm[device.id].links.notes.href=latest.ReleaseNoteURL;trm[device.id].links.notes.addEventListener("click",(function(ev){if(navigator.userAgent.includes("MSIE")||navigator.userAgent.includes("Trident/")){return}_classPrivateFieldLooseBase(KoboFirmware,_modal)[_modal]("Release notes for ".concat(latest.UpgradeVersion),_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var content,frame;return regeneratorRuntime.wrap((function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _classPrivateFieldLooseBase(_this2,_kfw)[_kfw].ReleaseNotes(latest.ReleaseNoteURL);case 2:content=_context9.sent;frame=document.createElement("iframe");frame.srcdoc=content;frame.setAttribute("sandbox","");return _context9.abrupt("return",frame);case 7:case"end":return _context9.stop()}}}),_callee9)}))));ev.preventDefault()}));trm[device.id].links.notes.style.removeProperty("display");trm[device.id].links.affiliates.addEventListener("click",(function(ev){_classPrivateFieldLooseBase(KoboFirmware,_modal)[_modal]("Versions of other affiliates for ".concat(device.name),_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){var frag,affiliate,info,a;return regeneratorRuntime.wrap((function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:frag=document.createDocumentFragment();_context10.t0=regeneratorRuntime.keys(_classPrivateFieldLooseBase(_this2,_req)[_req][device.id]);case 2:if((_context10.t1=_context10.t0()).done){_context10.next=11;break}affiliate=_context10.t1.value;_context10.next=6;return _classPrivateFieldLooseBase(_this2,_req)[_req][device.id][affiliate];case 6:info=_context10.sent;a=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](frag,"div","".concat(affiliate," - ").concat(info.UpgradeVersion).concat(info.UpgradeURL?' - <a href="'.concat(info.UpgradeURL,'" rel="noopener">Download</a>'):""),[],{},true);_classPrivateFieldLooseBase(_this2,_ctr)[_ctr](a,["dl","Firmware"],["dl-version-".concat(info.UpgradeVersion),"Firmware ".concat(info.UpgradeVersion)],["dl-device-".concat(device.id.replace(/^[0-]+/,"")),"".concat(device.hardware," / ").concat(device.name)]);_context10.next=2;break;case 11:return _context10.abrupt("return",frag);case 12:case"end":return _context10.stop()}}}),_callee10)}))),["thin"]);ev.preventDefault()}));trm[device.id].links.affiliates.style.removeProperty("display");_classPrivateFieldLooseBase(_this2,_ctr)[_ctr](trm[device.id].links.download,["dl","Firmware"],["dl-version-".concat(latest.UpgradeVersion),"Firmware ".concat(latest.UpgradeVersion)],["dl-device-".concat(device.id.replace(/^[0-]+/,"")),"".concat(device.hardware," / ").concat(device.name)]);_context11.next=56;break;case 51:_context11.prev=51;_context11.t3=_context11["catch"](0);trm[device.id].version.textContent="Error";trm[device.id].version.setAttribute("title","Error: ".concat(_context11.t3));Sentry.captureException(new Error('Table row load failed for "'.concat(device.name,'" in latest versions table: ').concat(_context11.t3)));case 56:case"end":return _context11.stop()}}}),_callee11,null,[[0,51],[3,32,35,38],[8,14]])})));return function(_x6){return _ref9.apply(this,arguments)}}()(device)})));case 14:case"end":return _context13.stop()}}}),_callee13,this)})));function renderLatest(_x5){return _renderLatest.apply(this,arguments)}return renderLatest}()},{key:"renderMatrix",value:function(){var _renderMatrix=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(table){var rows,tb,_iterator6,_step6,device,cols,availability,_iterator7,_step7,version,_iterator9,_step9,_device2,date,t,c,a,row,_iterator8,_step8,_device3;return regeneratorRuntime.wrap((function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:rows={};tb=table.querySelector("tbody");rows.header=table.querySelector("thead tr");_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](rows.header,"th","Device",["kfw-matrix__device"]);_iterator6=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){device=_step6.value;rows[device.id]=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tb,"tr");_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](rows[device.id],"td",device.name,["kfw-matrix__device"])}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}cols={};_context14.next=9;return _classPrivateFieldLooseBase(this,_db5)[_db5].versionsByDevice();case 9:availability=_context14.sent;_context14.t0=_createForOfIteratorHelper;_context14.next=13;return _classPrivateFieldLooseBase(this,_db5)[_db5].versions();case 13:_context14.t1=_context14.sent;_iterator7=(0,_context14.t0)(_context14.t1);try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){version=_step7.value;_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](cols.header=cols.header||document.createDocumentFragment(),"th",version,["kfw-matrix__version"]);_iterator9=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){_device2=_step9.value;date=availability[_device2.id][version];t=void 0,c=void 0,a=void 0;if(date){t="✓";c="kfw-matrix__version--yes";a={title:date}}else if(KFWProxy.versionCompare(availability[_device2.id].earliest,version)==1){t="-";c="kfw-matrix__version--none";a={}}else{t="✗";c="kfw-matrix__version--no";a={}}_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](cols[_device2.id]=cols[_device2.id]||document.createDocumentFragment(),"td",t,["kfw-matrix__version",c],a)}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}for(row in cols){rows[row].appendChild(cols[row])}_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](rows.header,"th","Device",["kfw-matrix__device"]);_iterator8=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){_device3=_step8.value;_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](rows[_device3.id],"td",_device3.name,["kfw-matrix__device"])}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}case 20:case"end":return _context14.stop()}}}),_callee14,this)})));function renderMatrix(_x7){return _renderMatrix.apply(this,arguments)}return renderMatrix}()},{key:"renderAffiliates",value:function(){var _renderAffiliates=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(table){var _this3=this;var ths,_iterator10,_step10,affiliate,trm,trs,_iterator11,_step11,device,tr,_iterator14,_step14,_affiliate;return regeneratorRuntime.wrap((function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:ths=document.createDocumentFragment();_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Device",["kfw-affiliates__device"]);_iterator10=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_affiliates)[_affiliates]);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){affiliate=_step10.value;_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th",affiliate,["kfw-affiliates__affiliate"])}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}table.querySelector("thead tr").appendChild(ths);trm={};trs=document.createDocumentFragment();_iterator11=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){device=_step11.value;tr=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](trs,"tr");trm[device.id]={};_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td",device.name,["kfw-affiliates__device"]);_iterator14=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_affiliates)[_affiliates]);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){_affiliate=_step14.value;trm[device.id][_affiliate]=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](tr,"td","Loading",["kfw-affiliates__affiliate"])}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}table.querySelector("tbody").appendChild(trs);return _context15.abrupt("return",Promise.all(_classPrivateFieldLooseBase(this,_devices)[_devices].map((function(device){return Promise.all(_classPrivateFieldLooseBase(_this3,_affiliates)[_affiliates].map((function(affiliate){return _classPrivateFieldLooseBase(_this3,_req)[_req][device.id][affiliate].then((function(obj){trm[device.id][affiliate].textContent=obj.UpgradeVersion=="0.0"?"-":obj.UpgradeVersion;return Promise.resolve([affiliate,obj])})).catch((function(ex){trm[device.id][affiliate].textContent="Error";trm[device.id][affiliate].title="Error: ".concat(ex);return Promise.reject(ex)}))}))).then((function(affiliates){var latest;var _iterator12=_createForOfIteratorHelper(affiliates),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var _latest2;var _step12$value=_slicedToArray(_step12.value,2),info=_step12$value[1];if(KFWProxy.versionCompare((_latest2=latest)===null||_latest2===void 0?void 0:_latest2.UpgradeVersion,info.UpgradeVersion)==-1)latest=info}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}var _iterator13=_createForOfIteratorHelper(affiliates),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var _step13$value=_slicedToArray(_step13.value,2),affiliate=_step13$value[0],_info=_step13$value[1];trm[device.id][affiliate].classList.add(latest.UpgradeVersion==_info.UpgradeVersion?"kfw-affiliates__affiliate--latest":_info.UpgradeVersion=="0.0"?"kfw-affiliates__affiliate--none":"kfw-affiliates__affiliate--outdated")}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}}))}))));case 11:case"end":return _context15.stop()}}}),_callee15,this)})));function renderAffiliates(_x8){return _renderAffiliates.apply(this,arguments)}return renderAffiliates}()},{key:"renderVersions",value:function(){var _renderVersions=_asyncToGenerator(regeneratorRuntime.mark((function _callee16(table){var _this4=this;var hardware,name,idhardware,_iterator15,_step15,device,ths,_iterator16,_step16,hw,rows,_iterator17,_step17,version,row,_iterator18,_step18,_loop2,x;return regeneratorRuntime.wrap((function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:hardware={};name={};idhardware={};_iterator15=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){device=_step15.value;hardware[device.hardware]=null;name[device.id]=device.name;idhardware[device.id]=device.hardware}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}hardware=Object.keys(hardware).sort((function(a,b){return a.localeCompare(b)}));ths=document.createDocumentFragment();_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Date",["kfw-versions__date"]);_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Version",["kfw-versions__version"]);_iterator16=_createForOfIteratorHelper(hardware);try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){hw=_step16.value;_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th",hw,["kfw-versions__hardware"])}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](ths,"th","Notes",["kfw-versions__notes"]);table.querySelector("thead tr").appendChild(ths);rows=document.createDocumentFragment();_context16.t0=_createForOfIteratorHelper;_context16.next=17;return _classPrivateFieldLooseBase(this,_db5)[_db5].downloadsByVersion();case 17:_context16.t1=_context16.sent;_iterator17=(0,_context16.t0)(_context16.t1);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){version=_step17.value;row=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](rows,"tr");_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](row,"td",version.date,["kfw-versions__date"]);_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](row,"td",version.version,["kfw-versions__version"]);_iterator18=_createForOfIteratorHelper(hardware);try{_loop2=function _loop2(){var hw=_step18.value;var td=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](row,"td",version.download[hw]?"":"-",["kfw-versions__hardware"]);if(version.download[hw]){var a=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](td,"a","Download",[],{rel:"noopener",href:version.download[hw],title:_classPrivateFieldLooseBase(KoboFirmware,_listify)[_listify](version.for.filter((function(id){return idhardware[id]==hw})).map((function(id){return name[id].replace(/Kobo /,"")})))});_classPrivateFieldLooseBase(_this4,_ctr)[_ctr](a,["dl","Firmware"],["dl-version-".concat(version.version),"Firmware ".concat(version.version)])}};for(_iterator18.s();!(_step18=_iterator18.n()).done;){_loop2()}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}x=version.notfor.length?version.for.length>version.notfor.length?"Not for ".concat(_classPrivateFieldLooseBase(KoboFirmware,_listify)[_listify](version.notfor.map((function(id){return name[id].replace(/Kobo /,"")}))),"."):"Only for ".concat(_classPrivateFieldLooseBase(KoboFirmware,_listify)[_listify](version.for.map((function(id){return name[id].replace(/Kobo /,"")}))),"."):"";_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](row,"td",x,["kfw-versions__notes"])}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}table.querySelector("tbody").appendChild(rows);case 21:case"end":return _context16.stop()}}}),_callee16,this)})));function renderVersions(_x9){return _renderVersions.apply(this,arguments)}return renderVersions}()}]);return KoboFirmware}();var _el2=function _el2(parent,tag){var inner=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var classes=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var attrs=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var raw=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var el=document.createElement(tag);var _iterator20=_createForOfIteratorHelper(classes),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var c=_step20.value;el.classList.add(c)}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}for(var a in attrs){el.setAttribute(a,attrs[a])}if(inner)el[raw?"innerHTML":"textContent"]=inner.toString();if(parent)parent.appendChild(el);return el};var _modal2=function _modal2(title,fn){var classes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var modal=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](null,"aside",null,["modal-wrapper"]);var inner=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](modal,"div",null,["modal"].concat(_toConsumableArray(classes)));var bar=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](inner,"div",null,["titlebar"]);var close=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](bar,"button","Close",["close"]);var text=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](bar,"div",title,["title"]);var body=_classPrivateFieldLooseBase(KoboFirmware,_el)[_el](inner,"div","Loading",["body"]);var cfn=function cfn(ev){if(ev){if(ev.target!=close&&ev.target!=modal&&ev.keyCode!=27){return}ev.preventDefault()}document.body.removeChild(modal);document.body.removeEventListener("keydown",cfn,true)};modal.addEventListener("click",cfn,true);document.body.addEventListener("keydown",cfn,true);document.body.appendChild(modal);{_asyncToGenerator(regeneratorRuntime.mark((function _callee21(){var res;return regeneratorRuntime.wrap((function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.prev=0;res=fn();if(!(res instanceof Promise)){_context21.next=6;break}_context21.next=5;return res;case 5:res=_context21.sent;case 6:if(typeof res==="string"){body.innerHTML=res}else if(res instanceof HTMLIFrameElement){res.classList.add("body");res.style.border="none";res.style.width="100%";res.style.height="100%";res.style.padding=0;inner.removeChild(body);inner.appendChild(res)}else{body.innerHTML="";body.appendChild(res)}_context21.next=14;break;case 9:_context21.prev=9;_context21.t0=_context21["catch"](0);body.innerHTML="Error: Load failed: ".concat(_context21.t0);console.error("modal load failed",_context21.t0);Sentry.captureException(new Error('Modal load failed for "'.concat(title,'": ').concat(_context21.t0)));case 14:case"end":return _context21.stop()}}}),_callee21,null,[[0,9]])})))()}return{title:text,body:body,close:function close(){return cfn(null)}}};var _listify2=function _listify2(arr){if(!arr||arr.length==0)return"";if(arr.length==1)return arr[0].toString();if(arr.length==2)return arr.join(" and ");return"".concat(arr.slice(0,arr.length-1).join(", "),", and ").concat(arr[arr.length-1])};var _load2=function _load2(){_classPrivateFieldLooseBase(this,_req)[_req]={};var _iterator21=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_devices)[_devices]),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var device=_step21.value;_classPrivateFieldLooseBase(this,_kfw)[_kfw].batch();_classPrivateFieldLooseBase(this,_req)[_req][device.id]={};var _iterator22=_createForOfIteratorHelper(_classPrivateFieldLooseBase(this,_affiliates)[_affiliates]),_step22;try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var affiliate=_step22.value;_classPrivateFieldLooseBase(this,_req)[_req][device.id][affiliate]=_classPrivateFieldLooseBase(this,_kfw)[_kfw].latestVersion(device.id,affiliate)}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}_classPrivateFieldLooseBase(this,_kfw)[_kfw].endBatch()}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}};var _ctr2=function _ctr2(link){for(var _len2=arguments.length,x=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){x[_key2-1]=arguments[_key2]}if(window.goatcounter){var fn=function fn(){var _iterator23=_createForOfIteratorHelper(x),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var _step23$value=_slicedToArray(_step23.value,2),evt=_step23$value[0],_name=_step23$value[1];var ct=window.goatcounter.url({event:true,path:"kfw-".concat(evt),title:"".concat(_name)});if(!ct)continue;navigator.sendBeacon(ct)}}catch(err){_iterator23.e(err)}finally{_iterator23.f()}};link.addEventListener("click",fn,false);link.addEventListener("auxclick",fn,false)}};Object.defineProperty(KoboFirmware,_listify,{value:_listify2});Object.defineProperty(KoboFirmware,_modal,{value:_modal2});Object.defineProperty(KoboFirmware,_el,{value:_el2});Sentry.init({dsn:"https://696a706ba440443eb3e19094ebd72f74@o143001.ingest.sentry.io/1104793",maxBreadcrumbs:100,attachStacktrace:true});var app=window.app=new KoboFirmware;app.renderLatest(document.getElementById("kfw-latest")).catch((function(ex){return Sentry.captureException(new Error("Table load failed for #kfw-latest"))}));app.renderMatrix(document.getElementById("kfw-matrix")).catch((function(ex){return Sentry.captureException(new Error("Table load failed for #kfw-matrix"))}));app.renderAffiliates(document.getElementById("kfw-affiliates")).catch((function(ex){return Sentry.captureException(new Error("Table load failed for #kfw-affiliates"))}));app.renderVersions(document.getElementById("kfw-versions")).catch((function(ex){return Sentry.captureException(new Error("Table load failed for #kfw-versions"))}));document.getElementById("error").className="error hidden"},{"@sentry/browser":7,"core-js/modules/es6.array.from.js":153,"core-js/modules/es6.array.iterator.js":154,"core-js/modules/es6.array.sort.js":155,"core-js/modules/es6.function.name.js":156,"core-js/modules/es6.object.keys.js":157,"core-js/modules/es6.object.to-string.js":158,"core-js/modules/es6.promise.js":159,"core-js/modules/es6.regexp.to-string.js":161,"core-js/modules/es6.string.ends-with.js":162,"core-js/modules/es6.string.includes.js":163,"core-js/modules/es6.string.iterator.js":164,"core-js/modules/es6.string.starts-with.js":165,"core-js/modules/es6.symbol.js":166,"core-js/modules/es6.weak-map.js":167,"core-js/modules/es7.array.includes.js":168,"core-js/modules/es7.symbol.async-iterator.js":169,"core-js/modules/web.dom.iterable.js":170,"regenerator-runtime/runtime.js":172}],2:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var eventbuilder_1=require("./eventbuilder");var transports_1=require("./transports");var BrowserBackend=function(_super){tslib_1.__extends(BrowserBackend,_super);function BrowserBackend(){return _super!==null&&_super.apply(this,arguments)||this}BrowserBackend.prototype.eventFromException=function(exception,hint){return eventbuilder_1.eventFromException(this._options,exception,hint)};BrowserBackend.prototype.eventFromMessage=function(message,level,hint){if(level===void 0){level=types_1.Severity.Info}return eventbuilder_1.eventFromMessage(this._options,message,level,hint)};BrowserBackend.prototype._setupTransport=function(){if(!this._options.dsn){return _super.prototype._setupTransport.call(this)}var transportOptions=tslib_1.__assign(tslib_1.__assign({},this._options.transportOptions),{dsn:this._options.dsn});if(this._options.transport){return new this._options.transport(transportOptions)}if(utils_1.supportsFetch()){return new transports_1.FetchTransport(transportOptions)}return new transports_1.XHRTransport(transportOptions)};return BrowserBackend}(core_1.BaseBackend);exports.BrowserBackend=BrowserBackend},{"./eventbuilder":4,"./transports":19,"@sentry/core":25,"@sentry/types":38,"@sentry/utils":48,tslib:173}],3:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var backend_1=require("./backend");var helpers_1=require("./helpers");var integrations_1=require("./integrations");var version_1=require("./version");var BrowserClient=function(_super){tslib_1.__extends(BrowserClient,_super);function BrowserClient(options){if(options===void 0){options={}}return _super.call(this,backend_1.BrowserBackend,options)||this}BrowserClient.prototype.showReportDialog=function(options){if(options===void 0){options={}}var document=utils_1.getGlobalObject().document;if(!document){return}if(!this._isEnabled()){utils_1.logger.error("Trying to call showReportDialog with Sentry Client disabled");return}helpers_1.injectReportDialog(tslib_1.__assign(tslib_1.__assign({},options),{dsn:options.dsn||this.getDsn()}))};BrowserClient.prototype._prepareEvent=function(event,scope,hint){event.platform=event.platform||"javascript";event.sdk=tslib_1.__assign(tslib_1.__assign({},event.sdk),{name:version_1.SDK_NAME,packages:tslib_1.__spread(event.sdk&&event.sdk.packages||[],[{name:"npm:@sentry/browser",version:version_1.SDK_VERSION}]),version:version_1.SDK_VERSION});return _super.prototype._prepareEvent.call(this,event,scope,hint)};BrowserClient.prototype._sendEvent=function(event){var integration=this.getIntegration(integrations_1.Breadcrumbs);if(integration){integration.addSentryBreadcrumb(event)}_super.prototype._sendEvent.call(this,event)};return BrowserClient}(core_1.BaseClient);exports.BrowserClient=BrowserClient},{"./backend":2,"./helpers":6,"./integrations":10,"./version":21,"@sentry/core":25,"@sentry/utils":48,tslib:173}],4:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var parsers_1=require("./parsers");var tracekit_1=require("./tracekit");function eventFromException(options,exception,hint){var syntheticException=hint&&hint.syntheticException||undefined;var event=eventFromUnknownInput(exception,syntheticException,{attachStacktrace:options.attachStacktrace});utils_1.addExceptionMechanism(event,{handled:true,type:"generic"});event.level=types_1.Severity.Error;if(hint&&hint.event_id){event.event_id=hint.event_id}return utils_1.SyncPromise.resolve(event)}exports.eventFromException=eventFromException;function eventFromMessage(options,message,level,hint){if(level===void 0){level=types_1.Severity.Info}var syntheticException=hint&&hint.syntheticException||undefined;var event=eventFromString(message,syntheticException,{attachStacktrace:options.attachStacktrace});event.level=level;if(hint&&hint.event_id){event.event_id=hint.event_id}return utils_1.SyncPromise.resolve(event)}exports.eventFromMessage=eventFromMessage;function eventFromUnknownInput(exception,syntheticException,options){if(options===void 0){options={}}var event;if(utils_1.isErrorEvent(exception)&&exception.error){var errorEvent=exception;exception=errorEvent.error;event=parsers_1.eventFromStacktrace(tracekit_1.computeStackTrace(exception));return event}if(utils_1.isDOMError(exception)||utils_1.isDOMException(exception)){var domException=exception;var name_1=domException.name||(utils_1.isDOMError(domException)?"DOMError":"DOMException");var message=domException.message?name_1+": "+domException.message:name_1;event=eventFromString(message,syntheticException,options);utils_1.addExceptionTypeValue(event,message);if("code"in domException){event.tags=tslib_1.__assign(tslib_1.__assign({},event.tags),{"DOMException.code":""+domException.code})}return event}if(utils_1.isError(exception)){event=parsers_1.eventFromStacktrace(tracekit_1.computeStackTrace(exception));return event}if(utils_1.isPlainObject(exception)||utils_1.isEvent(exception)){var objectException=exception;event=parsers_1.eventFromPlainObject(objectException,syntheticException,options.rejection);utils_1.addExceptionMechanism(event,{synthetic:true});return event}event=eventFromString(exception,syntheticException,options);utils_1.addExceptionTypeValue(event,""+exception,undefined);utils_1.addExceptionMechanism(event,{synthetic:true});return event}exports.eventFromUnknownInput=eventFromUnknownInput;function eventFromString(input,syntheticException,options){if(options===void 0){options={}}var event={message:input};if(options.attachStacktrace&&syntheticException){var stacktrace=tracekit_1.computeStackTrace(syntheticException);var frames_1=parsers_1.prepareFramesForEvent(stacktrace.stack);event.stacktrace={frames:frames_1}}return event}exports.eventFromString=eventFromString},{"./parsers":14,"./tracekit":16,"@sentry/types":38,"@sentry/utils":48,tslib:173}],5:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var types_1=require("@sentry/types");exports.Severity=types_1.Severity;exports.Status=types_1.Status;var core_1=require("@sentry/core");exports.addGlobalEventProcessor=core_1.addGlobalEventProcessor;exports.addBreadcrumb=core_1.addBreadcrumb;exports.captureException=core_1.captureException;exports.captureEvent=core_1.captureEvent;exports.captureMessage=core_1.captureMessage;exports.configureScope=core_1.configureScope;exports.getHubFromCarrier=core_1.getHubFromCarrier;exports.getCurrentHub=core_1.getCurrentHub;exports.Hub=core_1.Hub;exports.makeMain=core_1.makeMain;exports.Scope=core_1.Scope;exports.startTransaction=core_1.startTransaction;exports.setContext=core_1.setContext;exports.setExtra=core_1.setExtra;exports.setExtras=core_1.setExtras;exports.setTag=core_1.setTag;exports.setTags=core_1.setTags;exports.setUser=core_1.setUser;exports.withScope=core_1.withScope;var client_1=require("./client");exports.BrowserClient=client_1.BrowserClient;var helpers_1=require("./helpers");exports.injectReportDialog=helpers_1.injectReportDialog;var eventbuilder_1=require("./eventbuilder");exports.eventFromException=eventbuilder_1.eventFromException;exports.eventFromMessage=eventbuilder_1.eventFromMessage;var sdk_1=require("./sdk");exports.defaultIntegrations=sdk_1.defaultIntegrations;exports.forceLoad=sdk_1.forceLoad;exports.init=sdk_1.init;exports.lastEventId=sdk_1.lastEventId;exports.onLoad=sdk_1.onLoad;exports.showReportDialog=sdk_1.showReportDialog;exports.flush=sdk_1.flush;exports.close=sdk_1.close;exports.wrap=sdk_1.wrap;var version_1=require("./version");exports.SDK_NAME=version_1.SDK_NAME;exports.SDK_VERSION=version_1.SDK_VERSION},{"./client":3,"./eventbuilder":4,"./helpers":6,"./sdk":15,"./version":21,"@sentry/core":25,"@sentry/types":38}],6:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}exports.shouldIgnoreOnError=shouldIgnoreOnError;function ignoreNextOnError(){ignoreOnError+=1;setTimeout((function(){ignoreOnError-=1}))}exports.ignoreNextOnError=ignoreNextOnError;function wrap(fn,options,before){if(options===void 0){options={}}if(typeof fn!=="function"){return fn}try{if(fn.__sentry__){return fn}if(fn.__sentry_wrapped__){return fn.__sentry_wrapped__}}catch(e){return fn}var sentryWrapped=function(){var args=Array.prototype.slice.call(arguments);try{if(before&&typeof before==="function"){before.apply(this,arguments)}var wrappedArguments=args.map((function(arg){return wrap(arg,options)}));if(fn.handleEvent){return fn.handleEvent.apply(this,wrappedArguments)}return fn.apply(this,wrappedArguments)}catch(ex){ignoreNextOnError();core_1.withScope((function(scope){scope.addEventProcessor((function(event){var processedEvent=tslib_1.__assign({},event);if(options.mechanism){utils_1.addExceptionTypeValue(processedEvent,undefined,undefined);utils_1.addExceptionMechanism(processedEvent,options.mechanism)}processedEvent.extra=tslib_1.__assign(tslib_1.__assign({},processedEvent.extra),{arguments:args});return processedEvent}));core_1.captureException(ex)}));throw ex}};try{for(var property in fn){if(Object.prototype.hasOwnProperty.call(fn,property)){sentryWrapped[property]=fn[property]}}}catch(_oO){}fn.prototype=fn.prototype||{};sentryWrapped.prototype=fn.prototype;Object.defineProperty(fn,"__sentry_wrapped__",{enumerable:false,value:sentryWrapped});Object.defineProperties(sentryWrapped,{__sentry__:{enumerable:false,value:true},__sentry_original__:{enumerable:false,value:fn}});try{var descriptor=Object.getOwnPropertyDescriptor(sentryWrapped,"name");if(descriptor.configurable){Object.defineProperty(sentryWrapped,"name",{get:function(){return fn.name}})}}catch(_oO){}return sentryWrapped}exports.wrap=wrap;function injectReportDialog(options){if(options===void 0){options={}}if(!options.eventId){utils_1.logger.error("Missing eventId option in showReportDialog call");return}if(!options.dsn){utils_1.logger.error("Missing dsn option in showReportDialog call");return}var script=document.createElement("script");script.async=true;script.src=new core_1.API(options.dsn).getReportDialogEndpoint(options);if(options.onLoad){script.onload=options.onLoad}(document.head||document.body).appendChild(script)}exports.injectReportDialog=injectReportDialog},{"@sentry/core":25,"@sentry/utils":48,tslib:173}],7:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");tslib_1.__exportStar(require("./exports"),exports);var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var BrowserIntegrations=require("./integrations");var Transports=require("./transports");exports.Transports=Transports;var windowIntegrations={};var _window=utils_1.getGlobalObject();if(_window.Sentry&&_window.Sentry.Integrations){windowIntegrations=_window.Sentry.Integrations}var INTEGRATIONS=tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},windowIntegrations),core_1.Integrations),BrowserIntegrations);exports.Integrations=INTEGRATIONS},{"./exports":5,"./integrations":10,"./transports":19,"@sentry/core":25,"@sentry/utils":48,tslib:173}],8:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var Breadcrumbs=function(){function Breadcrumbs(options){this.name=Breadcrumbs.id;this._options=tslib_1.__assign({console:true,dom:true,fetch:true,history:true,sentry:true,xhr:true},options)}Breadcrumbs.prototype.addSentryBreadcrumb=function(event){if(!this._options.sentry){return}core_1.getCurrentHub().addBreadcrumb({category:"sentry."+(event.type==="transaction"?"transaction":"event"),event_id:event.event_id,level:event.level,message:utils_1.getEventDescription(event)},{event:event})};Breadcrumbs.prototype.setupOnce=function(){var _this=this;if(this._options.console){utils_1.addInstrumentationHandler({callback:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}_this._consoleBreadcrumb.apply(_this,tslib_1.__spread(args))},type:"console"})}if(this._options.dom){utils_1.addInstrumentationHandler({callback:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}_this._domBreadcrumb.apply(_this,tslib_1.__spread(args))},type:"dom"})}if(this._options.xhr){utils_1.addInstrumentationHandler({callback:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}_this._xhrBreadcrumb.apply(_this,tslib_1.__spread(args))},type:"xhr"})}if(this._options.fetch){utils_1.addInstrumentationHandler({callback:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}_this._fetchBreadcrumb.apply(_this,tslib_1.__spread(args))},type:"fetch"})}if(this._options.history){utils_1.addInstrumentationHandler({callback:function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}_this._historyBreadcrumb.apply(_this,tslib_1.__spread(args))},type:"history"})}};Breadcrumbs.prototype._consoleBreadcrumb=function(handlerData){var breadcrumb={category:"console",data:{arguments:handlerData.args,logger:"console"},level:types_1.Severity.fromString(handlerData.level),message:utils_1.safeJoin(handlerData.args," ")};if(handlerData.level==="assert"){if(handlerData.args[0]===false){breadcrumb.message="Assertion failed: "+(utils_1.safeJoin(handlerData.args.slice(1)," ")||"console.assert");breadcrumb.data.arguments=handlerData.args.slice(1)}else{return}}core_1.getCurrentHub().addBreadcrumb(breadcrumb,{input:handlerData.args,level:handlerData.level})};Breadcrumbs.prototype._domBreadcrumb=function(handlerData){var target;try{target=handlerData.event.target?utils_1.htmlTreeAsString(handlerData.event.target):utils_1.htmlTreeAsString(handlerData.event)}catch(e){target="<unknown>"}if(target.length===0){return}core_1.getCurrentHub().addBreadcrumb({category:"ui."+handlerData.name,message:target},{event:handlerData.event,name:handlerData.name})};Breadcrumbs.prototype._xhrBreadcrumb=function(handlerData){if(handlerData.endTimestamp){if(handlerData.xhr.__sentry_own_request__){return}var _a=handlerData.xhr.__sentry_xhr__||{},method=_a.method,url=_a.url,status_code=_a.status_code,body=_a.body;core_1.getCurrentHub().addBreadcrumb({category:"xhr",data:{method:method,url:url,status_code:status_code},type:"http"},{xhr:handlerData.xhr,input:body});return}};Breadcrumbs.prototype._fetchBreadcrumb=function(handlerData){if(!handlerData.endTimestamp){return}if(handlerData.fetchData.url.match(/sentry_key/)&&handlerData.fetchData.method==="POST"){return}if(handlerData.error){core_1.getCurrentHub().addBreadcrumb({category:"fetch",data:handlerData.fetchData,level:types_1.Severity.Error,type:"http"},{data:handlerData.error,input:handlerData.args})}else{core_1.getCurrentHub().addBreadcrumb({category:"fetch",data:tslib_1.__assign(tslib_1.__assign({},handlerData.fetchData),{status_code:handlerData.response.status}),type:"http"},{input:handlerData.args,response:handlerData.response})}};Breadcrumbs.prototype._historyBreadcrumb=function(handlerData){var global=utils_1.getGlobalObject();var from=handlerData.from;var to=handlerData.to;var parsedLoc=utils_1.parseUrl(global.location.href);var parsedFrom=utils_1.parseUrl(from);var parsedTo=utils_1.parseUrl(to);if(!parsedFrom.path){parsedFrom=parsedLoc}if(parsedLoc.protocol===parsedTo.protocol&&parsedLoc.host===parsedTo.host){to=parsedTo.relative}if(parsedLoc.protocol===parsedFrom.protocol&&parsedLoc.host===parsedFrom.host){from=parsedFrom.relative}core_1.getCurrentHub().addBreadcrumb({category:"navigation",data:{from:from,to:to}})};Breadcrumbs.id="Breadcrumbs";return Breadcrumbs}();exports.Breadcrumbs=Breadcrumbs},{"@sentry/core":25,"@sentry/types":38,"@sentry/utils":48,tslib:173}],9:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var eventbuilder_1=require("../eventbuilder");var helpers_1=require("../helpers");var GlobalHandlers=function(){function GlobalHandlers(options){this.name=GlobalHandlers.id;this._onErrorHandlerInstalled=false;this._onUnhandledRejectionHandlerInstalled=false;this._options=tslib_1.__assign({onerror:true,onunhandledrejection:true},options)}GlobalHandlers.prototype.setupOnce=function(){Error.stackTraceLimit=50;if(this._options.onerror){utils_1.logger.log("Global Handler attached: onerror");this._installGlobalOnErrorHandler()}if(this._options.onunhandledrejection){utils_1.logger.log("Global Handler attached: onunhandledrejection");this._installGlobalOnUnhandledRejectionHandler()}};GlobalHandlers.prototype._installGlobalOnErrorHandler=function(){var _this=this;if(this._onErrorHandlerInstalled){return}utils_1.addInstrumentationHandler({callback:function(data){var error=data.error;var currentHub=core_1.getCurrentHub();var hasIntegration=currentHub.getIntegration(GlobalHandlers);var isFailedOwnDelivery=error&&error.__sentry_own_request__===true;if(!hasIntegration||helpers_1.shouldIgnoreOnError()||isFailedOwnDelivery){return}var client=currentHub.getClient();var event=utils_1.isPrimitive(error)?_this._eventFromIncompleteOnError(data.msg,data.url,data.line,data.column):_this._enhanceEventWithInitialFrame(eventbuilder_1.eventFromUnknownInput(error,undefined,{attachStacktrace:client&&client.getOptions().attachStacktrace,rejection:false}),data.url,data.line,data.column);utils_1.addExceptionMechanism(event,{handled:false,type:"onerror"});currentHub.captureEvent(event,{originalException:error})},type:"error"});this._onErrorHandlerInstalled=true};GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler=function(){var _this=this;if(this._onUnhandledRejectionHandlerInstalled){return}utils_1.addInstrumentationHandler({callback:function(e){var error=e;try{if("reason"in e){error=e.reason}else if("detail"in e&&"reason"in e.detail){error=e.detail.reason}}catch(_oO){}var currentHub=core_1.getCurrentHub();var hasIntegration=currentHub.getIntegration(GlobalHandlers);var isFailedOwnDelivery=error&&error.__sentry_own_request__===true;if(!hasIntegration||helpers_1.shouldIgnoreOnError()||isFailedOwnDelivery){return true}var client=currentHub.getClient();var event=utils_1.isPrimitive(error)?_this._eventFromRejectionWithPrimitive(error):eventbuilder_1.eventFromUnknownInput(error,undefined,{attachStacktrace:client&&client.getOptions().attachStacktrace,rejection:true});event.level=types_1.Severity.Error;utils_1.addExceptionMechanism(event,{handled:false,type:"onunhandledrejection"});currentHub.captureEvent(event,{originalException:error});return},type:"unhandledrejection"});this._onUnhandledRejectionHandlerInstalled=true};GlobalHandlers.prototype._eventFromIncompleteOnError=function(msg,url,line,column){var ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;var message=utils_1.isErrorEvent(msg)?msg.message:msg;var name;if(utils_1.isString(message)){var groups=message.match(ERROR_TYPES_RE);if(groups){name=groups[1];message=groups[2]}}var event={exception:{values:[{type:name||"Error",value:message}]}};return this._enhanceEventWithInitialFrame(event,url,line,column)};GlobalHandlers.prototype._eventFromRejectionWithPrimitive=function(reason){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(reason)}]}}};GlobalHandlers.prototype._enhanceEventWithInitialFrame=function(event,url,line,column){event.exception=event.exception||{};event.exception.values=event.exception.values||[];event.exception.values[0]=event.exception.values[0]||{};event.exception.values[0].stacktrace=event.exception.values[0].stacktrace||{};event.exception.values[0].stacktrace.frames=event.exception.values[0].stacktrace.frames||[];var colno=isNaN(parseInt(column,10))?undefined:column;var lineno=isNaN(parseInt(line,10))?undefined:line;var filename=utils_1.isString(url)&&url.length>0?url:utils_1.getLocationHref();if(event.exception.values[0].stacktrace.frames.length===0){event.exception.values[0].stacktrace.frames.push({colno:colno,filename:filename,function:"?",in_app:true,lineno:lineno})}return event};GlobalHandlers.id="GlobalHandlers";return GlobalHandlers}();exports.GlobalHandlers=GlobalHandlers},{"../eventbuilder":4,"../helpers":6,"@sentry/core":25,"@sentry/types":38,"@sentry/utils":48,tslib:173}],10:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var globalhandlers_1=require("./globalhandlers");exports.GlobalHandlers=globalhandlers_1.GlobalHandlers;var trycatch_1=require("./trycatch");exports.TryCatch=trycatch_1.TryCatch;var breadcrumbs_1=require("./breadcrumbs");exports.Breadcrumbs=breadcrumbs_1.Breadcrumbs;var linkederrors_1=require("./linkederrors");exports.LinkedErrors=linkederrors_1.LinkedErrors;var useragent_1=require("./useragent");exports.UserAgent=useragent_1.UserAgent},{"./breadcrumbs":8,"./globalhandlers":9,"./linkederrors":11,"./trycatch":12,"./useragent":13}],11:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var parsers_1=require("../parsers");var tracekit_1=require("../tracekit");var DEFAULT_KEY="cause";var DEFAULT_LIMIT=5;var LinkedErrors=function(){function LinkedErrors(options){if(options===void 0){options={}}this.name=LinkedErrors.id;this._key=options.key||DEFAULT_KEY;this._limit=options.limit||DEFAULT_LIMIT}LinkedErrors.prototype.setupOnce=function(){core_1.addGlobalEventProcessor((function(event,hint){var self=core_1.getCurrentHub().getIntegration(LinkedErrors);if(self){return self._handler(event,hint)}return event}))};LinkedErrors.prototype._handler=function(event,hint){if(!event.exception||!event.exception.values||!hint||!utils_1.isInstanceOf(hint.originalException,Error)){return event}var linkedErrors=this._walkErrorTree(hint.originalException,this._key);event.exception.values=tslib_1.__spread(linkedErrors,event.exception.values);return event};LinkedErrors.prototype._walkErrorTree=function(error,key,stack){if(stack===void 0){stack=[]}if(!utils_1.isInstanceOf(error[key],Error)||stack.length+1>=this._limit){return stack}var stacktrace=tracekit_1.computeStackTrace(error[key]);var exception=parsers_1.exceptionFromStacktrace(stacktrace);return this._walkErrorTree(error[key],key,tslib_1.__spread([exception],stack))};LinkedErrors.id="LinkedErrors";return LinkedErrors}();exports.LinkedErrors=LinkedErrors},{"../parsers":14,"../tracekit":16,"@sentry/core":25,"@sentry/utils":48,tslib:173}],12:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var utils_1=require("@sentry/utils");var helpers_1=require("../helpers");var DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];var TryCatch=function(){function TryCatch(options){this.name=TryCatch.id;this._options=tslib_1.__assign({XMLHttpRequest:true,eventTarget:true,requestAnimationFrame:true,setInterval:true,setTimeout:true},options)}TryCatch.prototype.setupOnce=function(){var global=utils_1.getGlobalObject();if(this._options.setTimeout){utils_1.fill(global,"setTimeout",this._wrapTimeFunction.bind(this))}if(this._options.setInterval){utils_1.fill(global,"setInterval",this._wrapTimeFunction.bind(this))}if(this._options.requestAnimationFrame){utils_1.fill(global,"requestAnimationFrame",this._wrapRAF.bind(this))}if(this._options.XMLHttpRequest&&"XMLHttpRequest"in global){utils_1.fill(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this))}if(this._options.eventTarget){var eventTarget=Array.isArray(this._options.eventTarget)?this._options.eventTarget:DEFAULT_EVENT_TARGET;eventTarget.forEach(this._wrapEventTarget.bind(this))}};TryCatch.prototype._wrapTimeFunction=function(original){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var originalCallback=args[0];args[0]=helpers_1.wrap(originalCallback,{mechanism:{data:{function:utils_1.getFunctionName(original)},handled:true,type:"instrument"}});return original.apply(this,args)}};TryCatch.prototype._wrapRAF=function(original){return function(callback){return original.call(this,helpers_1.wrap(callback,{mechanism:{data:{function:"requestAnimationFrame",handler:utils_1.getFunctionName(original)},handled:true,type:"instrument"}}))}};TryCatch.prototype._wrapEventTarget=function(target){var global=utils_1.getGlobalObject();var proto=global[target]&&global[target].prototype;if(!proto||!proto.hasOwnProperty||!proto.hasOwnProperty("addEventListener")){return}utils_1.fill(proto,"addEventListener",(function(original){return function(eventName,fn,options){try{if(typeof fn.handleEvent==="function"){fn.handleEvent=helpers_1.wrap(fn.handleEvent.bind(fn),{mechanism:{data:{function:"handleEvent",handler:utils_1.getFunctionName(fn),target:target},handled:true,type:"instrument"}})}}catch(err){}return original.call(this,eventName,helpers_1.wrap(fn,{mechanism:{data:{function:"addEventListener",handler:utils_1.getFunctionName(fn),target:target},handled:true,type:"instrument"}}),options)}}));utils_1.fill(proto,"removeEventListener",(function(originalRemoveEventListener){return function(eventName,fn,options){var _a;var wrappedEventHandler=fn;try{var originalEventHandler=(_a=wrappedEventHandler)===null||_a===void 0?void 0:_a.__sentry_wrapped__;if(originalEventHandler){originalRemoveEventListener.call(this,eventName,originalEventHandler,options)}}catch(e){}return originalRemoveEventListener.call(this,eventName,wrappedEventHandler,options)}}))};TryCatch.prototype._wrapXHR=function(originalSend){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var xhr=this;var xmlHttpRequestProps=["onload","onerror","onprogress","onreadystatechange"];xmlHttpRequestProps.forEach((function(prop){if(prop in xhr&&typeof xhr[prop]==="function"){utils_1.fill(xhr,prop,(function(original){var wrapOptions={mechanism:{data:{function:prop,handler:utils_1.getFunctionName(original)},handled:true,type:"instrument"}};if(original.__sentry_original__){wrapOptions.mechanism.data.handler=utils_1.getFunctionName(original.__sentry_original__)}return helpers_1.wrap(original,wrapOptions)}))}}));return originalSend.apply(this,args)}};TryCatch.id="TryCatch";return TryCatch}();exports.TryCatch=TryCatch},{"../helpers":6,"@sentry/utils":48,tslib:173}],13:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var global=utils_1.getGlobalObject();var UserAgent=function(){function UserAgent(){this.name=UserAgent.id}UserAgent.prototype.setupOnce=function(){core_1.addGlobalEventProcessor((function(event){var _a,_b,_c;if(core_1.getCurrentHub().getIntegration(UserAgent)){if(!global.navigator&&!global.location&&!global.document){return event}var url=((_a=event.request)===null||_a===void 0?void 0:_a.url)||((_b=global.location)===null||_b===void 0?void 0:_b.href);var referrer=(global.document||{}).referrer;var userAgent=(global.navigator||{}).userAgent;var headers=tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},(_c=event.request)===null||_c===void 0?void 0:_c.headers),referrer&&{Referer:referrer}),userAgent&&{"User-Agent":userAgent});var request=tslib_1.__assign(tslib_1.__assign({},url&&{url:url}),{headers:headers});return tslib_1.__assign(tslib_1.__assign({},event),{request:request})}return event}))};UserAgent.id="UserAgent";return UserAgent}();exports.UserAgent=UserAgent},{"@sentry/core":25,"@sentry/utils":48,tslib:173}],14:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var utils_1=require("@sentry/utils");var tracekit_1=require("./tracekit");var STACKTRACE_LIMIT=50;function exceptionFromStacktrace(stacktrace){var frames=prepareFramesForEvent(stacktrace.stack);var exception={type:stacktrace.name,value:stacktrace.message};if(frames&&frames.length){exception.stacktrace={frames:frames}}if(exception.type===undefined&&exception.value===""){exception.value="Unrecoverable error caught"}return exception}exports.exceptionFromStacktrace=exceptionFromStacktrace;function eventFromPlainObject(exception,syntheticException,rejection){var event={exception:{values:[{type:utils_1.isEvent(exception)?exception.constructor.name:rejection?"UnhandledRejection":"Error",value:"Non-Error "+(rejection?"promise rejection":"exception")+" captured with keys: "+utils_1.extractExceptionKeysForMessage(exception)}]},extra:{__serialized__:utils_1.normalizeToSize(exception)}};if(syntheticException){var stacktrace=tracekit_1.computeStackTrace(syntheticException);var frames_1=prepareFramesForEvent(stacktrace.stack);event.stacktrace={frames:frames_1}}return event}exports.eventFromPlainObject=eventFromPlainObject;function eventFromStacktrace(stacktrace){var exception=exceptionFromStacktrace(stacktrace);return{exception:{values:[exception]}}}exports.eventFromStacktrace=eventFromStacktrace;function prepareFramesForEvent(stack){if(!stack||!stack.length){return[]}var localStack=stack;var firstFrameFunction=localStack[0].func||"";var lastFrameFunction=localStack[localStack.length-1].func||"";if(firstFrameFunction.indexOf("captureMessage")!==-1||firstFrameFunction.indexOf("captureException")!==-1){localStack=localStack.slice(1)}if(lastFrameFunction.indexOf("sentryWrapped")!==-1){localStack=localStack.slice(0,-1)}return localStack.slice(0,STACKTRACE_LIMIT).map((function(frame){return{colno:frame.column===null?undefined:frame.column,filename:frame.url||localStack[0].url,function:frame.func||"?",in_app:true,lineno:frame.line===null?undefined:frame.line}})).reverse()}exports.prepareFramesForEvent=prepareFramesForEvent},{"./tracekit":16,"@sentry/utils":48}],15:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var client_1=require("./client");var helpers_1=require("./helpers");var integrations_1=require("./integrations");exports.defaultIntegrations=[new core_1.Integrations.InboundFilters,new core_1.Integrations.FunctionToString,new integrations_1.TryCatch,new integrations_1.Breadcrumbs,new integrations_1.GlobalHandlers,new integrations_1.LinkedErrors,new integrations_1.UserAgent];function init(options){if(options===void 0){options={}}if(options.defaultIntegrations===undefined){options.defaultIntegrations=exports.defaultIntegrations}if(options.release===undefined){var window_1=utils_1.getGlobalObject();if(window_1.SENTRY_RELEASE&&window_1.SENTRY_RELEASE.id){options.release=window_1.SENTRY_RELEASE.id}}if(options.autoSessionTracking===undefined){options.autoSessionTracking=false}core_1.initAndBind(client_1.BrowserClient,options);if(options.autoSessionTracking){startSessionTracking()}}exports.init=init;function showReportDialog(options){if(options===void 0){options={}}if(!options.eventId){options.eventId=core_1.getCurrentHub().lastEventId()}var client=core_1.getCurrentHub().getClient();if(client){client.showReportDialog(options)}}exports.showReportDialog=showReportDialog;function lastEventId(){return core_1.getCurrentHub().lastEventId()}exports.lastEventId=lastEventId;function forceLoad(){}exports.forceLoad=forceLoad;function onLoad(callback){callback()}exports.onLoad=onLoad;function flush(timeout){var client=core_1.getCurrentHub().getClient();if(client){return client.flush(timeout)}return utils_1.SyncPromise.reject(false)}exports.flush=flush;function close(timeout){var client=core_1.getCurrentHub().getClient();if(client){return client.close(timeout)}return utils_1.SyncPromise.reject(false)}exports.close=close;function wrap(fn){return helpers_1.wrap(fn)()}exports.wrap=wrap;function startSessionTracking(){var window=utils_1.getGlobalObject();var hub=core_1.getCurrentHub();var loadResolved=document.readyState==="complete";var fcpResolved=false;var possiblyEndSession=function(){if(fcpResolved&&loadResolved){hub.endSession()}};var resolveWindowLoaded=function(){loadResolved=true;possiblyEndSession();window.removeEventListener("load",resolveWindowLoaded)};hub.startSession();if(!loadResolved){window.addEventListener("load",resolveWindowLoaded)}try{var po=new PerformanceObserver((function(entryList,po){entryList.getEntries().forEach((function(entry){if(entry.name==="first-contentful-paint"&&entry.startTime<firstHiddenTime_1){po.disconnect();fcpResolved=true;possiblyEndSession()}}))}));var firstHiddenTime_1=document.visibilityState==="hidden"?0:Infinity;document.addEventListener("visibilitychange",(function(event){firstHiddenTime_1=Math.min(firstHiddenTime_1,event.timeStamp)}),{once:true});po.observe({type:"paint",buffered:true})}catch(e){fcpResolved=true;possiblyEndSession()}}},{"./client":3,"./helpers":6,"./integrations":10,"@sentry/core":25,"@sentry/utils":48}],16:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var UNKNOWN_FUNCTION="?";var chrome=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;var gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i;var winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;var chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/;var reactMinifiedRegexp=/Minified React error #\d+;/i;function computeStackTrace(ex){var stack=null;var popSize=0;if(ex){if(typeof ex.framesToPop==="number"){popSize=ex.framesToPop}else if(reactMinifiedRegexp.test(ex.message)){popSize=1}}try{stack=computeStackTraceFromStacktraceProp(ex);if(stack){return popFrames(stack,popSize)}}catch(e){}try{stack=computeStackTraceFromStackProp(ex);if(stack){return popFrames(stack,popSize)}}catch(e){}return{message:extractMessage(ex),name:ex&&ex.name,stack:[],failed:true}}exports.computeStackTrace=computeStackTrace;function computeStackTraceFromStackProp(ex){if(!ex||!ex.stack){return null}var stack=[];var lines=ex.stack.split("\n");var isEval;var submatch;var parts;var element;for(var i=0;i<lines.length;++i){if(parts=chrome.exec(lines[i])){var isNative=parts[2]&&parts[2].indexOf("native")===0;isEval=parts[2]&&parts[2].indexOf("eval")===0;if(isEval&&(submatch=chromeEval.exec(parts[2]))){parts[2]=submatch[1];parts[3]=submatch[2];parts[4]=submatch[3]}element={url:parts[2]&&parts[2].indexOf("address at ")===0?parts[2].substr("address at ".length):parts[2],func:parts[1]||UNKNOWN_FUNCTION,args:isNative?[parts[2]]:[],line:parts[3]?+parts[3]:null,column:parts[4]?+parts[4]:null}}else if(parts=winjs.exec(lines[i])){element={url:parts[2],func:parts[1]||UNKNOWN_FUNCTION,args:[],line:+parts[3],column:parts[4]?+parts[4]:null}}else if(parts=gecko.exec(lines[i])){isEval=parts[3]&&parts[3].indexOf(" > eval")>-1;if(isEval&&(submatch=geckoEval.exec(parts[3]))){parts[1]=parts[1]||"eval";parts[3]=submatch[1];parts[4]=submatch[2];parts[5]=""}else if(i===0&&!parts[5]&&ex.columnNumber!==void 0){stack[0].column=ex.columnNumber+1}element={url:parts[3],func:parts[1]||UNKNOWN_FUNCTION,args:parts[2]?parts[2].split(","):[],line:parts[4]?+parts[4]:null,column:parts[5]?+parts[5]:null}}else{continue}if(!element.func&&element.line){element.func=UNKNOWN_FUNCTION}stack.push(element)}if(!stack.length){return null}return{message:extractMessage(ex),name:ex.name,stack:stack}}function computeStackTraceFromStacktraceProp(ex){if(!ex||!ex.stacktrace){return null}var stacktrace=ex.stacktrace;var opera10Regex=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i;var opera11Regex=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i;var lines=stacktrace.split("\n");var stack=[];var parts;for(var line=0;line<lines.length;line+=2){var element=null;if(parts=opera10Regex.exec(lines[line])){element={url:parts[2],func:parts[3],args:[],line:+parts[1],column:null}}else if(parts=opera11Regex.exec(lines[line])){element={url:parts[6],func:parts[3]||parts[4],args:parts[5]?parts[5].split(","):[],line:+parts[1],column:+parts[2]}}if(element){if(!element.func&&element.line){element.func=UNKNOWN_FUNCTION}stack.push(element)}}if(!stack.length){return null}return{message:extractMessage(ex),name:ex.name,stack:stack}}function popFrames(stacktrace,popSize){try{return tslib_1.__assign(tslib_1.__assign({},stacktrace),{stack:stacktrace.stack.slice(popSize)})}catch(e){return stacktrace}}function extractMessage(ex){var message=ex&&ex.message;if(!message){return"No error message"}if(message.error&&typeof message.error.message==="string"){return message.error.message}return message}},{tslib:173}],17:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var BaseTransport=function(){function BaseTransport(options){this.options=options;this._buffer=new utils_1.PromiseBuffer(30);this._rateLimits={};this._api=new core_1.API(this.options.dsn);this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}BaseTransport.prototype.sendEvent=function(_){throw new utils_1.SentryError("Transport Class has to implement `sendEvent` method")};BaseTransport.prototype.close=function(timeout){return this._buffer.drain(timeout)};BaseTransport.prototype._handleResponse=function(_a){var requestType=_a.requestType,response=_a.response,headers=_a.headers,resolve=_a.resolve,reject=_a.reject;var status=types_1.Status.fromHttpCode(response.status);var limited=this._handleRateLimit(headers);if(limited)utils_1.logger.warn("Too many requests, backing off until: "+this._disabledUntil(requestType));if(status===types_1.Status.Success){resolve({status:status});return}reject(response)};BaseTransport.prototype._disabledUntil=function(category){return this._rateLimits[category]||this._rateLimits.all};BaseTransport.prototype._isRateLimited=function(category){return this._disabledUntil(category)>new Date(Date.now())};BaseTransport.prototype._handleRateLimit=function(headers){var e_1,_a,e_2,_b;var now=Date.now();var rlHeader=headers["x-sentry-rate-limits"];var raHeader=headers["retry-after"];if(rlHeader){try{for(var _c=tslib_1.__values(rlHeader.trim().split(",")),_d=_c.next();!_d.done;_d=_c.next()){var limit=_d.value;var parameters=limit.split(":",2);var headerDelay=parseInt(parameters[0],10);var delay=(!isNaN(headerDelay)?headerDelay:60)*1e3;try{for(var _e=(e_2=void 0,tslib_1.__values(parameters[1].split(";"))),_f=_e.next();!_f.done;_f=_e.next()){var category=_f.value;this._rateLimits[category||"all"]=new Date(now+delay)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_f&&!_f.done&&(_b=_e.return))_b.call(_e)}finally{if(e_2)throw e_2.error}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_d&&!_d.done&&(_a=_c.return))_a.call(_c)}finally{if(e_1)throw e_1.error}}return true}else if(raHeader){this._rateLimits.all=new Date(now+utils_1.parseRetryAfterHeader(now,raHeader));return true}return false};return BaseTransport}();exports.BaseTransport=BaseTransport},{"@sentry/core":25,"@sentry/types":38,"@sentry/utils":48,tslib:173}],18:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var base_1=require("./base");var global=utils_1.getGlobalObject();var FetchTransport=function(_super){tslib_1.__extends(FetchTransport,_super);function FetchTransport(){return _super!==null&&_super.apply(this,arguments)||this}FetchTransport.prototype.sendEvent=function(event){return this._sendRequest(core_1.eventToSentryRequest(event,this._api),event)};FetchTransport.prototype.sendSession=function(session){return this._sendRequest(core_1.sessionToSentryRequest(session,this._api),session)};FetchTransport.prototype._sendRequest=function(sentryRequest,originalPayload){var _this=this;if(this._isRateLimited(sentryRequest.type)){return Promise.reject({event:originalPayload,type:sentryRequest.type,reason:"Transport locked till "+this._disabledUntil(sentryRequest.type)+" due to too many requests.",status:429})}var options={body:sentryRequest.body,method:"POST",referrerPolicy:utils_1.supportsReferrerPolicy()?"origin":""};if(this.options.fetchParameters!==undefined){Object.assign(options,this.options.fetchParameters)}if(this.options.headers!==undefined){options.headers=this.options.headers}return this._buffer.add(new utils_1.SyncPromise((function(resolve,reject){global.fetch(sentryRequest.url,options).then((function(response){var headers={"x-sentry-rate-limits":response.headers.get("X-Sentry-Rate-Limits"),"retry-after":response.headers.get("Retry-After")};_this._handleResponse({requestType:sentryRequest.type,response:response,headers:headers,resolve:resolve,reject:reject})})).catch(reject)})))};return FetchTransport}(base_1.BaseTransport);exports.FetchTransport=FetchTransport},{"./base":17,"@sentry/core":25,"@sentry/utils":48,tslib:173}],19:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var base_1=require("./base");exports.BaseTransport=base_1.BaseTransport;var fetch_1=require("./fetch");exports.FetchTransport=fetch_1.FetchTransport;var xhr_1=require("./xhr");exports.XHRTransport=xhr_1.XHRTransport},{"./base":17,"./fetch":18,"./xhr":20}],20:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var core_1=require("@sentry/core");var utils_1=require("@sentry/utils");var base_1=require("./base");var XHRTransport=function(_super){tslib_1.__extends(XHRTransport,_super);function XHRTransport(){return _super!==null&&_super.apply(this,arguments)||this}XHRTransport.prototype.sendEvent=function(event){return this._sendRequest(core_1.eventToSentryRequest(event,this._api),event)};XHRTransport.prototype.sendSession=function(session){return this._sendRequest(core_1.sessionToSentryRequest(session,this._api),session)};XHRTransport.prototype._sendRequest=function(sentryRequest,originalPayload){var _this=this;if(this._isRateLimited(sentryRequest.type)){return Promise.reject({event:originalPayload,type:sentryRequest.type,reason:"Transport locked till "+this._disabledUntil(sentryRequest.type)+" due to too many requests.",status:429})}return this._buffer.add(new utils_1.SyncPromise((function(resolve,reject){var request=new XMLHttpRequest;request.onreadystatechange=function(){if(request.readyState===4){var headers={"x-sentry-rate-limits":request.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":request.getResponseHeader("Retry-After")};_this._handleResponse({requestType:sentryRequest.type,response:request,headers:headers,resolve:resolve,reject:reject})}};request.open("POST",sentryRequest.url);for(var header in _this.options.headers){if(_this.options.headers.hasOwnProperty(header)){request.setRequestHeader(header,_this.options.headers[header])}}request.send(sentryRequest.body)})))};return XHRTransport}(base_1.BaseTransport);exports.XHRTransport=XHRTransport},{"./base":17,"@sentry/core":25,"@sentry/utils":48,tslib:173}],21:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.SDK_NAME="sentry.javascript.browser";exports.SDK_VERSION="5.29.2"},{}],22:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var utils_1=require("@sentry/utils");var SENTRY_API_VERSION="7";var API=function(){function API(dsn){this.dsn=dsn;this._dsnObject=new utils_1.Dsn(dsn)}API.prototype.getDsn=function(){return this._dsnObject};API.prototype.getBaseApiEndpoint=function(){var dsn=this._dsnObject;var protocol=dsn.protocol?dsn.protocol+":":"";var port=dsn.port?":"+dsn.port:"";return protocol+"//"+dsn.host+port+(dsn.path?"/"+dsn.path:"")+"/api/"};API.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")};API.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()};API.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()};API.prototype.getStoreEndpointPath=function(){var dsn=this._dsnObject;return(dsn.path?"/"+dsn.path:"")+"/api/"+dsn.projectId+"/store/"};API.prototype.getRequestHeaders=function(clientName,clientVersion){var dsn=this._dsnObject;var header=["Sentry sentry_version="+SENTRY_API_VERSION];header.push("sentry_client="+clientName+"/"+clientVersion);header.push("sentry_key="+dsn.user);if(dsn.pass){header.push("sentry_secret="+dsn.pass)}return{"Content-Type":"application/json","X-Sentry-Auth":header.join(", ")}};API.prototype.getReportDialogEndpoint=function(dialogOptions){if(dialogOptions===void 0){dialogOptions={}}var dsn=this._dsnObject;var endpoint=this.getBaseApiEndpoint()+"embed/error-page/";var encodedOptions=[];encodedOptions.push("dsn="+dsn.toString());for(var key in dialogOptions){if(key==="dsn"){continue}if(key==="user"){if(!dialogOptions.user){continue}if(dialogOptions.user.name){encodedOptions.push("name="+encodeURIComponent(dialogOptions.user.name))}if(dialogOptions.user.email){encodedOptions.push("email="+encodeURIComponent(dialogOptions.user.email))}}else{encodedOptions.push(encodeURIComponent(key)+"="+encodeURIComponent(dialogOptions[key]))}}if(encodedOptions.length){return endpoint+"?"+encodedOptions.join("&")}return endpoint};API.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")};API.prototype._getIngestEndpoint=function(target){var base=this.getBaseApiEndpoint();var dsn=this._dsnObject;return""+base+dsn.projectId+"/"+target+"/"};API.prototype._encodedAuth=function(){var dsn=this._dsnObject;var auth={sentry_key:dsn.user,sentry_version:SENTRY_API_VERSION};return utils_1.urlEncode(auth)};return API}();exports.API=API},{"@sentry/utils":48}],23:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var utils_1=require("@sentry/utils");var noop_1=require("./transports/noop");var BaseBackend=function(){function BaseBackend(options){this._options=options;if(!this._options.dsn){utils_1.logger.warn("No DSN provided, backend will not do anything.")}this._transport=this._setupTransport()}BaseBackend.prototype.eventFromException=function(_exception,_hint){throw new utils_1.SentryError("Backend has to implement `eventFromException` method")};BaseBackend.prototype.eventFromMessage=function(_message,_level,_hint){throw new utils_1.SentryError("Backend has to implement `eventFromMessage` method")};BaseBackend.prototype.sendEvent=function(event){this._transport.sendEvent(event).then(null,(function(reason){utils_1.logger.error("Error while sending event: "+reason)}))};BaseBackend.prototype.sendSession=function(session){if(!this._transport.sendSession){utils_1.logger.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(session).then(null,(function(reason){utils_1.logger.error("Error while sending session: "+reason)}))};BaseBackend.prototype.getTransport=function(){return this._transport};BaseBackend.prototype._setupTransport=function(){return new noop_1.NoopTransport};return BaseBackend}();exports.BaseBackend=BaseBackend},{"./transports/noop":32,"@sentry/utils":48}],24:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var hub_1=require("@sentry/hub");var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var integration_1=require("./integration");var BaseClient=function(){function BaseClient(backendClass,options){this._integrations={};this._processing=0;this._backend=new backendClass(options);this._options=options;if(options.dsn){this._dsn=new utils_1.Dsn(options.dsn)}}BaseClient.prototype.captureException=function(exception,hint,scope){var _this=this;var eventId=hint&&hint.event_id;this._process(this._getBackend().eventFromException(exception,hint).then((function(event){return _this._captureEvent(event,hint,scope)})).then((function(result){eventId=result})));return eventId};BaseClient.prototype.captureMessage=function(message,level,hint,scope){var _this=this;var eventId=hint&&hint.event_id;var promisedEvent=utils_1.isPrimitive(message)?this._getBackend().eventFromMessage(String(message),level,hint):this._getBackend().eventFromException(message,hint);this._process(promisedEvent.then((function(event){return _this._captureEvent(event,hint,scope)})).then((function(result){eventId=result})));return eventId};BaseClient.prototype.captureEvent=function(event,hint,scope){var eventId=hint&&hint.event_id;this._process(this._captureEvent(event,hint,scope).then((function(result){eventId=result})));return eventId};BaseClient.prototype.captureSession=function(session){if(!session.release){utils_1.logger.warn("Discarded session because of missing release")}else{this._sendSession(session)}};BaseClient.prototype.getDsn=function(){return this._dsn};BaseClient.prototype.getOptions=function(){return this._options};BaseClient.prototype.flush=function(timeout){var _this=this;return this._isClientProcessing(timeout).then((function(ready){return _this._getBackend().getTransport().close(timeout).then((function(transportFlushed){return ready&&transportFlushed}))}))};BaseClient.prototype.close=function(timeout){var _this=this;return this.flush(timeout).then((function(result){_this.getOptions().enabled=false;return result}))};BaseClient.prototype.setupIntegrations=function(){if(this._isEnabled()){this._integrations=integration_1.setupIntegrations(this._options)}};BaseClient.prototype.getIntegration=function(integration){try{return this._integrations[integration.id]||null}catch(_oO){utils_1.logger.warn("Cannot retrieve integration "+integration.id+" from the current Client");return null}};BaseClient.prototype._updateSessionFromEvent=function(session,event){var e_1,_a;var crashed=false;var errored=false;var userAgent;var exceptions=event.exception&&event.exception.values;if(exceptions){errored=true;try{for(var exceptions_1=tslib_1.__values(exceptions),exceptions_1_1=exceptions_1.next();!exceptions_1_1.done;exceptions_1_1=exceptions_1.next()){var ex=exceptions_1_1.value;var mechanism=ex.mechanism;if(mechanism&&mechanism.handled===false){crashed=true;break}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(exceptions_1_1&&!exceptions_1_1.done&&(_a=exceptions_1.return))_a.call(exceptions_1)}finally{if(e_1)throw e_1.error}}}var user=event.user;if(!session.userAgent){var headers=event.request?event.request.headers:{};for(var key in headers){if(key.toLowerCase()==="user-agent"){userAgent=headers[key];break}}}session.update(tslib_1.__assign(tslib_1.__assign({},crashed&&{status:types_1.SessionStatus.Crashed}),{user:user,userAgent:userAgent,errors:session.errors+Number(errored||crashed)}))};BaseClient.prototype._sendSession=function(session){this._getBackend().sendSession(session)};BaseClient.prototype._isClientProcessing=function(timeout){var _this=this;return new utils_1.SyncPromise((function(resolve){var ticked=0;var tick=1;var interval=setInterval((function(){if(_this._processing==0){clearInterval(interval);resolve(true)}else{ticked+=tick;if(timeout&&ticked>=timeout){clearInterval(interval);resolve(false)}}}),tick)}))};BaseClient.prototype._getBackend=function(){return this._backend};BaseClient.prototype._isEnabled=function(){return this.getOptions().enabled!==false&&this._dsn!==undefined};BaseClient.prototype._prepareEvent=function(event,scope,hint){var _this=this;var _a=this.getOptions().normalizeDepth,normalizeDepth=_a===void 0?3:_a;var prepared=tslib_1.__assign(tslib_1.__assign({},event),{event_id:event.event_id||(hint&&hint.event_id?hint.event_id:utils_1.uuid4()),timestamp:event.timestamp||utils_1.dateTimestampInSeconds()});this._applyClientOptions(prepared);this._applyIntegrationsMetadata(prepared);var finalScope=scope;if(hint&&hint.captureContext){finalScope=hub_1.Scope.clone(finalScope).update(hint.captureContext)}var result=utils_1.SyncPromise.resolve(prepared);if(finalScope){result=finalScope.applyToEvent(prepared,hint)}return result.then((function(evt){if(typeof normalizeDepth==="number"&&normalizeDepth>0){return _this._normalizeEvent(evt,normalizeDepth)}return evt}))};BaseClient.prototype._normalizeEvent=function(event,depth){if(!event){return null}var normalized=tslib_1.__assign(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign(tslib_1.__assign({},event),event.breadcrumbs&&{breadcrumbs:event.breadcrumbs.map((function(b){return tslib_1.__assign(tslib_1.__assign({},b),b.data&&{data:utils_1.normalize(b.data,depth)})}))}),event.user&&{user:utils_1.normalize(event.user,depth)}),event.contexts&&{contexts:utils_1.normalize(event.contexts,depth)}),event.extra&&{extra:utils_1.normalize(event.extra,depth)});if(event.contexts&&event.contexts.trace){normalized.contexts.trace=event.contexts.trace}return normalized};BaseClient.prototype._applyClientOptions=function(event){var options=this.getOptions();var environment=options.environment,release=options.release,dist=options.dist,_a=options.maxValueLength,maxValueLength=_a===void 0?250:_a;if(!("environment"in event)){event.environment="environment"in options?environment:"production"}if(event.release===undefined&&release!==undefined){event.release=release}if(event.dist===undefined&&dist!==undefined){event.dist=dist}if(event.message){event.message=utils_1.truncate(event.message,maxValueLength)}var exception=event.exception&&event.exception.values&&event.exception.values[0];if(exception&&exception.value){exception.value=utils_1.truncate(exception.value,maxValueLength)}var request=event.request;if(request&&request.url){request.url=utils_1.truncate(request.url,maxValueLength)}};BaseClient.prototype._applyIntegrationsMetadata=function(event){var sdkInfo=event.sdk;var integrationsArray=Object.keys(this._integrations);if(sdkInfo&&integrationsArray.length>0){sdkInfo.integrations=integrationsArray}};BaseClient.prototype._sendEvent=function(event){this._getBackend().sendEvent(event)};BaseClient.prototype._captureEvent=function(event,hint,scope){return this._processEvent(event,hint,scope).then((function(finalEvent){return finalEvent.event_id}),(function(reason){utils_1.logger.error(reason);return undefined}))};BaseClient.prototype._processEvent=function(event,hint,scope){var _this=this;var _a=this.getOptions(),beforeSend=_a.beforeSend,sampleRate=_a.sampleRate;if(!this._isEnabled()){return utils_1.SyncPromise.reject(new utils_1.SentryError("SDK not enabled, will not send event."))}var isTransaction=event.type==="transaction";if(!isTransaction&&typeof sampleRate==="number"&&Math.random()>sampleRate){return utils_1.SyncPromise.reject(new utils_1.SentryError("This event has been sampled, will not send event."))}return this._prepareEvent(event,scope,hint).then((function(prepared){if(prepared===null){throw new utils_1.SentryError("An event processor returned null, will not send event.")}var isInternalException=hint&&hint.data&&hint.data.__sentry__===true;if(isInternalException||isTransaction||!beforeSend){return prepared}var beforeSendResult=beforeSend(prepared,hint);if(typeof beforeSendResult==="undefined"){throw new utils_1.SentryError("`beforeSend` method has to return `null` or a valid event.")}else if(utils_1.isThenable(beforeSendResult)){return beforeSendResult.then((function(event){return event}),(function(e){throw new utils_1.SentryError("beforeSend rejected with "+e)}))}return beforeSendResult})).then((function(processedEvent){if(processedEvent===null){throw new utils_1.SentryError("`beforeSend` returned `null`, will not send event.")}var session=scope&&scope.getSession&&scope.getSession();if(!isTransaction&&session){_this._updateSessionFromEvent(session,processedEvent)}_this._sendEvent(processedEvent);return processedEvent})).then(null,(function(reason){if(reason instanceof utils_1.SentryError){throw reason}_this.captureException(reason,{data:{__sentry__:true},originalException:reason});throw new utils_1.SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+reason)}))};BaseClient.prototype._process=function(promise){var _this=this;this._processing+=1;promise.then((function(value){_this._processing-=1;return value}),(function(reason){_this._processing-=1;return reason}))};return BaseClient}();exports.BaseClient=BaseClient},{"./integration":26,"@sentry/hub":34,"@sentry/types":38,"@sentry/utils":48,tslib:173}],25:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var minimal_1=require("@sentry/minimal");exports.addBreadcrumb=minimal_1.addBreadcrumb;exports.captureException=minimal_1.captureException;exports.captureEvent=minimal_1.captureEvent;exports.captureMessage=minimal_1.captureMessage;exports.configureScope=minimal_1.configureScope;exports.startTransaction=minimal_1.startTransaction;exports.setContext=minimal_1.setContext;exports.setExtra=minimal_1.setExtra;exports.setExtras=minimal_1.setExtras;exports.setTag=minimal_1.setTag;exports.setTags=minimal_1.setTags;exports.setUser=minimal_1.setUser;exports.withScope=minimal_1.withScope;var hub_1=require("@sentry/hub");exports.addGlobalEventProcessor=hub_1.addGlobalEventProcessor;exports.getCurrentHub=hub_1.getCurrentHub;exports.getHubFromCarrier=hub_1.getHubFromCarrier;exports.Hub=hub_1.Hub;exports.makeMain=hub_1.makeMain;exports.Scope=hub_1.Scope;var api_1=require("./api");exports.API=api_1.API;var baseclient_1=require("./baseclient");exports.BaseClient=baseclient_1.BaseClient;var basebackend_1=require("./basebackend");exports.BaseBackend=basebackend_1.BaseBackend;var request_1=require("./request");exports.eventToSentryRequest=request_1.eventToSentryRequest;exports.sessionToSentryRequest=request_1.sessionToSentryRequest;var sdk_1=require("./sdk");exports.initAndBind=sdk_1.initAndBind;var noop_1=require("./transports/noop");exports.NoopTransport=noop_1.NoopTransport;var Integrations=require("./integrations");exports.Integrations=Integrations},{"./api":22,"./basebackend":23,"./baseclient":24,"./integrations":29,"./request":30,"./sdk":31,"./transports/noop":32,"@sentry/hub":34,"@sentry/minimal":37}],26:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var hub_1=require("@sentry/hub");var utils_1=require("@sentry/utils");exports.installedIntegrations=[];function getIntegrationsToSetup(options){var defaultIntegrations=options.defaultIntegrations&&tslib_1.__spread(options.defaultIntegrations)||[];var userIntegrations=options.integrations;var integrations=[];if(Array.isArray(userIntegrations)){var userIntegrationsNames_1=userIntegrations.map((function(i){return i.name}));var pickedIntegrationsNames_1=[];defaultIntegrations.forEach((function(defaultIntegration){if(userIntegrationsNames_1.indexOf(defaultIntegration.name)===-1&&pickedIntegrationsNames_1.indexOf(defaultIntegration.name)===-1){integrations.push(defaultIntegration);pickedIntegrationsNames_1.push(defaultIntegration.name)}}));userIntegrations.forEach((function(userIntegration){if(pickedIntegrationsNames_1.indexOf(userIntegration.name)===-1){integrations.push(userIntegration);pickedIntegrationsNames_1.push(userIntegration.name)}}))}else if(typeof userIntegrations==="function"){integrations=userIntegrations(defaultIntegrations);integrations=Array.isArray(integrations)?integrations:[integrations]}else{integrations=tslib_1.__spread(defaultIntegrations)}var integrationsNames=integrations.map((function(i){return i.name}));var alwaysLastToRun="Debug";if(integrationsNames.indexOf(alwaysLastToRun)!==-1){integrations.push.apply(integrations,tslib_1.__spread(integrations.splice(integrationsNames.indexOf(alwaysLastToRun),1)))}return integrations}exports.getIntegrationsToSetup=getIntegrationsToSetup;function setupIntegration(integration){if(exports.installedIntegrations.indexOf(integration.name)!==-1){return}integration.setupOnce(hub_1.addGlobalEventProcessor,hub_1.getCurrentHub);exports.installedIntegrations.push(integration.name);utils_1.logger.log("Integration installed: "+integration.name)}exports.setupIntegration=setupIntegration;function setupIntegrations(options){var integrations={};getIntegrationsToSetup(options).forEach((function(integration){integrations[integration.name]=integration;setupIntegration(integration)}));return integrations}exports.setupIntegrations=setupIntegrations},{"@sentry/hub":34,"@sentry/utils":48,tslib:173}],27:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var originalFunctionToString;var FunctionToString=function(){function FunctionToString(){this.name=FunctionToString.id}FunctionToString.prototype.setupOnce=function(){originalFunctionToString=Function.prototype.toString;Function.prototype.toString=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var context=this.__sentry_original__||this;return originalFunctionToString.apply(context,args)}};FunctionToString.id="FunctionToString";return FunctionToString}();exports.FunctionToString=FunctionToString},{}],28:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var hub_1=require("@sentry/hub");var utils_1=require("@sentry/utils");var DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];var InboundFilters=function(){function InboundFilters(_options){if(_options===void 0){_options={}}this._options=_options;this.name=InboundFilters.id}InboundFilters.prototype.setupOnce=function(){hub_1.addGlobalEventProcessor((function(event){var hub=hub_1.getCurrentHub();if(!hub){return event}var self=hub.getIntegration(InboundFilters);if(self){var client=hub.getClient();var clientOptions=client?client.getOptions():{};var options=self._mergeOptions(clientOptions);if(self._shouldDropEvent(event,options)){return null}}return event}))};InboundFilters.prototype._shouldDropEvent=function(event,options){if(this._isSentryError(event,options)){utils_1.logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+utils_1.getEventDescription(event));return true}if(this._isIgnoredError(event,options)){utils_1.logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+utils_1.getEventDescription(event));return true}if(this._isDeniedUrl(event,options)){utils_1.logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+utils_1.getEventDescription(event)+".\nUrl: "+this._getEventFilterUrl(event));return true}if(!this._isAllowedUrl(event,options)){utils_1.logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+utils_1.getEventDescription(event)+".\nUrl: "+this._getEventFilterUrl(event));return true}return false};InboundFilters.prototype._isSentryError=function(event,options){if(!options.ignoreInternal){return false}try{return event&&event.exception&&event.exception.values&&event.exception.values[0]&&event.exception.values[0].type==="SentryError"||false}catch(_oO){return false}};InboundFilters.prototype._isIgnoredError=function(event,options){if(!options.ignoreErrors||!options.ignoreErrors.length){return false}return this._getPossibleEventMessages(event).some((function(message){return options.ignoreErrors.some((function(pattern){return utils_1.isMatchingPattern(message,pattern)}))}))};InboundFilters.prototype._isDeniedUrl=function(event,options){if(!options.denyUrls||!options.denyUrls.length){return false}var url=this._getEventFilterUrl(event);return!url?false:options.denyUrls.some((function(pattern){return utils_1.isMatchingPattern(url,pattern)}))};InboundFilters.prototype._isAllowedUrl=function(event,options){if(!options.allowUrls||!options.allowUrls.length){return true}var url=this._getEventFilterUrl(event);return!url?true:options.allowUrls.some((function(pattern){return utils_1.isMatchingPattern(url,pattern)}))};InboundFilters.prototype._mergeOptions=function(clientOptions){if(clientOptions===void 0){clientOptions={}}return{allowUrls:tslib_1.__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],clientOptions.whitelistUrls||[],clientOptions.allowUrls||[]),denyUrls:tslib_1.__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],clientOptions.blacklistUrls||[],clientOptions.denyUrls||[]),ignoreErrors:tslib_1.__spread(this._options.ignoreErrors||[],clientOptions.ignoreErrors||[],DEFAULT_IGNORE_ERRORS),ignoreInternal:typeof this._options.ignoreInternal!=="undefined"?this._options.ignoreInternal:true}};InboundFilters.prototype._getPossibleEventMessages=function(event){if(event.message){return[event.message]}if(event.exception){try{var _a=event.exception.values&&event.exception.values[0]||{},_b=_a.type,type=_b===void 0?"":_b,_c=_a.value,value=_c===void 0?"":_c;return[""+value,type+": "+value]}catch(oO){utils_1.logger.error("Cannot extract message for event "+utils_1.getEventDescription(event));return[]}}return[]};InboundFilters.prototype._getEventFilterUrl=function(event){try{if(event.stacktrace){var frames_1=event.stacktrace.frames;return frames_1&&frames_1[frames_1.length-1].filename||null}if(event.exception){var frames_2=event.exception.values&&event.exception.values[0].stacktrace&&event.exception.values[0].stacktrace.frames;return frames_2&&frames_2[frames_2.length-1].filename||null}return null}catch(oO){utils_1.logger.error("Cannot extract url for event "+utils_1.getEventDescription(event));return null}};InboundFilters.id="InboundFilters";return InboundFilters}();exports.InboundFilters=InboundFilters},{"@sentry/hub":34,"@sentry/utils":48,tslib:173}],29:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var functiontostring_1=require("./functiontostring");exports.FunctionToString=functiontostring_1.FunctionToString;var inboundfilters_1=require("./inboundfilters");exports.InboundFilters=inboundfilters_1.InboundFilters},{"./functiontostring":27,"./inboundfilters":28}],30:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");function sessionToSentryRequest(session,api){var envelopeHeaders=JSON.stringify({sent_at:(new Date).toISOString()});var itemHeaders=JSON.stringify({type:"session"});return{body:envelopeHeaders+"\n"+itemHeaders+"\n"+JSON.stringify(session),type:"session",url:api.getEnvelopeEndpointWithUrlEncodedAuth()}}exports.sessionToSentryRequest=sessionToSentryRequest;function eventToSentryRequest(event,api){var _a=event.tags||{},samplingMethod=_a.__sentry_samplingMethod,sampleRate=_a.__sentry_sampleRate,otherTags=tslib_1.__rest(_a,["__sentry_samplingMethod","__sentry_sampleRate"]);event.tags=otherTags;var useEnvelope=event.type==="transaction";var req={body:JSON.stringify(event),type:event.type||"event",url:useEnvelope?api.getEnvelopeEndpointWithUrlEncodedAuth():api.getStoreEndpointWithUrlEncodedAuth()};if(useEnvelope){var envelopeHeaders=JSON.stringify({event_id:event.event_id,sent_at:(new Date).toISOString()});var itemHeaders=JSON.stringify({type:event.type,sample_rates:[{id:samplingMethod,rate:sampleRate}]});var envelope=envelopeHeaders+"\n"+itemHeaders+"\n"+req.body;req.body=envelope}return req}exports.eventToSentryRequest=eventToSentryRequest},{tslib:173}],31:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var hub_1=require("@sentry/hub");var utils_1=require("@sentry/utils");function initAndBind(clientClass,options){if(options.debug===true){utils_1.logger.enable()}var hub=hub_1.getCurrentHub();var client=new clientClass(options);hub.bindClient(client)}exports.initAndBind=initAndBind},{"@sentry/hub":34,"@sentry/utils":48}],32:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var NoopTransport=function(){function NoopTransport(){}NoopTransport.prototype.sendEvent=function(_){return utils_1.SyncPromise.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:types_1.Status.Skipped})};NoopTransport.prototype.close=function(_){return utils_1.SyncPromise.resolve(true)};return NoopTransport}();exports.NoopTransport=NoopTransport},{"@sentry/types":38,"@sentry/utils":48}],33:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var utils_1=require("@sentry/utils");var scope_1=require("./scope");var session_1=require("./session");exports.API_VERSION=3;var DEFAULT_BREADCRUMBS=100;var MAX_BREADCRUMBS=100;var Hub=function(){function Hub(client,scope,_version){if(scope===void 0){scope=new scope_1.Scope}if(_version===void 0){_version=exports.API_VERSION}this._version=_version;this._stack=[{}];this.getStackTop().scope=scope;this.bindClient(client)}Hub.prototype.isOlderThan=function(version){return this._version<version};Hub.prototype.bindClient=function(client){var top=this.getStackTop();top.client=client;if(client&&client.setupIntegrations){client.setupIntegrations()}};Hub.prototype.pushScope=function(){var scope=scope_1.Scope.clone(this.getScope());this.getStack().push({client:this.getClient(),scope:scope});return scope};Hub.prototype.popScope=function(){if(this.getStack().length<=1)return false;return!!this.getStack().pop()};Hub.prototype.withScope=function(callback){var scope=this.pushScope();try{callback(scope)}finally{this.popScope()}};Hub.prototype.getClient=function(){return this.getStackTop().client};Hub.prototype.getScope=function(){return this.getStackTop().scope};Hub.prototype.getStack=function(){return this._stack};Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]};Hub.prototype.captureException=function(exception,hint){var eventId=this._lastEventId=utils_1.uuid4();var finalHint=hint;if(!hint){var syntheticException=void 0;try{throw new Error("Sentry syntheticException")}catch(exception){syntheticException=exception}finalHint={originalException:exception,syntheticException:syntheticException}}this._invokeClient("captureException",exception,tslib_1.__assign(tslib_1.__assign({},finalHint),{event_id:eventId}));return eventId};Hub.prototype.captureMessage=function(message,level,hint){var eventId=this._lastEventId=utils_1.uuid4();var finalHint=hint;if(!hint){var syntheticException=void 0;try{throw new Error(message)}catch(exception){syntheticException=exception}finalHint={originalException:message,syntheticException:syntheticException}}this._invokeClient("captureMessage",message,level,tslib_1.__assign(tslib_1.__assign({},finalHint),{event_id:eventId}));return eventId};Hub.prototype.captureEvent=function(event,hint){var eventId=this._lastEventId=utils_1.uuid4();this._invokeClient("captureEvent",event,tslib_1.__assign(tslib_1.__assign({},hint),{event_id:eventId}));return eventId};Hub.prototype.lastEventId=function(){return this._lastEventId};Hub.prototype.addBreadcrumb=function(breadcrumb,hint){var _a=this.getStackTop(),scope=_a.scope,client=_a.client;if(!scope||!client)return;var _b=client.getOptions&&client.getOptions()||{},_c=_b.beforeBreadcrumb,beforeBreadcrumb=_c===void 0?null:_c,_d=_b.maxBreadcrumbs,maxBreadcrumbs=_d===void 0?DEFAULT_BREADCRUMBS:_d;if(maxBreadcrumbs<=0)return;var timestamp=utils_1.dateTimestampInSeconds();var mergedBreadcrumb=tslib_1.__assign({timestamp:timestamp},breadcrumb);var finalBreadcrumb=beforeBreadcrumb?utils_1.consoleSandbox((function(){return beforeBreadcrumb(mergedBreadcrumb,hint)})):mergedBreadcrumb;if(finalBreadcrumb===null)return;scope.addBreadcrumb(finalBreadcrumb,Math.min(maxBreadcrumbs,MAX_BREADCRUMBS))};Hub.prototype.setUser=function(user){var scope=this.getScope();if(scope)scope.setUser(user)};Hub.prototype.setTags=function(tags){var scope=this.getScope();if(scope)scope.setTags(tags)};Hub.prototype.setExtras=function(extras){var scope=this.getScope();if(scope)scope.setExtras(extras)};Hub.prototype.setTag=function(key,value){var scope=this.getScope();if(scope)scope.setTag(key,value)};Hub.prototype.setExtra=function(key,extra){var scope=this.getScope();if(scope)scope.setExtra(key,extra)};Hub.prototype.setContext=function(name,context){var scope=this.getScope();if(scope)scope.setContext(name,context)};Hub.prototype.configureScope=function(callback){var _a=this.getStackTop(),scope=_a.scope,client=_a.client;if(scope&&client){callback(scope)}};Hub.prototype.run=function(callback){var oldHub=makeMain(this);try{callback(this)}finally{makeMain(oldHub)}};Hub.prototype.getIntegration=function(integration){var client=this.getClient();if(!client)return null;try{return client.getIntegration(integration)}catch(_oO){utils_1.logger.warn("Cannot retrieve integration "+integration.id+" from the current Hub");return null}};Hub.prototype.startSpan=function(context){return this._callExtensionMethod("startSpan",context)};Hub.prototype.startTransaction=function(context,customSamplingContext){return this._callExtensionMethod("startTransaction",context,customSamplingContext)};Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")};Hub.prototype.startSession=function(context){this.endSession();var _a=this.getStackTop(),scope=_a.scope,client=_a.client;var _b=client&&client.getOptions()||{},release=_b.release,environment=_b.environment;var session=new session_1.Session(tslib_1.__assign(tslib_1.__assign({release:release,environment:environment},scope&&{user:scope.getUser()}),context));if(scope){scope.setSession(session)}return session};Hub.prototype.endSession=function(){var _a=this.getStackTop(),scope=_a.scope,client=_a.client;if(!scope)return;var session=scope.getSession&&scope.getSession();if(session){session.close();if(client&&client.captureSession){client.captureSession(session)}scope.setSession()}};Hub.prototype._invokeClient=function(method){var _a;var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var _b=this.getStackTop(),scope=_b.scope,client=_b.client;if(client&&client[method]){(_a=client)[method].apply(_a,tslib_1.__spread(args,[scope]))}};Hub.prototype._callExtensionMethod=function(method){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var carrier=getMainCarrier();var sentry=carrier.__SENTRY__;if(sentry&&sentry.extensions&&typeof sentry.extensions[method]==="function"){return sentry.extensions[method].apply(this,args)}utils_1.logger.warn("Extension method "+method+" couldn't be found, doing nothing.")};return Hub}();exports.Hub=Hub;function getMainCarrier(){var carrier=utils_1.getGlobalObject();carrier.__SENTRY__=carrier.__SENTRY__||{extensions:{},hub:undefined};return carrier}exports.getMainCarrier=getMainCarrier;function makeMain(hub){var registry=getMainCarrier();var oldHub=getHubFromCarrier(registry);setHubOnCarrier(registry,hub);return oldHub}exports.makeMain=makeMain;function getCurrentHub(){var registry=getMainCarrier();if(!hasHubOnCarrier(registry)||getHubFromCarrier(registry).isOlderThan(exports.API_VERSION)){setHubOnCarrier(registry,new Hub)}if(utils_1.isNodeEnv()){return getHubFromActiveDomain(registry)}return getHubFromCarrier(registry)}exports.getCurrentHub=getCurrentHub;function getActiveDomain(){var sentry=getMainCarrier().__SENTRY__;return sentry&&sentry.extensions&&sentry.extensions.domain&&sentry.extensions.domain.active}exports.getActiveDomain=getActiveDomain;function getHubFromActiveDomain(registry){try{var activeDomain=getActiveDomain();if(!activeDomain){return getHubFromCarrier(registry)}if(!hasHubOnCarrier(activeDomain)||getHubFromCarrier(activeDomain).isOlderThan(exports.API_VERSION)){var registryHubTopStack=getHubFromCarrier(registry).getStackTop();setHubOnCarrier(activeDomain,new Hub(registryHubTopStack.client,scope_1.Scope.clone(registryHubTopStack.scope)))}return getHubFromCarrier(activeDomain)}catch(_Oo){return getHubFromCarrier(registry)}}function hasHubOnCarrier(carrier){return!!(carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub)}function getHubFromCarrier(carrier){if(carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub)return carrier.__SENTRY__.hub;carrier.__SENTRY__=carrier.__SENTRY__||{};carrier.__SENTRY__.hub=new Hub;return carrier.__SENTRY__.hub}exports.getHubFromCarrier=getHubFromCarrier;function setHubOnCarrier(carrier,hub){if(!carrier)return false;carrier.__SENTRY__=carrier.__SENTRY__||{};carrier.__SENTRY__.hub=hub;return true}exports.setHubOnCarrier=setHubOnCarrier},{"./scope":35,"./session":36,"@sentry/utils":48,tslib:173}],34:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var scope_1=require("./scope");exports.addGlobalEventProcessor=scope_1.addGlobalEventProcessor;exports.Scope=scope_1.Scope;var session_1=require("./session");exports.Session=session_1.Session;var hub_1=require("./hub");exports.getActiveDomain=hub_1.getActiveDomain;exports.getCurrentHub=hub_1.getCurrentHub;exports.getHubFromCarrier=hub_1.getHubFromCarrier;exports.getMainCarrier=hub_1.getMainCarrier;exports.Hub=hub_1.Hub;exports.makeMain=hub_1.makeMain;exports.setHubOnCarrier=hub_1.setHubOnCarrier},{"./hub":33,"./scope":35,"./session":36}],35:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var utils_1=require("@sentry/utils");var Scope=function(){function Scope(){this._notifyingListeners=false;this._scopeListeners=[];this._eventProcessors=[];this._breadcrumbs=[];this._user={};this._tags={};this._extra={};this._contexts={}}Scope.clone=function(scope){var newScope=new Scope;if(scope){newScope._breadcrumbs=tslib_1.__spread(scope._breadcrumbs);newScope._tags=tslib_1.__assign({},scope._tags);newScope._extra=tslib_1.__assign({},scope._extra);newScope._contexts=tslib_1.__assign({},scope._contexts);newScope._user=scope._user;newScope._level=scope._level;newScope._span=scope._span;newScope._session=scope._session;newScope._transactionName=scope._transactionName;newScope._fingerprint=scope._fingerprint;newScope._eventProcessors=tslib_1.__spread(scope._eventProcessors)}return newScope};Scope.prototype.addScopeListener=function(callback){this._scopeListeners.push(callback)};Scope.prototype.addEventProcessor=function(callback){this._eventProcessors.push(callback);return this};Scope.prototype.setUser=function(user){this._user=user||{};if(this._session){this._session.update({user:user})}this._notifyScopeListeners();return this};Scope.prototype.getUser=function(){return this._user};Scope.prototype.setTags=function(tags){this._tags=tslib_1.__assign(tslib_1.__assign({},this._tags),tags);this._notifyScopeListeners();return this};Scope.prototype.setTag=function(key,value){var _a;this._tags=tslib_1.__assign(tslib_1.__assign({},this._tags),(_a={},_a[key]=value,_a));this._notifyScopeListeners();return this};Scope.prototype.setExtras=function(extras){this._extra=tslib_1.__assign(tslib_1.__assign({},this._extra),extras);this._notifyScopeListeners();return this};Scope.prototype.setExtra=function(key,extra){var _a;this._extra=tslib_1.__assign(tslib_1.__assign({},this._extra),(_a={},_a[key]=extra,_a));this._notifyScopeListeners();return this};Scope.prototype.setFingerprint=function(fingerprint){this._fingerprint=fingerprint;this._notifyScopeListeners();return this};Scope.prototype.setLevel=function(level){this._level=level;this._notifyScopeListeners();return this};Scope.prototype.setTransactionName=function(name){this._transactionName=name;this._notifyScopeListeners();return this};Scope.prototype.setTransaction=function(name){return this.setTransactionName(name)};Scope.prototype.setContext=function(key,context){var _a;if(context===null){delete this._contexts[key]}else{this._contexts=tslib_1.__assign(tslib_1.__assign({},this._contexts),(_a={},_a[key]=context,_a))}this._notifyScopeListeners();return this};Scope.prototype.setSpan=function(span){this._span=span;this._notifyScopeListeners();return this};Scope.prototype.getSpan=function(){return this._span};Scope.prototype.getTransaction=function(){var _a,_b,_c,_d;var span=this.getSpan();if((_a=span)===null||_a===void 0?void 0:_a.transaction){return(_b=span)===null||_b===void 0?void 0:_b.transaction}if((_d=(_c=span)===null||_c===void 0?void 0:_c.spanRecorder)===null||_d===void 0?void 0:_d.spans[0]){return span.spanRecorder.spans[0]}return undefined};Scope.prototype.setSession=function(session){if(!session){delete this._session}else{this._session=session}this._notifyScopeListeners();return this};Scope.prototype.getSession=function(){return this._session};Scope.prototype.update=function(captureContext){if(!captureContext){return this}if(typeof captureContext==="function"){var updatedScope=captureContext(this);return updatedScope instanceof Scope?updatedScope:this}if(captureContext instanceof Scope){this._tags=tslib_1.__assign(tslib_1.__assign({},this._tags),captureContext._tags);this._extra=tslib_1.__assign(tslib_1.__assign({},this._extra),captureContext._extra);this._contexts=tslib_1.__assign(tslib_1.__assign({},this._contexts),captureContext._contexts);if(captureContext._user&&Object.keys(captureContext._user).length){this._user=captureContext._user}if(captureContext._level){this._level=captureContext._level}if(captureContext._fingerprint){this._fingerprint=captureContext._fingerprint}}else if(utils_1.isPlainObject(captureContext)){captureContext=captureContext;this._tags=tslib_1.__assign(tslib_1.__assign({},this._tags),captureContext.tags);this._extra=tslib_1.__assign(tslib_1.__assign({},this._extra),captureContext.extra);this._contexts=tslib_1.__assign(tslib_1.__assign({},this._contexts),captureContext.contexts);if(captureContext.user){this._user=captureContext.user}if(captureContext.level){this._level=captureContext.level}if(captureContext.fingerprint){this._fingerprint=captureContext.fingerprint}}return this};Scope.prototype.clear=function(){this._breadcrumbs=[];this._tags={};this._extra={};this._user={};this._contexts={};this._level=undefined;this._transactionName=undefined;this._fingerprint=undefined;this._span=undefined;this._session=undefined;this._notifyScopeListeners();return this};Scope.prototype.addBreadcrumb=function(breadcrumb,maxBreadcrumbs){var mergedBreadcrumb=tslib_1.__assign({timestamp:utils_1.dateTimestampInSeconds()},breadcrumb);this._breadcrumbs=maxBreadcrumbs!==undefined&&maxBreadcrumbs>=0?tslib_1.__spread(this._breadcrumbs,[mergedBreadcrumb]).slice(-maxBreadcrumbs):tslib_1.__spread(this._breadcrumbs,[mergedBreadcrumb]);this._notifyScopeListeners();return this};Scope.prototype.clearBreadcrumbs=function(){this._breadcrumbs=[];this._notifyScopeListeners();return this};Scope.prototype.applyToEvent=function(event,hint){var _a;if(this._extra&&Object.keys(this._extra).length){event.extra=tslib_1.__assign(tslib_1.__assign({},this._extra),event.extra)}if(this._tags&&Object.keys(this._tags).length){event.tags=tslib_1.__assign(tslib_1.__assign({},this._tags),event.tags)}if(this._user&&Object.keys(this._user).length){event.user=tslib_1.__assign(tslib_1.__assign({},this._user),event.user)}if(this._contexts&&Object.keys(this._contexts).length){event.contexts=tslib_1.__assign(tslib_1.__assign({},this._contexts),event.contexts)}if(this._level){event.level=this._level}if(this._transactionName){event.transaction=this._transactionName}if(this._span){event.contexts=tslib_1.__assign({trace:this._span.getTraceContext()},event.contexts);var transactionName=(_a=this._span.transaction)===null||_a===void 0?void 0:_a.name;if(transactionName){event.tags=tslib_1.__assign({transaction:transactionName},event.tags)}}this._applyFingerprint(event);event.breadcrumbs=tslib_1.__spread(event.breadcrumbs||[],this._breadcrumbs);event.breadcrumbs=event.breadcrumbs.length>0?event.breadcrumbs:undefined;return this._notifyEventProcessors(tslib_1.__spread(getGlobalEventProcessors(),this._eventProcessors),event,hint)};Scope.prototype._notifyEventProcessors=function(processors,event,hint,index){var _this=this;if(index===void 0){index=0}return new utils_1.SyncPromise((function(resolve,reject){var processor=processors[index];if(event===null||typeof processor!=="function"){resolve(event)}else{var result=processor(tslib_1.__assign({},event),hint);if(utils_1.isThenable(result)){result.then((function(final){return _this._notifyEventProcessors(processors,final,hint,index+1).then(resolve)})).then(null,reject)}else{_this._notifyEventProcessors(processors,result,hint,index+1).then(resolve).then(null,reject)}}}))};Scope.prototype._notifyScopeListeners=function(){var _this=this;if(!this._notifyingListeners){this._notifyingListeners=true;this._scopeListeners.forEach((function(callback){callback(_this)}));this._notifyingListeners=false}};Scope.prototype._applyFingerprint=function(event){event.fingerprint=event.fingerprint?Array.isArray(event.fingerprint)?event.fingerprint:[event.fingerprint]:[];if(this._fingerprint){event.fingerprint=event.fingerprint.concat(this._fingerprint)}if(event.fingerprint&&!event.fingerprint.length){delete event.fingerprint}};return Scope}();exports.Scope=Scope;function getGlobalEventProcessors(){var global=utils_1.getGlobalObject();global.__SENTRY__=global.__SENTRY__||{};global.__SENTRY__.globalEventProcessors=global.__SENTRY__.globalEventProcessors||[];return global.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(callback){getGlobalEventProcessors().push(callback)}exports.addGlobalEventProcessor=addGlobalEventProcessor},{"@sentry/utils":48,tslib:173}],36:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var types_1=require("@sentry/types");var utils_1=require("@sentry/utils");var Session=function(){function Session(context){this.errors=0;this.sid=utils_1.uuid4();this.timestamp=Date.now();this.started=Date.now();this.duration=0;this.status=types_1.SessionStatus.Ok;if(context){this.update(context)}}Session.prototype.update=function(context){if(context===void 0){context={}}if(context.user){if(context.user.ip_address){this.ipAddress=context.user.ip_address}if(!context.did){this.did=context.user.id||context.user.email||context.user.username}}this.timestamp=context.timestamp||Date.now();if(context.sid){this.sid=context.sid.length===32?context.sid:utils_1.uuid4()}if(context.did){this.did=""+context.did}if(typeof context.started==="number"){this.started=context.started}if(typeof context.duration==="number"){this.duration=context.duration}else{this.duration=this.timestamp-this.started}if(context.release){this.release=context.release}if(context.environment){this.environment=context.environment}if(context.ipAddress){this.ipAddress=context.ipAddress}if(context.userAgent){this.userAgent=context.userAgent}if(typeof context.errors==="number"){this.errors=context.errors}if(context.status){this.status=context.status}};Session.prototype.close=function(status){if(status){this.update({status:status})}else if(this.status===types_1.SessionStatus.Ok){this.update({status:types_1.SessionStatus.Exited})}else{this.update()}};Session.prototype.toJSON=function(){return utils_1.dropUndefinedKeys({sid:""+this.sid,init:true,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:typeof this.did==="number"||typeof this.did==="string"?""+this.did:undefined,duration:this.duration,attrs:utils_1.dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})};return Session}();exports.Session=Session},{"@sentry/types":38,"@sentry/utils":48}],37:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var hub_1=require("@sentry/hub");function callOnHub(method){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}var hub=hub_1.getCurrentHub();if(hub&&hub[method]){return hub[method].apply(hub,tslib_1.__spread(args))}throw new Error("No hub defined or "+method+" was not found on the hub, please open a bug report.")}function captureException(exception,captureContext){var syntheticException;try{throw new Error("Sentry syntheticException")}catch(exception){syntheticException=exception}return callOnHub("captureException",exception,{captureContext:captureContext,originalException:exception,syntheticException:syntheticException})}exports.captureException=captureException;function captureMessage(message,captureContext){var syntheticException;try{throw new Error(message)}catch(exception){syntheticException=exception}var level=typeof captureContext==="string"?captureContext:undefined;var context=typeof captureContext!=="string"?{captureContext:captureContext}:undefined;return callOnHub("captureMessage",message,level,tslib_1.__assign({originalException:message,syntheticException:syntheticException},context))}exports.captureMessage=captureMessage;function captureEvent(event){return callOnHub("captureEvent",event)}exports.captureEvent=captureEvent;function configureScope(callback){callOnHub("configureScope",callback)}exports.configureScope=configureScope;function addBreadcrumb(breadcrumb){callOnHub("addBreadcrumb",breadcrumb)}exports.addBreadcrumb=addBreadcrumb;function setContext(name,context){callOnHub("setContext",name,context)}exports.setContext=setContext;function setExtras(extras){callOnHub("setExtras",extras)}exports.setExtras=setExtras;function setTags(tags){callOnHub("setTags",tags)}exports.setTags=setTags;function setExtra(key,extra){callOnHub("setExtra",key,extra)}exports.setExtra=setExtra;function setTag(key,value){callOnHub("setTag",key,value)}exports.setTag=setTag;function setUser(user){callOnHub("setUser",user)}exports.setUser=setUser;function withScope(callback){callOnHub("withScope",callback)}exports.withScope=withScope;function _callOnClient(method){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}callOnHub.apply(void 0,tslib_1.__spread(["_invokeClient",method],args))}exports._callOnClient=_callOnClient;function startTransaction(context,customSamplingContext){return callOnHub("startTransaction",tslib_1.__assign({},context),customSamplingContext)}exports.startTransaction=startTransaction},{"@sentry/hub":34,tslib:173}],38:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var loglevel_1=require("./loglevel");exports.LogLevel=loglevel_1.LogLevel;var session_1=require("./session");exports.SessionStatus=session_1.SessionStatus;var severity_1=require("./severity");exports.Severity=severity_1.Severity;var status_1=require("./status");exports.Status=status_1.Status;var transaction_1=require("./transaction");exports.TransactionSamplingMethod=transaction_1.TransactionSamplingMethod},{"./loglevel":39,"./session":40,"./severity":41,"./status":42,"./transaction":43}],39:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var LogLevel;(function(LogLevel){LogLevel[LogLevel["None"]=0]="None";LogLevel[LogLevel["Error"]=1]="Error";LogLevel[LogLevel["Debug"]=2]="Debug";LogLevel[LogLevel["Verbose"]=3]="Verbose"})(LogLevel=exports.LogLevel||(exports.LogLevel={}))},{}],40:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var SessionStatus;(function(SessionStatus){SessionStatus["Ok"]="ok";SessionStatus["Exited"]="exited";SessionStatus["Crashed"]="crashed";SessionStatus["Abnormal"]="abnormal"})(SessionStatus=exports.SessionStatus||(exports.SessionStatus={}))},{}],41:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var Severity;(function(Severity){Severity["Fatal"]="fatal";Severity["Error"]="error";Severity["Warning"]="warning";Severity["Log"]="log";Severity["Info"]="info";Severity["Debug"]="debug";Severity["Critical"]="critical"})(Severity=exports.Severity||(exports.Severity={}));(function(Severity){function fromString(level){switch(level){case"debug":return Severity.Debug;case"info":return Severity.Info;case"warn":case"warning":return Severity.Warning;case"error":return Severity.Error;case"fatal":return Severity.Fatal;case"critical":return Severity.Critical;case"log":default:return Severity.Log}}Severity.fromString=fromString})(Severity=exports.Severity||(exports.Severity={}))},{}],42:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var Status;(function(Status){Status["Unknown"]="unknown";Status["Skipped"]="skipped";Status["Success"]="success";Status["RateLimit"]="rate_limit";Status["Invalid"]="invalid";Status["Failed"]="failed"})(Status=exports.Status||(exports.Status={}));(function(Status){function fromHttpCode(code){if(code>=200&&code<300){return Status.Success}if(code===429){return Status.RateLimit}if(code>=400&&code<500){return Status.Invalid}if(code>=500){return Status.Failed}return Status.Unknown}Status.fromHttpCode=fromHttpCode})(Status=exports.Status||(exports.Status={}))},{}],43:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var TransactionSamplingMethod;(function(TransactionSamplingMethod){TransactionSamplingMethod["Explicit"]="explicitly_set";TransactionSamplingMethod["Sampler"]="client_sampler";TransactionSamplingMethod["Rate"]="client_rate";TransactionSamplingMethod["Inheritance"]="inheritance"})(TransactionSamplingMethod=exports.TransactionSamplingMethod||(exports.TransactionSamplingMethod={}))},{}],44:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});function forget(promise){promise.then(null,(function(e){console.error(e)}))}exports.forget=forget},{}],45:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var is_1=require("./is");function htmlTreeAsString(elem){try{var currentElem=elem;var MAX_TRAVERSE_HEIGHT=5;var MAX_OUTPUT_LEN=80;var out=[];var height=0;var len=0;var separator=" > ";var sepLength=separator.length;var nextStr=void 0;while(currentElem&&height++<MAX_TRAVERSE_HEIGHT){nextStr=_htmlElementAsString(currentElem);if(nextStr==="html"||height>1&&len+out.length*sepLength+nextStr.length>=MAX_OUTPUT_LEN){break}out.push(nextStr);len+=nextStr.length;currentElem=currentElem.parentNode}return out.reverse().join(separator)}catch(_oO){return"<unknown>"}}exports.htmlTreeAsString=htmlTreeAsString;function _htmlElementAsString(el){var elem=el;var out=[];var className;var classes;var key;var attr;var i;if(!elem||!elem.tagName){return""}out.push(elem.tagName.toLowerCase());if(elem.id){out.push("#"+elem.id)}className=elem.className;if(className&&is_1.isString(className)){classes=className.split(/\s+/);for(i=0;i<classes.length;i++){out.push("."+classes[i])}}var allowedAttrs=["type","name","title","alt"];for(i=0;i<allowedAttrs.length;i++){key=allowedAttrs[i];attr=elem.getAttribute(key);if(attr){out.push("["+key+'="'+attr+'"]')}}return out.join("")}},{"./is":50}],46:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var error_1=require("./error");var DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;var ERROR_MESSAGE="Invalid Dsn";var Dsn=function(){function Dsn(from){if(typeof from==="string"){this._fromString(from)}else{this._fromComponents(from)}this._validate()}Dsn.prototype.toString=function(withPassword){if(withPassword===void 0){withPassword=false}var _a=this,host=_a.host,path=_a.path,pass=_a.pass,port=_a.port,projectId=_a.projectId,protocol=_a.protocol,user=_a.user;return protocol+"://"+user+(withPassword&&pass?":"+pass:"")+("@"+host+(port?":"+port:"")+"/"+(path?path+"/":path)+projectId)};Dsn.prototype._fromString=function(str){var match=DSN_REGEX.exec(str);if(!match){throw new error_1.SentryError(ERROR_MESSAGE)}var _a=tslib_1.__read(match.slice(1),6),protocol=_a[0],user=_a[1],_b=_a[2],pass=_b===void 0?"":_b,host=_a[3],_c=_a[4],port=_c===void 0?"":_c,lastPath=_a[5];var path="";var projectId=lastPath;var split=projectId.split("/");if(split.length>1){path=split.slice(0,-1).join("/");projectId=split.pop()}if(projectId){var projectMatch=projectId.match(/^\d+/);if(projectMatch){projectId=projectMatch[0]}}this._fromComponents({host:host,pass:pass,path:path,projectId:projectId,port:port,protocol:protocol,user:user})};Dsn.prototype._fromComponents=function(components){this.protocol=components.protocol;this.user=components.user;this.pass=components.pass||"";this.host=components.host;this.port=components.port||"";this.path=components.path||"";this.projectId=components.projectId};Dsn.prototype._validate=function(){var _this=this;["protocol","user","host","projectId"].forEach((function(component){if(!_this[component]){throw new error_1.SentryError(ERROR_MESSAGE+": "+component+" missing")}}));if(!this.projectId.match(/^\d+$/)){throw new error_1.SentryError(ERROR_MESSAGE+": Invalid projectId "+this.projectId)}if(this.protocol!=="http"&&this.protocol!=="https"){throw new error_1.SentryError(ERROR_MESSAGE+": Invalid protocol "+this.protocol)}if(this.port&&isNaN(parseInt(this.port,10))){throw new error_1.SentryError(ERROR_MESSAGE+": Invalid port "+this.port)}};return Dsn}();exports.Dsn=Dsn},{"./error":47,tslib:173}],47:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var polyfill_1=require("./polyfill");var SentryError=function(_super){tslib_1.__extends(SentryError,_super);function SentryError(message){var _newTarget=this.constructor;var _this=_super.call(this,message)||this;_this.message=message;_this.name=_newTarget.prototype.constructor.name;polyfill_1.setPrototypeOf(_this,_newTarget.prototype);return _this}return SentryError}(Error);exports.SentryError=SentryError},{"./polyfill":57,tslib:173}],48:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");tslib_1.__exportStar(require("./async"),exports);tslib_1.__exportStar(require("./browser"),exports);tslib_1.__exportStar(require("./dsn"),exports);tslib_1.__exportStar(require("./error"),exports);tslib_1.__exportStar(require("./instrument"),exports);tslib_1.__exportStar(require("./is"),exports);tslib_1.__exportStar(require("./logger"),exports);tslib_1.__exportStar(require("./memo"),exports);tslib_1.__exportStar(require("./misc"),exports);tslib_1.__exportStar(require("./node"),exports);tslib_1.__exportStar(require("./object"),exports);tslib_1.__exportStar(require("./path"),exports);tslib_1.__exportStar(require("./promisebuffer"),exports);tslib_1.__exportStar(require("./stacktrace"),exports);tslib_1.__exportStar(require("./string"),exports);tslib_1.__exportStar(require("./supports"),exports);tslib_1.__exportStar(require("./syncpromise"),exports);tslib_1.__exportStar(require("./time"),exports)},{"./async":44,"./browser":45,"./dsn":46,"./error":47,"./instrument":49,"./is":50,"./logger":51,"./memo":52,"./misc":53,"./node":54,"./object":55,"./path":56,"./promisebuffer":58,"./stacktrace":59,"./string":60,"./supports":61,"./syncpromise":62,"./time":63,tslib:173}],49:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var is_1=require("./is");var logger_1=require("./logger");var misc_1=require("./misc");var object_1=require("./object");var stacktrace_1=require("./stacktrace");var supports_1=require("./supports");var global=misc_1.getGlobalObject();var handlers={};var instrumented={};function instrument(type){if(instrumented[type]){return}instrumented[type]=true;switch(type){case"console":instrumentConsole();break;case"dom":instrumentDOM();break;case"xhr":instrumentXHR();break;case"fetch":instrumentFetch();break;case"history":instrumentHistory();break;case"error":instrumentError();break;case"unhandledrejection":instrumentUnhandledRejection();break;default:logger_1.logger.warn("unknown instrumentation type:",type)}}function addInstrumentationHandler(handler){if(!handler||typeof handler.type!=="string"||typeof handler.callback!=="function"){return}handlers[handler.type]=handlers[handler.type]||[];handlers[handler.type].push(handler.callback);instrument(handler.type)}exports.addInstrumentationHandler=addInstrumentationHandler;function triggerHandlers(type,data){var e_1,_a;if(!type||!handlers[type]){return}try{for(var _b=tslib_1.__values(handlers[type]||[]),_c=_b.next();!_c.done;_c=_b.next()){var handler=_c.value;try{handler(data)}catch(e){logger_1.logger.error("Error while triggering instrumentation handler.\nType: "+type+"\nName: "+stacktrace_1.getFunctionName(handler)+"\nError: "+e)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}}function instrumentConsole(){if(!("console"in global)){return}["debug","info","warn","error","log","assert"].forEach((function(level){if(!(level in global.console)){return}object_1.fill(global.console,level,(function(originalConsoleLevel){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}triggerHandlers("console",{args:args,level:level});if(originalConsoleLevel){Function.prototype.apply.call(originalConsoleLevel,global.console,args)}}}))}))}function instrumentFetch(){if(!supports_1.supportsNativeFetch()){return}object_1.fill(global,"fetch",(function(originalFetch){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var handlerData={args:args,fetchData:{method:getFetchMethod(args),url:getFetchUrl(args)},startTimestamp:Date.now()};triggerHandlers("fetch",tslib_1.__assign({},handlerData));return originalFetch.apply(global,args).then((function(response){triggerHandlers("fetch",tslib_1.__assign(tslib_1.__assign({},handlerData),{endTimestamp:Date.now(),response:response}));return response}),(function(error){triggerHandlers("fetch",tslib_1.__assign(tslib_1.__assign({},handlerData),{endTimestamp:Date.now(),error:error}));throw error}))}}))}function getFetchMethod(fetchArgs){if(fetchArgs===void 0){fetchArgs=[]}if("Request"in global&&is_1.isInstanceOf(fetchArgs[0],Request)&&fetchArgs[0].method){return String(fetchArgs[0].method).toUpperCase()}if(fetchArgs[1]&&fetchArgs[1].method){return String(fetchArgs[1].method).toUpperCase()}return"GET"}function getFetchUrl(fetchArgs){if(fetchArgs===void 0){fetchArgs=[]}if(typeof fetchArgs[0]==="string"){return fetchArgs[0]}if("Request"in global&&is_1.isInstanceOf(fetchArgs[0],Request)){return fetchArgs[0].url}return String(fetchArgs[0])}function instrumentXHR(){if(!("XMLHttpRequest"in global)){return}var requestKeys=[];var requestValues=[];var xhrproto=XMLHttpRequest.prototype;object_1.fill(xhrproto,"open",(function(originalOpen){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var xhr=this;var url=args[1];xhr.__sentry_xhr__={method:is_1.isString(args[0])?args[0].toUpperCase():args[0],url:args[1]};if(is_1.isString(url)&&xhr.__sentry_xhr__.method==="POST"&&url.match(/sentry_key/)){xhr.__sentry_own_request__=true}var onreadystatechangeHandler=function(){if(xhr.readyState===4){try{if(xhr.__sentry_xhr__){xhr.__sentry_xhr__.status_code=xhr.status}}catch(e){}try{var requestPos=requestKeys.indexOf(xhr);if(requestPos!==-1){requestKeys.splice(requestPos);var args_1=requestValues.splice(requestPos)[0];if(xhr.__sentry_xhr__&&args_1[0]!==undefined){xhr.__sentry_xhr__.body=args_1[0]}}}catch(e){}triggerHandlers("xhr",{args:args,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:xhr})}};if("onreadystatechange"in xhr&&typeof xhr.onreadystatechange==="function"){object_1.fill(xhr,"onreadystatechange",(function(original){return function(){var readyStateArgs=[];for(var _i=0;_i<arguments.length;_i++){readyStateArgs[_i]=arguments[_i]}onreadystatechangeHandler();return original.apply(xhr,readyStateArgs)}}))}else{xhr.addEventListener("readystatechange",onreadystatechangeHandler)}return originalOpen.apply(xhr,args)}}));object_1.fill(xhrproto,"send",(function(originalSend){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}requestKeys.push(this);requestValues.push(args);triggerHandlers("xhr",{args:args,startTimestamp:Date.now(),xhr:this});return originalSend.apply(this,args)}}))}var lastHref;function instrumentHistory(){if(!supports_1.supportsHistory()){return}var oldOnPopState=global.onpopstate;global.onpopstate=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var to=global.location.href;var from=lastHref;lastHref=to;triggerHandlers("history",{from:from,to:to});if(oldOnPopState){return oldOnPopState.apply(this,args)}};function historyReplacementFunction(originalHistoryFunction){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var url=args.length>2?args[2]:undefined;if(url){var from=lastHref;var to=String(url);lastHref=to;triggerHandlers("history",{from:from,to:to})}return originalHistoryFunction.apply(this,args)}}object_1.fill(global.history,"pushState",historyReplacementFunction);object_1.fill(global.history,"replaceState",historyReplacementFunction)}function instrumentDOM(){if(!("document"in global)){return}global.document.addEventListener("click",domEventHandler("click",triggerHandlers.bind(null,"dom")),false);global.document.addEventListener("keypress",keypressEventHandler(triggerHandlers.bind(null,"dom")),false);["EventTarget","Node"].forEach((function(target){var proto=global[target]&&global[target].prototype;if(!proto||!proto.hasOwnProperty||!proto.hasOwnProperty("addEventListener")){return}object_1.fill(proto,"addEventListener",(function(original){return function(eventName,fn,options){if(fn&&fn.handleEvent){if(eventName==="click"){object_1.fill(fn,"handleEvent",(function(innerOriginal){return function(event){domEventHandler("click",triggerHandlers.bind(null,"dom"))(event);return innerOriginal.call(this,event)}}))}if(eventName==="keypress"){object_1.fill(fn,"handleEvent",(function(innerOriginal){return function(event){keypressEventHandler(triggerHandlers.bind(null,"dom"))(event);return innerOriginal.call(this,event)}}))}}else{if(eventName==="click"){domEventHandler("click",triggerHandlers.bind(null,"dom"),true)(this)}if(eventName==="keypress"){keypressEventHandler(triggerHandlers.bind(null,"dom"))(this)}}return original.call(this,eventName,fn,options)}}));object_1.fill(proto,"removeEventListener",(function(original){return function(eventName,fn,options){try{original.call(this,eventName,fn.__sentry_wrapped__,options)}catch(e){}return original.call(this,eventName,fn,options)}}))}))}var debounceDuration=1e3;var debounceTimer=0;var keypressTimeout;var lastCapturedEvent;function domEventHandler(name,handler,debounce){if(debounce===void 0){debounce=false}return function(event){keypressTimeout=undefined;if(!event||lastCapturedEvent===event){return}lastCapturedEvent=event;if(debounceTimer){clearTimeout(debounceTimer)}if(debounce){debounceTimer=setTimeout((function(){handler({event:event,name:name})}))}else{handler({event:event,name:name})}}}function keypressEventHandler(handler){return function(event){var target;try{target=event.target}catch(e){return}var tagName=target&&target.tagName;if(!tagName||tagName!=="INPUT"&&tagName!=="TEXTAREA"&&!target.isContentEditable){return}if(!keypressTimeout){domEventHandler("input",handler)(event)}clearTimeout(keypressTimeout);keypressTimeout=setTimeout((function(){keypressTimeout=undefined}),debounceDuration)}}var _oldOnErrorHandler=null;function instrumentError(){_oldOnErrorHandler=global.onerror;global.onerror=function(msg,url,line,column,error){triggerHandlers("error",{column:column,error:error,line:line,msg:msg,url:url});if(_oldOnErrorHandler){return _oldOnErrorHandler.apply(this,arguments)}return false}}var _oldOnUnhandledRejectionHandler=null;function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=global.onunhandledrejection;global.onunhandledrejection=function(e){triggerHandlers("unhandledrejection",e);if(_oldOnUnhandledRejectionHandler){return _oldOnUnhandledRejectionHandler.apply(this,arguments)}return true}}},{"./is":50,"./logger":51,"./misc":53,"./object":55,"./stacktrace":59,"./supports":61,tslib:173}],50:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});function isError(wat){switch(Object.prototype.toString.call(wat)){case"[object Error]":return true;case"[object Exception]":return true;case"[object DOMException]":return true;default:return isInstanceOf(wat,Error)}}exports.isError=isError;function isErrorEvent(wat){return Object.prototype.toString.call(wat)==="[object ErrorEvent]"}exports.isErrorEvent=isErrorEvent;function isDOMError(wat){return Object.prototype.toString.call(wat)==="[object DOMError]"}exports.isDOMError=isDOMError;function isDOMException(wat){return Object.prototype.toString.call(wat)==="[object DOMException]"}exports.isDOMException=isDOMException;function isString(wat){return Object.prototype.toString.call(wat)==="[object String]"}exports.isString=isString;function isPrimitive(wat){return wat===null||typeof wat!=="object"&&typeof wat!=="function"}exports.isPrimitive=isPrimitive;function isPlainObject(wat){return Object.prototype.toString.call(wat)==="[object Object]"}exports.isPlainObject=isPlainObject;function isEvent(wat){return typeof Event!=="undefined"&&isInstanceOf(wat,Event)}exports.isEvent=isEvent;function isElement(wat){return typeof Element!=="undefined"&&isInstanceOf(wat,Element)}exports.isElement=isElement;function isRegExp(wat){return Object.prototype.toString.call(wat)==="[object RegExp]"}exports.isRegExp=isRegExp;function isThenable(wat){return Boolean(wat&&wat.then&&typeof wat.then==="function")}exports.isThenable=isThenable;function isSyntheticEvent(wat){return isPlainObject(wat)&&"nativeEvent"in wat&&"preventDefault"in wat&&"stopPropagation"in wat}exports.isSyntheticEvent=isSyntheticEvent;function isInstanceOf(wat,base){try{return wat instanceof base}catch(_e){return false}}exports.isInstanceOf=isInstanceOf},{}],51:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var misc_1=require("./misc");var global=misc_1.getGlobalObject();var PREFIX="Sentry Logger ";var Logger=function(){function Logger(){this._enabled=false}Logger.prototype.disable=function(){this._enabled=false};Logger.prototype.enable=function(){this._enabled=true};Logger.prototype.log=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(!this._enabled){return}misc_1.consoleSandbox((function(){global.console.log(PREFIX+"[Log]: "+args.join(" "))}))};Logger.prototype.warn=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(!this._enabled){return}misc_1.consoleSandbox((function(){global.console.warn(PREFIX+"[Warn]: "+args.join(" "))}))};Logger.prototype.error=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(!this._enabled){return}misc_1.consoleSandbox((function(){global.console.error(PREFIX+"[Error]: "+args.join(" "))}))};return Logger}();global.__SENTRY__=global.__SENTRY__||{};var logger=global.__SENTRY__.logger||(global.__SENTRY__.logger=new Logger);exports.logger=logger},{"./misc":53}],52:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var Memo=function(){function Memo(){this._hasWeakSet=typeof WeakSet==="function";this._inner=this._hasWeakSet?new WeakSet:[]}Memo.prototype.memoize=function(obj){if(this._hasWeakSet){if(this._inner.has(obj)){return true}this._inner.add(obj);return false}for(var i=0;i<this._inner.length;i++){var value=this._inner[i];if(value===obj){return true}}this._inner.push(obj);return false};Memo.prototype.unmemoize=function(obj){if(this._hasWeakSet){this._inner.delete(obj)}else{for(var i=0;i<this._inner.length;i++){if(this._inner[i]===obj){this._inner.splice(i,1);break}}}};return Memo}();exports.Memo=Memo},{}],53:[function(require,module,exports){(function(global){(function(){Object.defineProperty(exports,"__esModule",{value:true});var node_1=require("./node");var string_1=require("./string");var fallbackGlobalObject={};function getGlobalObject(){return node_1.isNodeEnv()?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:fallbackGlobalObject}exports.getGlobalObject=getGlobalObject;function uuid4(){var global=getGlobalObject();var crypto=global.crypto||global.msCrypto;if(!(crypto===void 0)&&crypto.getRandomValues){var arr=new Uint16Array(8);crypto.getRandomValues(arr);arr[3]=arr[3]&4095|16384;arr[4]=arr[4]&16383|32768;var pad=function(num){var v=num.toString(16);while(v.length<4){v="0"+v}return v};return pad(arr[0])+pad(arr[1])+pad(arr[2])+pad(arr[3])+pad(arr[4])+pad(arr[5])+pad(arr[6])+pad(arr[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=Math.random()*16|0;var v=c==="x"?r:r&3|8;return v.toString(16)}))}exports.uuid4=uuid4;function parseUrl(url){if(!url){return{}}var match=url.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!match){return{}}var query=match[6]||"";var fragment=match[8]||"";return{host:match[4],path:match[5],protocol:match[2],relative:match[5]+query+fragment}}exports.parseUrl=parseUrl;function getEventDescription(event){if(event.message){return event.message}if(event.exception&&event.exception.values&&event.exception.values[0]){var exception=event.exception.values[0];if(exception.type&&exception.value){return exception.type+": "+exception.value}return exception.type||exception.value||event.event_id||"<unknown>"}return event.event_id||"<unknown>"}exports.getEventDescription=getEventDescription;function consoleSandbox(callback){var global=getGlobalObject();var levels=["debug","info","warn","error","log","assert"];if(!("console"in global)){return callback()}var originalConsole=global.console;var wrappedLevels={};levels.forEach((function(level){if(level in global.console&&originalConsole[level].__sentry_original__){wrappedLevels[level]=originalConsole[level];originalConsole[level]=originalConsole[level].__sentry_original__}}));var result=callback();Object.keys(wrappedLevels).forEach((function(level){originalConsole[level]=wrappedLevels[level]}));return result}exports.consoleSandbox=consoleSandbox;function addExceptionTypeValue(event,value,type){event.exception=event.exception||{};event.exception.values=event.exception.values||[];event.exception.values[0]=event.exception.values[0]||{};event.exception.values[0].value=event.exception.values[0].value||value||"";event.exception.values[0].type=event.exception.values[0].type||type||"Error"}exports.addExceptionTypeValue=addExceptionTypeValue;function addExceptionMechanism(event,mechanism){if(mechanism===void 0){mechanism={}}try{event.exception.values[0].mechanism=event.exception.values[0].mechanism||{};Object.keys(mechanism).forEach((function(key){event.exception.values[0].mechanism[key]=mechanism[key]}))}catch(_oO){}}exports.addExceptionMechanism=addExceptionMechanism;function getLocationHref(){try{return document.location.href}catch(oO){return""}}exports.getLocationHref=getLocationHref;var SEMVER_REGEXP=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function parseSemver(input){var match=input.match(SEMVER_REGEXP)||[];var major=parseInt(match[1],10);var minor=parseInt(match[2],10);var patch=parseInt(match[3],10);return{buildmetadata:match[5],major:isNaN(major)?undefined:major,minor:isNaN(minor)?undefined:minor,patch:isNaN(patch)?undefined:patch,prerelease:match[4]}}exports.parseSemver=parseSemver;var defaultRetryAfter=60*1e3;function parseRetryAfterHeader(now,header){if(!header){return defaultRetryAfter}var headerDelay=parseInt(""+header,10);if(!isNaN(headerDelay)){return headerDelay*1e3}var headerDate=Date.parse(""+header);if(!isNaN(headerDate)){return headerDate-now}return defaultRetryAfter}exports.parseRetryAfterHeader=parseRetryAfterHeader;function addContextToFrame(lines,frame,linesOfContext){if(linesOfContext===void 0){linesOfContext=5}var lineno=frame.lineno||0;var maxLines=lines.length;var sourceLine=Math.max(Math.min(maxLines,lineno-1),0);frame.pre_context=lines.slice(Math.max(0,sourceLine-linesOfContext),sourceLine).map((function(line){return string_1.snipLine(line,0)}));frame.context_line=string_1.snipLine(lines[Math.min(maxLines-1,sourceLine)],frame.colno||0);frame.post_context=lines.slice(Math.min(sourceLine+1,maxLines),sourceLine+1+linesOfContext).map((function(line){return string_1.snipLine(line,0)}))}exports.addContextToFrame=addContextToFrame;function stripUrlQueryAndFragment(urlPath){return urlPath.split(/[\?#]/,1)[0]}exports.stripUrlQueryAndFragment=stripUrlQueryAndFragment}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./node":54,"./string":60}],54:[function(require,module,exports){(function(process){(function(){Object.defineProperty(exports,"__esModule",{value:true});var is_1=require("./is");var object_1=require("./object");function isNodeEnv(){return Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"}exports.isNodeEnv=isNodeEnv;function dynamicRequire(mod,request){return mod.require(request)}exports.dynamicRequire=dynamicRequire;var DEFAULT_REQUEST_KEYS=["cookies","data","headers","method","query_string","url"];function extractNodeRequestData(req,keys){if(keys===void 0){keys=DEFAULT_REQUEST_KEYS}if(!isNodeEnv()){throw new Error("Can't get node request data outside of a node environment")}var requestData={};var headers=req.headers||req.header||{};var method=req.method;var host=req.hostname||req.host||headers.host||"<no host>";var protocol=req.protocol==="https"||req.secure||(req.socket||{}).encrypted?"https":"http";var originalUrl=req.originalUrl||req.url||"";var absoluteUrl=protocol+"://"+host+originalUrl;keys.forEach((function(key){switch(key){case"headers":requestData.headers=headers;break;case"method":requestData.method=method;break;case"url":requestData.url=absoluteUrl;break;case"cookies":requestData.cookies=req.cookies||dynamicRequire(module,"cookie").parse(headers.cookie||"");break;case"query_string":requestData.query_string=dynamicRequire(module,"url").parse(originalUrl||"",false).query;break;case"data":if(method==="GET"||method==="HEAD"){break}if(req.body!==undefined){requestData.data=is_1.isString(req.body)?req.body:JSON.stringify(object_1.normalize(req.body))}break;default:if({}.hasOwnProperty.call(req,key)){requestData[key]=req[key]}}}));return requestData}exports.extractNodeRequestData=extractNodeRequestData}).call(this)}).call(this,require("_process"))},{"./is":50,"./object":55,_process:171}],55:[function(require,module,exports){(function(global){(function(){Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var browser_1=require("./browser");var is_1=require("./is");var memo_1=require("./memo");var stacktrace_1=require("./stacktrace");var string_1=require("./string");function fill(source,name,replacement){if(!(name in source)){return}var original=source[name];var wrapped=replacement(original);if(typeof wrapped==="function"){try{wrapped.prototype=wrapped.prototype||{};Object.defineProperties(wrapped,{__sentry_original__:{enumerable:false,value:original}})}catch(_Oo){}}source[name]=wrapped}exports.fill=fill;function urlEncode(object){return Object.keys(object).map((function(key){return encodeURIComponent(key)+"="+encodeURIComponent(object[key])})).join("&")}exports.urlEncode=urlEncode;function getWalkSource(value){if(is_1.isError(value)){var error=value;var err={message:error.message,name:error.name,stack:error.stack};for(var i in error){if(Object.prototype.hasOwnProperty.call(error,i)){err[i]=error[i]}}return err}if(is_1.isEvent(value)){var event_1=value;var source={};source.type=event_1.type;try{source.target=is_1.isElement(event_1.target)?browser_1.htmlTreeAsString(event_1.target):Object.prototype.toString.call(event_1.target)}catch(_oO){source.target="<unknown>"}try{source.currentTarget=is_1.isElement(event_1.currentTarget)?browser_1.htmlTreeAsString(event_1.currentTarget):Object.prototype.toString.call(event_1.currentTarget)}catch(_oO){source.currentTarget="<unknown>"}if(typeof CustomEvent!=="undefined"&&is_1.isInstanceOf(value,CustomEvent)){source.detail=event_1.detail}for(var i in event_1){if(Object.prototype.hasOwnProperty.call(event_1,i)){source[i]=event_1}}return source}return value}function utf8Length(value){return~-encodeURI(value).split(/%..|./).length}function jsonSize(value){return utf8Length(JSON.stringify(value))}function normalizeToSize(object,depth,maxSize){if(depth===void 0){depth=3}if(maxSize===void 0){maxSize=100*1024}var serialized=normalize(object,depth);if(jsonSize(serialized)>maxSize){return normalizeToSize(object,depth-1,maxSize)}return serialized}exports.normalizeToSize=normalizeToSize;function serializeValue(value){var type=Object.prototype.toString.call(value);if(typeof value==="string"){return value}if(type==="[object Object]"){return"[Object]"}if(type==="[object Array]"){return"[Array]"}var normalized=normalizeValue(value);return is_1.isPrimitive(normalized)?normalized:type}function normalizeValue(value,key){if(key==="domain"&&value&&typeof value==="object"&&value._events){return"[Domain]"}if(key==="domainEmitter"){return"[DomainEmitter]"}if(typeof global!=="undefined"&&value===global){return"[Global]"}if(typeof window!=="undefined"&&value===window){return"[Window]"}if(typeof document!=="undefined"&&value===document){return"[Document]"}if(is_1.isSyntheticEvent(value)){return"[SyntheticEvent]"}if(typeof value==="number"&&value!==value){return"[NaN]"}if(value===void 0){return"[undefined]"}if(typeof value==="function"){return"[Function: "+stacktrace_1.getFunctionName(value)+"]"}if(typeof value==="symbol"){return"["+String(value)+"]"}if(typeof value==="bigint"){return"[BigInt: "+String(value)+"]"}return value}function walk(key,value,depth,memo){if(depth===void 0){depth=+Infinity}if(memo===void 0){memo=new memo_1.Memo}if(depth===0){return serializeValue(value)}if(value!==null&&value!==undefined&&typeof value.toJSON==="function"){return value.toJSON()}var normalized=normalizeValue(value,key);if(is_1.isPrimitive(normalized)){return normalized}var source=getWalkSource(value);var acc=Array.isArray(value)?[]:{};if(memo.memoize(value)){return"[Circular ~]"}for(var innerKey in source){if(!Object.prototype.hasOwnProperty.call(source,innerKey)){continue}acc[innerKey]=walk(innerKey,source[innerKey],depth-1,memo)}memo.unmemoize(value);return acc}exports.walk=walk;function normalize(input,depth){try{return JSON.parse(JSON.stringify(input,(function(key,value){return walk(key,value,depth)})))}catch(_oO){return"**non-serializable**"}}exports.normalize=normalize;function extractExceptionKeysForMessage(exception,maxLength){if(maxLength===void 0){maxLength=40}var keys=Object.keys(getWalkSource(exception));keys.sort();if(!keys.length){return"[object has no keys]"}if(keys[0].length>=maxLength){return string_1.truncate(keys[0],maxLength)}for(var includedKeys=keys.length;includedKeys>0;includedKeys--){var serialized=keys.slice(0,includedKeys).join(", ");if(serialized.length>maxLength){continue}if(includedKeys===keys.length){return serialized}return string_1.truncate(serialized,maxLength)}return""}exports.extractExceptionKeysForMessage=extractExceptionKeysForMessage;function dropUndefinedKeys(val){var e_1,_a;if(is_1.isPlainObject(val)){var obj=val;var rv={};try{for(var _b=tslib_1.__values(Object.keys(obj)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;if(typeof obj[key]!=="undefined"){rv[key]=dropUndefinedKeys(obj[key])}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}return rv}if(Array.isArray(val)){return val.map(dropUndefinedKeys)}return val}exports.dropUndefinedKeys=dropUndefinedKeys}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./browser":45,"./is":50,"./memo":52,"./stacktrace":59,"./string":60,tslib:173}],56:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function splitPath(filename){var parts=splitPathRe.exec(filename);return parts?parts.slice(1):[]}function resolve(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var resolvedPath="";var resolvedAbsolute=false;for(var i=args.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?args[i]:"/";if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(resolvedPath.split("/").filter((function(p){return!!p})),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."}exports.resolve=resolve;function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!==""){break}}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!==""){break}}if(start>end){return[]}return arr.slice(start,end-start+1)}function relative(from,to){from=resolve(from).substr(1);to=resolve(to).substr(1);var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}exports.relative=relative;function normalizePath(path){var isPathAbsolute=isAbsolute(path);var trailingSlash=path.substr(-1)==="/";var normalizedPath=normalizeArray(path.split("/").filter((function(p){return!!p})),!isPathAbsolute).join("/");if(!normalizedPath&&!isPathAbsolute){normalizedPath="."}if(normalizedPath&&trailingSlash){normalizedPath+="/"}return(isPathAbsolute?"/":"")+normalizedPath}exports.normalizePath=normalizePath;function isAbsolute(path){return path.charAt(0)==="/"}exports.isAbsolute=isAbsolute;function join(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return normalizePath(args.join("/"))}exports.join=join;function dirname(path){var result=splitPath(path);var root=result[0];var dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir}exports.dirname=dirname;function basename(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(ext.length*-1)===ext){f=f.substr(0,f.length-ext.length)}return f}exports.basename=basename},{}],57:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(obj,proto){obj.__proto__=proto;return obj}function mixinProperties(obj,proto){for(var prop in proto){if(!obj.hasOwnProperty(prop)){obj[prop]=proto[prop]}}return obj}},{}],58:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var error_1=require("./error");var syncpromise_1=require("./syncpromise");var PromiseBuffer=function(){function PromiseBuffer(_limit){this._limit=_limit;this._buffer=[]}PromiseBuffer.prototype.isReady=function(){return this._limit===undefined||this.length()<this._limit};PromiseBuffer.prototype.add=function(task){var _this=this;if(!this.isReady()){return syncpromise_1.SyncPromise.reject(new error_1.SentryError("Not adding Promise due to buffer limit reached."))}if(this._buffer.indexOf(task)===-1){this._buffer.push(task)}task.then((function(){return _this.remove(task)})).then(null,(function(){return _this.remove(task).then(null,(function(){}))}));return task};PromiseBuffer.prototype.remove=function(task){var removedTask=this._buffer.splice(this._buffer.indexOf(task),1)[0];return removedTask};PromiseBuffer.prototype.length=function(){return this._buffer.length};PromiseBuffer.prototype.drain=function(timeout){var _this=this;return new syncpromise_1.SyncPromise((function(resolve){var capturedSetTimeout=setTimeout((function(){if(timeout&&timeout>0){resolve(false)}}),timeout);syncpromise_1.SyncPromise.all(_this._buffer).then((function(){clearTimeout(capturedSetTimeout);resolve(true)})).then(null,(function(){resolve(true)}))}))};return PromiseBuffer}();exports.PromiseBuffer=PromiseBuffer},{"./error":47,"./syncpromise":62}],59:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var defaultFunctionName="<anonymous>";function getFunctionName(fn){try{if(!fn||typeof fn!=="function"){return defaultFunctionName}return fn.name||defaultFunctionName}catch(e){return defaultFunctionName}}exports.getFunctionName=getFunctionName},{}],60:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var is_1=require("./is");function truncate(str,max){if(max===void 0){max=0}if(typeof str!=="string"||max===0){return str}return str.length<=max?str:str.substr(0,max)+"..."}exports.truncate=truncate;function snipLine(line,colno){var newLine=line;var ll=newLine.length;if(ll<=150){return newLine}if(colno>ll){colno=ll}var start=Math.max(colno-60,0);if(start<5){start=0}var end=Math.min(start+140,ll);if(end>ll-5){end=ll}if(end===ll){start=Math.max(end-140,0)}newLine=newLine.slice(start,end);if(start>0){newLine="'{snip} "+newLine}if(end<ll){newLine+=" {snip}"}return newLine}exports.snipLine=snipLine;function safeJoin(input,delimiter){if(!Array.isArray(input)){return""}var output=[];for(var i=0;i<input.length;i++){var value=input[i];try{output.push(String(value))}catch(e){output.push("[value cannot be serialized]")}}return output.join(delimiter)}exports.safeJoin=safeJoin;function isMatchingPattern(value,pattern){if(!is_1.isString(value)){return false}if(is_1.isRegExp(pattern)){return pattern.test(value)}if(typeof pattern==="string"){return value.indexOf(pattern)!==-1}return false}exports.isMatchingPattern=isMatchingPattern},{"./is":50}],61:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var logger_1=require("./logger");var misc_1=require("./misc");function supportsErrorEvent(){try{new ErrorEvent("");return true}catch(e){return false}}exports.supportsErrorEvent=supportsErrorEvent;function supportsDOMError(){try{new DOMError("");return true}catch(e){return false}}exports.supportsDOMError=supportsDOMError;function supportsDOMException(){try{new DOMException("");return true}catch(e){return false}}exports.supportsDOMException=supportsDOMException;function supportsFetch(){if(!("fetch"in misc_1.getGlobalObject())){return false}try{new Headers;new Request("");new Response;return true}catch(e){return false}}exports.supportsFetch=supportsFetch;function isNativeFetch(func){return func&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(func.toString())}function supportsNativeFetch(){if(!supportsFetch()){return false}var global=misc_1.getGlobalObject();if(isNativeFetch(global.fetch)){return true}var result=false;var doc=global.document;if(doc&&typeof doc.createElement==="function"){try{var sandbox=doc.createElement("iframe");sandbox.hidden=true;doc.head.appendChild(sandbox);if(sandbox.contentWindow&&sandbox.contentWindow.fetch){result=isNativeFetch(sandbox.contentWindow.fetch)}doc.head.removeChild(sandbox)}catch(err){logger_1.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",err)}}return result}exports.supportsNativeFetch=supportsNativeFetch;function supportsReportingObserver(){return"ReportingObserver"in misc_1.getGlobalObject()}exports.supportsReportingObserver=supportsReportingObserver;function supportsReferrerPolicy(){if(!supportsFetch()){return false}try{new Request("_",{referrerPolicy:"origin"});return true}catch(e){return false}}exports.supportsReferrerPolicy=supportsReferrerPolicy;function supportsHistory(){var global=misc_1.getGlobalObject();var chrome=global.chrome;var isChromePackagedApp=chrome&&chrome.app&&chrome.app.runtime;var hasHistoryApi="history"in global&&!!global.history.pushState&&!!global.history.replaceState;return!isChromePackagedApp&&hasHistoryApi}exports.supportsHistory=supportsHistory},{"./logger":51,"./misc":53}],62:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var is_1=require("./is");var States;(function(States){States["PENDING"]="PENDING";States["RESOLVED"]="RESOLVED";States["REJECTED"]="REJECTED"})(States||(States={}));var SyncPromise=function(){function SyncPromise(executor){var _this=this;this._state=States.PENDING;this._handlers=[];this._resolve=function(value){_this._setResult(States.RESOLVED,value)};this._reject=function(reason){_this._setResult(States.REJECTED,reason)};this._setResult=function(state,value){if(_this._state!==States.PENDING){return}if(is_1.isThenable(value)){value.then(_this._resolve,_this._reject);return}_this._state=state;_this._value=value;_this._executeHandlers()};this._attachHandler=function(handler){_this._handlers=_this._handlers.concat(handler);_this._executeHandlers()};this._executeHandlers=function(){if(_this._state===States.PENDING){return}var cachedHandlers=_this._handlers.slice();_this._handlers=[];cachedHandlers.forEach((function(handler){if(handler.done){return}if(_this._state===States.RESOLVED){if(handler.onfulfilled){handler.onfulfilled(_this._value)}}if(_this._state===States.REJECTED){if(handler.onrejected){handler.onrejected(_this._value)}}handler.done=true}))};try{executor(this._resolve,this._reject)}catch(e){this._reject(e)}}SyncPromise.resolve=function(value){return new SyncPromise((function(resolve){resolve(value)}))};SyncPromise.reject=function(reason){return new SyncPromise((function(_,reject){reject(reason)}))};SyncPromise.all=function(collection){return new SyncPromise((function(resolve,reject){if(!Array.isArray(collection)){reject(new TypeError("Promise.all requires an array as input."));return}if(collection.length===0){resolve([]);return}var counter=collection.length;var resolvedCollection=[];collection.forEach((function(item,index){SyncPromise.resolve(item).then((function(value){resolvedCollection[index]=value;counter-=1;if(counter!==0){return}resolve(resolvedCollection)})).then(null,reject)}))}))};SyncPromise.prototype.then=function(onfulfilled,onrejected){var _this=this;return new SyncPromise((function(resolve,reject){_this._attachHandler({done:false,onfulfilled:function(result){if(!onfulfilled){resolve(result);return}try{resolve(onfulfilled(result));return}catch(e){reject(e);return}},onrejected:function(reason){if(!onrejected){reject(reason);return}try{resolve(onrejected(reason));return}catch(e){reject(e);return}}})}))};SyncPromise.prototype.catch=function(onrejected){return this.then((function(val){return val}),onrejected)};SyncPromise.prototype.finally=function(onfinally){var _this=this;return new SyncPromise((function(resolve,reject){var val;var isRejected;return _this.then((function(value){isRejected=false;val=value;if(onfinally){onfinally()}}),(function(reason){isRejected=true;val=reason;if(onfinally){onfinally()}})).then((function(){if(isRejected){reject(val);return}resolve(val)}))}))};SyncPromise.prototype.toString=function(){return"[object SyncPromise]"};return SyncPromise}();exports.SyncPromise=SyncPromise},{"./is":50}],63:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var misc_1=require("./misc");var node_1=require("./node");var dateTimestampSource={nowSeconds:function(){return Date.now()/1e3}};function getBrowserPerformance(){var performance=misc_1.getGlobalObject().performance;if(!performance||!performance.now){return undefined}var timeOrigin=Date.now()-performance.now();return{now:function(){return performance.now()},timeOrigin:timeOrigin}}function getNodePerformance(){try{var perfHooks=node_1.dynamicRequire(module,"perf_hooks");return perfHooks.performance}catch(_){return undefined}}var platformPerformance=node_1.isNodeEnv()?getNodePerformance():getBrowserPerformance();var timestampSource=platformPerformance===undefined?dateTimestampSource:{nowSeconds:function(){return(platformPerformance.timeOrigin+platformPerformance.now())/1e3}};exports.dateTimestampInSeconds=dateTimestampSource.nowSeconds.bind(dateTimestampSource);exports.timestampInSeconds=timestampSource.nowSeconds.bind(timestampSource);exports.timestampWithMs=exports.timestampInSeconds;exports.usingPerformanceAPI=platformPerformance!==undefined;exports.browserPerformanceTimeOrigin=function(){var performance=misc_1.getGlobalObject().performance;if(!performance){return undefined}if(performance.timeOrigin){return performance.timeOrigin}return performance.timing&&performance.timing.navigationStart||Date.now()}()},{"./misc":53,"./node":54}],64:[function(require,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],65:[function(require,module,exports){var UNSCOPABLES=require("./_wks")("unscopables");var ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)require("./_hide")(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true}},{"./_hide":92,"./_wks":151}],66:[function(require,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+": incorrect invocation!")}return it}},{}],67:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":100}],68:[function(require,module,exports){var toIObject=require("./_to-iobject");var toLength=require("./_to-length");var toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true}else for(;length>index;index++)if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0}return!IS_INCLUDES&&-1}}},{"./_to-absolute-index":140,"./_to-iobject":142,"./_to-length":143}],69:[function(require,module,exports){var ctx=require("./_ctx");var IObject=require("./_iobject");var toObject=require("./_to-object");var toLength=require("./_to-length");var asc=require("./_array-species-create");module.exports=function(TYPE,$create){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=$create||asc;return function($this,callbackfn,that){var O=toObject($this);var self=IObject(O);var f=ctx(callbackfn,that,3);var length=toLength(self.length);var index=0;var result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var val,res;for(;length>index;index++)if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return true;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return false}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{"./_array-species-create":71,"./_ctx":78,"./_iobject":97,"./_to-length":143,"./_to-object":144}],70:[function(require,module,exports){var isObject=require("./_is-object");var isArray=require("./_is-array");var SPECIES=require("./_wks")("species");module.exports=function(original){var C;if(isArray(original)){C=original.constructor;if(typeof C=="function"&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined}}return C===undefined?Array:C}},{"./_is-array":99,"./_is-object":100,"./_wks":151}],71:[function(require,module,exports){var speciesConstructor=require("./_array-species-constructor");module.exports=function(original,length){return new(speciesConstructor(original))(length)}},{"./_array-species-constructor":70}],72:[function(require,module,exports){var cof=require("./_cof");var TAG=require("./_wks")("toStringTag");var ARG=cof(function(){return arguments}())=="Arguments";var tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=tryGet(O=Object(it),TAG))=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},{"./_cof":73,"./_wks":151}],73:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],74:[function(require,module,exports){"use strict";var redefineAll=require("./_redefine-all");var getWeak=require("./_meta").getWeak;var anObject=require("./_an-object");var isObject=require("./_is-object");var anInstance=require("./_an-instance");var forOf=require("./_for-of");var createArrayMethod=require("./_array-methods");var $has=require("./_has");var validate=require("./_validate-collection");var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var id=0;var uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore)};var UncaughtFrozenStore=function(){this.a=[]};var findUncaughtFrozen=function(store,key){return arrayFind(store.a,(function(it){return it[0]===key}))};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value])},delete:function(key){var index=arrayFindIndex(this.a,(function(it){return it[0]===key}));if(~index)this.a.splice(index,1);return!!~index}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper((function(that,iterable){anInstance(that,C,NAME,"_i");that._t=NAME;that._i=id++;that._l=undefined;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)}));redefineAll(C.prototype,{delete:function(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME))["delete"](key);return data&&$has(data,this._i)&&delete data[this._i]},has:function has(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME)).has(key);return data&&$has(data,this._i)}});return C},def:function(that,key,value){var data=getWeak(anObject(key),true);if(data===true)uncaughtFrozenStore(that).set(key,value);else data[that._i]=value;return that},ufstore:uncaughtFrozenStore}},{"./_an-instance":66,"./_an-object":67,"./_array-methods":69,"./_for-of":88,"./_has":91,"./_is-object":100,"./_meta":109,"./_redefine-all":128,"./_validate-collection":148}],75:[function(require,module,exports){"use strict";var global=require("./_global");var $export=require("./_export");var redefine=require("./_redefine");var redefineAll=require("./_redefine-all");var meta=require("./_meta");var forOf=require("./_for-of");var anInstance=require("./_an-instance");var isObject=require("./_is-object");var fails=require("./_fails");var $iterDetect=require("./_iter-detect");var setToStringTag=require("./_set-to-string-tag");var inheritIfRequired=require("./_inherit-if-required");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME];var C=Base;var ADDER=IS_MAP?"set":"add";var proto=C&&C.prototype;var O={};var fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=="delete"?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="has"?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="get"?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a)}:KEY=="add"?function add(a){fn.call(this,a===0?0:a);return this}:function set(a,b){fn.call(this,a===0?0:a,b);return this})};if(typeof C!="function"||!(IS_WEAK||proto.forEach&&!fails((function(){(new C).entries().next()})))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods);meta.NEED=true}else{var instance=new C;var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;var THROWS_ON_PRIMITIVES=fails((function(){instance.has(1)}));var ACCEPT_ITERABLES=$iterDetect((function(iter){new C(iter)}));var BUGGY_ZERO=!IS_WEAK&&fails((function(){var $instance=new C;var index=5;while(index--)$instance[ADDER](index,index);return!$instance.has(-0)}));if(!ACCEPT_ITERABLES){C=wrapper((function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that}));C.prototype=proto;proto.constructor=C}if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C}},{"./_an-instance":66,"./_export":84,"./_fails":86,"./_for-of":88,"./_global":90,"./_inherit-if-required":95,"./_is-object":100,"./_iter-detect":105,"./_meta":109,"./_redefine":129,"./_redefine-all":128,"./_set-to-string-tag":132}],76:[function(require,module,exports){var core=module.exports={version:"2.6.12"};if(typeof __e=="number")__e=core},{}],77:[function(require,module,exports){"use strict";var $defineProperty=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value}},{"./_object-dp":114,"./_property-desc":127}],78:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":64}],79:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],80:[function(require,module,exports){module.exports=!require("./_fails")((function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}))},{"./_fails":86}],81:[function(require,module,exports){var isObject=require("./_is-object");var document=require("./_global").document;var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":90,"./_is-object":100}],82:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],83:[function(require,module,exports){var getKeys=require("./_object-keys");var gOPS=require("./_object-gops");var pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))result.push(key)}return result}},{"./_object-gops":119,"./_object-keys":122,"./_object-pie":123}],84:[function(require,module,exports){var global=require("./_global");var core=require("./_core");var hide=require("./_hide");var redefine=require("./_redefine");var ctx=require("./_ctx");var PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE];var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});var key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&target[key]!==undefined;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(target)redefine(target,key,out,type&$export.U);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};global.core=core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;$export.U=64;$export.R=128;module.exports=$export},{"./_core":76,"./_ctx":78,"./_global":90,"./_hide":92,"./_redefine":129}],85:[function(require,module,exports){var MATCH=require("./_wks")("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{re[MATCH]=false;return!"/./"[KEY](re)}catch(f){}}return true}},{"./_wks":151}],86:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],87:[function(require,module,exports){"use strict";var anObject=require("./_an-object");module.exports=function(){var that=anObject(this);var result="";if(that.global)result+="g";if(that.ignoreCase)result+="i";if(that.multiline)result+="m";if(that.unicode)result+="u";if(that.sticky)result+="y";return result}},{"./_an-object":67}],88:[function(require,module,exports){var ctx=require("./_ctx");var call=require("./_iter-call");var isArrayIter=require("./_is-array-iter");var anObject=require("./_an-object");var toLength=require("./_to-length");var getIterFn=require("./core.get-iterator-method");var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable);var f=ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result}};exports.BREAK=BREAK;exports.RETURN=RETURN},{"./_an-object":67,"./_ctx":78,"./_is-array-iter":98,"./_iter-call":102,"./_to-length":143,"./core.get-iterator-method":152}],89:[function(require,module,exports){module.exports=require("./_shared")("native-function-to-string",Function.toString)},{"./_shared":134}],90:[function(require,module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],91:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],92:[function(require,module,exports){var dP=require("./_object-dp");var createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},{"./_descriptors":80,"./_object-dp":114,"./_property-desc":127}],93:[function(require,module,exports){var document=require("./_global").document;module.exports=document&&document.documentElement},{"./_global":90}],94:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")((function(){return Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a!=7}))},{"./_descriptors":80,"./_dom-create":81,"./_fails":86}],95:[function(require,module,exports){var isObject=require("./_is-object");var setPrototypeOf=require("./_set-proto").set;module.exports=function(that,target,C){var S=target.constructor;var P;if(S!==C&&typeof S=="function"&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf){setPrototypeOf(that,P)}return that}},{"./_is-object":100,"./_set-proto":130}],96:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],97:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./_cof":73}],98:[function(require,module,exports){var Iterators=require("./_iterators");var ITERATOR=require("./_wks")("iterator");var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":107,"./_wks":151}],99:[function(require,module,exports){var cof=require("./_cof");module.exports=Array.isArray||function isArray(arg){return cof(arg)=="Array"}},{"./_cof":73}],100:[function(require,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],101:[function(require,module,exports){var isObject=require("./_is-object");var cof=require("./_cof");var MATCH=require("./_wks")("match");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:cof(it)=="RegExp")}},{"./_cof":73,"./_is-object":100,"./_wks":151}],102:[function(require,module,exports){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},{"./_an-object":67}],103:[function(require,module,exports){"use strict";var create=require("./_object-create");var descriptor=require("./_property-desc");var setToStringTag=require("./_set-to-string-tag");var IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),(function(){return this}));module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":92,"./_object-create":113,"./_property-desc":127,"./_set-to-string-tag":132,"./_wks":151}],104:[function(require,module,exports){"use strict";var LIBRARY=require("./_library");var $export=require("./_export");var redefine=require("./_redefine");var hide=require("./_hide");var Iterators=require("./_iterators");var $iterCreate=require("./_iter-create");var setToStringTag=require("./_set-to-string-tag");var getPrototypeOf=require("./_object-gpo");var ITERATOR=require("./_wks")("iterator");var BUGGY=!([].keys&&"next"in[].keys());var FF_ITERATOR="@@iterator";var KEYS="keys";var VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator";var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod("entries"):undefined;var $anyNative=NAME=="Array"?proto.entries||$native:$native;var methods,key,IteratorPrototype;if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&typeof IteratorPrototype[ITERATOR]!="function")hide(IteratorPrototype,ITERATOR,returnThis)}}if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},{"./_export":84,"./_hide":92,"./_iter-create":103,"./_iterators":107,"./_library":108,"./_object-gpo":120,"./_redefine":129,"./_set-to-string-tag":132,"./_wks":151}],105:[function(require,module,exports){var ITERATOR=require("./_wks")("iterator");var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,(function(){throw 2}))}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true}};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},{"./_wks":151}],106:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],107:[function(require,module,exports){module.exports={}},{}],108:[function(require,module,exports){module.exports=false},{}],109:[function(require,module,exports){var META=require("./_uid")("meta");var isObject=require("./_is-object");var has=require("./_has");var setDesc=require("./_object-dp").f;var id=0;var isExtensible=Object.isExtensible||function(){return true};var FREEZE=!require("./_fails")((function(){return isExtensible(Object.preventExtensions({}))}));var setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})};var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i};var getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return true;if(!create)return false;setMeta(it)}return it[META].w};var onFreeze=function(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},{"./_fails":86,"./_has":91,"./_is-object":100,"./_object-dp":114,"./_uid":146}],110:[function(require,module,exports){var global=require("./_global");var macrotask=require("./_task").set;var Observer=global.MutationObserver||global.WebKitMutationObserver;var process=global.process;var Promise=global.Promise;var isNode=require("./_cof")(process)=="process";module.exports=function(){var head,last,notify;var flush=function(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn()}catch(e){if(head)notify();else last=undefined;throw e}}last=undefined;if(parent)parent.enter()};if(isNode){notify=function(){process.nextTick(flush)}}else if(Observer&&!(global.navigator&&global.navigator.standalone)){var toggle=true;var node=document.createTextNode("");new Observer(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve(undefined);notify=function(){promise.then(flush)}}else{notify=function(){macrotask.call(global,flush)}}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify()}last=task}}},{"./_cof":73,"./_global":90,"./_task":139}],111:[function(require,module,exports){"use strict";var aFunction=require("./_a-function");function PromiseCapability(C){var resolve,reject;this.promise=new C((function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve;reject=$$reject}));this.resolve=aFunction(resolve);this.reject=aFunction(reject)}module.exports.f=function(C){return new PromiseCapability(C)}},{"./_a-function":64}],112:[function(require,module,exports){"use strict";var DESCRIPTORS=require("./_descriptors");var getKeys=require("./_object-keys");var gOPS=require("./_object-gops");var pIE=require("./_object-pie");var toObject=require("./_to-object");var IObject=require("./_iobject");var $assign=Object.assign;module.exports=!$assign||require("./_fails")((function(){var A={};var B={};var S=Symbol();var K="abcdefghijklmnopqrst";A[S]=7;K.split("").forEach((function(k){B[k]=k}));return $assign({},A)[S]!=7||Object.keys($assign({},B)).join("")!=K}))?function assign(target,source){var T=toObject(target);var aLen=arguments.length;var index=1;var getSymbols=gOPS.f;var isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]);var keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S);var length=keys.length;var j=0;var key;while(length>j){key=keys[j++];if(!DESCRIPTORS||isEnum.call(S,key))T[key]=S[key]}}return T}:$assign},{"./_descriptors":80,"./_fails":86,"./_iobject":97,"./_object-gops":119,"./_object-keys":122,"./_object-pie":123,"./_to-object":144}],113:[function(require,module,exports){var anObject=require("./_an-object");var dPs=require("./_object-dps");var enumBugKeys=require("./_enum-bug-keys");var IE_PROTO=require("./_shared-key")("IE_PROTO");var Empty=function(){};var PROTOTYPE="prototype";var createDict=function(){var iframe=require("./_dom-create")("iframe");var i=enumBugKeys.length;var lt="<";var gt=">";var iframeDocument;iframe.style.display="none";require("./_html").appendChild(iframe);iframe.src="javascript:";iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt);iframeDocument.close();createDict=iframeDocument.F;while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty;Empty[PROTOTYPE]=null;result[IE_PROTO]=O}else result=createDict();return Properties===undefined?result:dPs(result,Properties)}},{"./_an-object":67,"./_dom-create":81,"./_enum-bug-keys":82,"./_html":93,"./_object-dps":115,"./_shared-key":133}],114:[function(require,module,exports){var anObject=require("./_an-object");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var toPrimitive=require("./_to-primitive");var dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");if("value"in Attributes)O[P]=Attributes.value;return O}},{"./_an-object":67,"./_descriptors":80,"./_ie8-dom-define":94,"./_to-primitive":145}],115:[function(require,module,exports){var dP=require("./_object-dp");var anObject=require("./_an-object");var getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":67,"./_descriptors":80,"./_object-dp":114,"./_object-keys":122}],116:[function(require,module,exports){var pIE=require("./_object-pie");var createDesc=require("./_property-desc");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var has=require("./_has");var IE8_DOM_DEFINE=require("./_ie8-dom-define");var gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{"./_descriptors":80,"./_has":91,"./_ie8-dom-define":94,"./_object-pie":123,"./_property-desc":127,"./_to-iobject":142,"./_to-primitive":145}],117:[function(require,module,exports){var toIObject=require("./_to-iobject");var gOPN=require("./_object-gopn").f;var toString={}.toString;var windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=="[object Window]"?getWindowNames(it):gOPN(toIObject(it))}},{"./_object-gopn":118,"./_to-iobject":142}],118:[function(require,module,exports){var $keys=require("./_object-keys-internal");var hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":82,"./_object-keys-internal":121}],119:[function(require,module,exports){exports.f=Object.getOwnPropertySymbols},{}],120:[function(require,module,exports){var has=require("./_has");var toObject=require("./_to-object");var IE_PROTO=require("./_shared-key")("IE_PROTO");var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=="function"&&O instanceof O.constructor){return O.constructor.prototype}return O instanceof Object?ObjectProto:null}},{"./_has":91,"./_shared-key":133,"./_to-object":144}],121:[function(require,module,exports){var has=require("./_has");var toIObject=require("./_to-iobject");var arrayIndexOf=require("./_array-includes")(false);var IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O)if(key!=IE_PROTO)has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key)}return result}},{"./_array-includes":68,"./_has":91,"./_shared-key":133,"./_to-iobject":142}],122:[function(require,module,exports){var $keys=require("./_object-keys-internal");var enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":82,"./_object-keys-internal":121}],123:[function(require,module,exports){exports.f={}.propertyIsEnumerable},{}],124:[function(require,module,exports){var $export=require("./_export");var core=require("./_core");var fails=require("./_fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY];var exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails((function(){fn(1)})),"Object",exp)}},{"./_core":76,"./_export":84,"./_fails":86}],125:[function(require,module,exports){module.exports=function(exec){try{return{e:false,v:exec()}}catch(e){return{e:true,v:e}}}},{}],126:[function(require,module,exports){var anObject=require("./_an-object");var isObject=require("./_is-object");var newPromiseCapability=require("./_new-promise-capability");module.exports=function(C,x){anObject(C);if(isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise}},{"./_an-object":67,"./_is-object":100,"./_new-promise-capability":111}],127:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},{}],128:[function(require,module,exports){var redefine=require("./_redefine");module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},{"./_redefine":129}],129:[function(require,module,exports){var global=require("./_global");var hide=require("./_hide");var has=require("./_has");var SRC=require("./_uid")("src");var $toString=require("./_function-to-string");var TO_STRING="toString";var TPL=(""+$toString).split(TO_STRING);require("./_core").inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){var isFunction=typeof val=="function";if(isFunction)has(val,"name")||hide(val,"name",key);if(O[key]===val)return;if(isFunction)has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));if(O===global){O[key]=val}else if(!safe){delete O[key];hide(O,key,val)}else if(O[key]){O[key]=val}else{hide(O,key,val)}})(Function.prototype,TO_STRING,(function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)}))},{"./_core":76,"./_function-to-string":89,"./_global":90,"./_has":91,"./_hide":92,"./_uid":146}],130:[function(require,module,exports){var isObject=require("./_is-object");var anObject=require("./_an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./_an-object":67,"./_ctx":78,"./_is-object":100,"./_object-gopd":116}],131:[function(require,module,exports){"use strict";var global=require("./_global");var dP=require("./_object-dp");var DESCRIPTORS=require("./_descriptors");var SPECIES=require("./_wks")("species");module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function(){return this}})}},{"./_descriptors":80,"./_global":90,"./_object-dp":114,"./_wks":151}],132:[function(require,module,exports){var def=require("./_object-dp").f;var has=require("./_has");var TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},{"./_has":91,"./_object-dp":114,"./_wks":151}],133:[function(require,module,exports){var shared=require("./_shared")("keys");var uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":134,"./_uid":146}],134:[function(require,module,exports){var core=require("./_core");var global=require("./_global");var SHARED="__core-js_shared__";var store=global[SHARED]||(global[SHARED]={});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{})})("versions",[]).push({version:core.version,mode:require("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":76,"./_global":90,"./_library":108}],135:[function(require,module,exports){var anObject=require("./_an-object");var aFunction=require("./_a-function");var SPECIES=require("./_wks")("species");module.exports=function(O,D){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./_a-function":64,"./_an-object":67,"./_wks":151}],136:[function(require,module,exports){"use strict";var fails=require("./_fails");module.exports=function(method,arg){return!!method&&fails((function(){arg?method.call(null,(function(){}),1):method.call(null)}))}},{"./_fails":86}],137:[function(require,module,exports){var toInteger=require("./_to-integer");var defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},{"./_defined":79,"./_to-integer":141}],138:[function(require,module,exports){var isRegExp=require("./_is-regexp");var defined=require("./_defined");module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},{"./_defined":79,"./_is-regexp":101}],139:[function(require,module,exports){var ctx=require("./_ctx");var invoke=require("./_invoke");var html=require("./_html");var cel=require("./_dom-create");var global=require("./_global");var process=global.process;var setTask=global.setImmediate;var clearTask=global.clearImmediate;var MessageChannel=global.MessageChannel;var Dispatch=global.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE="onreadystatechange";var defer,channel,port;var run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn()}};var listener=function(event){run.call(event.data)};if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){invoke(typeof fn=="function"?fn:Function(fn),args)};defer(counter);return counter};clearTask=function clearImmediate(id){delete queue[id]};if(require("./_cof")(process)=="process"){defer=function(id){process.nextTick(ctx(run,id,1))}}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(ctx(run,id,1))}}else if(MessageChannel){channel=new MessageChannel;port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1)}else if(global.addEventListener&&typeof postMessage=="function"&&!global.importScripts){defer=function(id){global.postMessage(id+"","*")};global.addEventListener("message",listener,false)}else if(ONREADYSTATECHANGE in cel("script")){defer=function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id)}}}else{defer=function(id){setTimeout(ctx(run,id,1),0)}}}module.exports={set:setTask,clear:clearTask}},{"./_cof":73,"./_ctx":78,"./_dom-create":81,"./_global":90,"./_html":93,"./_invoke":96}],140:[function(require,module,exports){var toInteger=require("./_to-integer");var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length)}},{"./_to-integer":141}],141:[function(require,module,exports){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],142:[function(require,module,exports){var IObject=require("./_iobject");var defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":79,"./_iobject":97}],143:[function(require,module,exports){var toInteger=require("./_to-integer");var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":141}],144:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":79}],145:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=="function"&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=="function"&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":100}],146:[function(require,module,exports){var id=0;var px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],147:[function(require,module,exports){var global=require("./_global");var navigator=global.navigator;module.exports=navigator&&navigator.userAgent||""},{"./_global":90}],148:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required!");return it}},{"./_is-object":100}],149:[function(require,module,exports){var global=require("./_global");var core=require("./_core");var LIBRARY=require("./_library");var wksExt=require("./_wks-ext");var defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!="_"&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)})}},{"./_core":76,"./_global":90,"./_library":108,"./_object-dp":114,"./_wks-ext":150}],150:[function(require,module,exports){exports.f=require("./_wks")},{"./_wks":151}],151:[function(require,module,exports){var store=require("./_shared")("wks");var uid=require("./_uid");var Symbol=require("./_global").Symbol;var USE_SYMBOL=typeof Symbol=="function";var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},{"./_global":90,"./_shared":134,"./_uid":146}],152:[function(require,module,exports){var classof=require("./_classof");var ITERATOR=require("./_wks")("iterator");var Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./_classof":72,"./_core":76,"./_iterators":107,"./_wks":151}],153:[function(require,module,exports){"use strict";var ctx=require("./_ctx");var $export=require("./_export");var toObject=require("./_to-object");var call=require("./_iter-call");var isArrayIter=require("./_is-array-iter");var toLength=require("./_to-length");var createProperty=require("./_create-property");var getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./_iter-detect")((function(iter){Array.from(iter)})),"Array",{from:function from(arrayLike){var O=toObject(arrayLike);var C=typeof this=="function"?this:Array;var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iterFn=getIterFn(O);var length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value)}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index])}}result.length=index;return result}})},{"./_create-property":77,"./_ctx":78,"./_export":84,"./_is-array-iter":98,"./_iter-call":102,"./_iter-detect":105,"./_to-length":143,"./_to-object":144,"./core.get-iterator-method":152}],154:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables");var step=require("./_iter-step");var Iterators=require("./_iterators");var toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",(function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind}),(function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])}),"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},{"./_add-to-unscopables":65,"./_iter-define":104,"./_iter-step":106,"./_iterators":107,"./_to-iobject":142}],155:[function(require,module,exports){"use strict";var $export=require("./_export");var aFunction=require("./_a-function");var toObject=require("./_to-object");var fails=require("./_fails");var $sort=[].sort;var test=[1,2,3];$export($export.P+$export.F*(fails((function(){test.sort(undefined)}))||!fails((function(){test.sort(null)}))||!require("./_strict-method")($sort)),"Array",{sort:function sort(comparefn){return comparefn===undefined?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},{"./_a-function":64,"./_export":84,"./_fails":86,"./_strict-method":136,"./_to-object":144}],156:[function(require,module,exports){var dP=require("./_object-dp").f;var FProto=Function.prototype;var nameRE=/^\s*function ([^ (]*)/;var NAME="name";NAME in FProto||require("./_descriptors")&&dP(FProto,NAME,{configurable:true,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}})},{"./_descriptors":80,"./_object-dp":114}],157:[function(require,module,exports){var toObject=require("./_to-object");var $keys=require("./_object-keys");require("./_object-sap")("keys",(function(){return function keys(it){return $keys(toObject(it))}}))},{"./_object-keys":122,"./_object-sap":124,"./_to-object":144}],158:[function(require,module,exports){"use strict";var classof=require("./_classof");var test={};test[require("./_wks")("toStringTag")]="z";if(test+""!="[object z]"){require("./_redefine")(Object.prototype,"toString",(function toString(){return"[object "+classof(this)+"]"}),true)}},{"./_classof":72,"./_redefine":129,"./_wks":151}],159:[function(require,module,exports){"use strict";var LIBRARY=require("./_library");var global=require("./_global");var ctx=require("./_ctx");var classof=require("./_classof");var $export=require("./_export");var isObject=require("./_is-object");var aFunction=require("./_a-function");var anInstance=require("./_an-instance");var forOf=require("./_for-of");var speciesConstructor=require("./_species-constructor");var task=require("./_task").set;var microtask=require("./_microtask")();var newPromiseCapabilityModule=require("./_new-promise-capability");var perform=require("./_perform");var userAgent=require("./_user-agent");var promiseResolve=require("./_promise-resolve");var PROMISE="Promise";var TypeError=global.TypeError;var process=global.process;var versions=process&&process.versions;var v8=versions&&versions.v8||"";var $Promise=global[PROMISE];var isNode=classof(process)=="process";var empty=function(){};var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper;var newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f;var USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1);var FakePromise=(promise.constructor={})[require("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||typeof PromiseRejectionEvent=="function")&&promise.then(empty)instanceof FakePromise&&v8.indexOf("6.6")!==0&&userAgent.indexOf("Chrome/66")===-1}catch(e){}}();var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=="function"?then:false};var notify=function(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask((function(){var value=promise._v;var ok=promise._s==1;var i=0;var run=function(reaction){var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain){domain.exit();exited=true}}if(result===reaction.promise){reject(TypeError("Promise-chain cycle"))}else if(then=isThenable(result)){then.call(result,resolve,reject)}else resolve(result)}else reject(value)}catch(e){if(domain&&!exited)domain.exit();reject(e)}};while(chain.length>i)run(chain[i++]);promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise)}))};var onUnhandled=function(promise){task.call(global,(function(){var value=promise._v;var unhandled=isUnhandled(promise);var result,handler,console;if(unhandled){result=perform((function(){if(isNode){process.emit("unhandledRejection",value,promise)}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value})}else if((console=global.console)&&console.error){console.error("Unhandled promise rejection",value)}}));promise._h=isNode||isUnhandled(promise)?2:1}promise._a=undefined;if(unhandled&&result.e)throw result.v}))};var isUnhandled=function(promise){return promise._h!==1&&(promise._a||promise._c).length===0};var onHandleUnhandled=function(promise){task.call(global,(function(){var handler;if(isNode){process.emit("rejectionHandled",promise)}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v})}}))};var $reject=function(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true)};var $resolve=function(value){var promise=this;var then;if(promise._d)return;promise._d=true;promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){microtask((function(){var wrapper={_w:promise,_d:false};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}))}else{promise._v=value;promise._s=1;notify(promise,false)}}catch(e){$reject.call({_w:promise,_d:false},e)}};if(!USE_NATIVE){$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,"_h");aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}};Internal=function Promise(executor){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};Internal.prototype=require("./_redefine-all")($Promise.prototype,{then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=="function"?onFulfilled:true;reaction.fail=typeof onRejected=="function"&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise},catch:function(onRejected){return this.then(undefined,onRejected)}});OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1)};newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise});require("./_set-to-string-tag")($Promise,PROMISE);require("./_set-species")(PROMISE);Wrapper=require("./_core")[PROMISE];$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function reject(r){var capability=newPromiseCapability(this);var $$reject=capability.reject;$$reject(r);return capability.promise}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function resolve(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}});$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")((function(iter){$Promise.all(iter)["catch"](empty)}))),PROMISE,{all:function all(iterable){var C=this;var capability=newPromiseCapability(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform((function(){var values=[];var index=0;var remaining=1;forOf(iterable,false,(function(promise){var $index=index++;var alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then((function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values)}),reject)}));--remaining||resolve(values)}));if(result.e)reject(result.v);return capability.promise},race:function race(iterable){var C=this;var capability=newPromiseCapability(C);var reject=capability.reject;var result=perform((function(){forOf(iterable,false,(function(promise){C.resolve(promise).then(capability.resolve,reject)}))}));if(result.e)reject(result.v);return capability.promise}})},{"./_a-function":64,"./_an-instance":66,"./_classof":72,"./_core":76,"./_ctx":78,"./_export":84,"./_for-of":88,"./_global":90,"./_is-object":100,"./_iter-detect":105,"./_library":108,"./_microtask":110,"./_new-promise-capability":111,"./_perform":125,"./_promise-resolve":126,"./_redefine-all":128,"./_set-species":131,"./_set-to-string-tag":132,"./_species-constructor":135,"./_task":139,"./_user-agent":147,"./_wks":151}],160:[function(require,module,exports){if(require("./_descriptors")&&/./g.flags!="g")require("./_object-dp").f(RegExp.prototype,"flags",{configurable:true,get:require("./_flags")})},{"./_descriptors":80,"./_flags":87,"./_object-dp":114}],161:[function(require,module,exports){"use strict";require("./es6.regexp.flags");var anObject=require("./_an-object");var $flags=require("./_flags");var DESCRIPTORS=require("./_descriptors");var TO_STRING="toString";var $toString=/./[TO_STRING];var define=function(fn){require("./_redefine")(RegExp.prototype,TO_STRING,fn,true)};if(require("./_fails")((function(){return $toString.call({source:"a",flags:"b"})!="/a/b"}))){define((function toString(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):undefined)}))}else if($toString.name!=TO_STRING){define((function toString(){return $toString.call(this)}))}},{"./_an-object":67,"./_descriptors":80,"./_fails":86,"./_flags":87,"./_redefine":129,"./es6.regexp.flags":160}],162:[function(require,module,exports){"use strict";var $export=require("./_export");var toLength=require("./_to-length");var context=require("./_string-context");var ENDS_WITH="endsWith";var $endsWith=""[ENDS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(ENDS_WITH),"String",{endsWith:function endsWith(searchString){var that=context(this,searchString,ENDS_WITH);var endPosition=arguments.length>1?arguments[1]:undefined;var len=toLength(that.length);var end=endPosition===undefined?len:Math.min(toLength(endPosition),len);var search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},{"./_export":84,"./_fails-is-regexp":85,"./_string-context":138,"./_to-length":143}],163:[function(require,module,exports){"use strict";var $export=require("./_export");var context=require("./_string-context");var INCLUDES="includes";$export($export.P+$export.F*require("./_fails-is-regexp")(INCLUDES),"String",{includes:function includes(searchString){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined)}})},{"./_export":84,"./_fails-is-regexp":85,"./_string-context":138}],164:[function(require,module,exports){"use strict";var $at=require("./_string-at")(true);require("./_iter-define")(String,"String",(function(iterated){this._t=String(iterated);this._i=0}),(function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}}))},{"./_iter-define":104,"./_string-at":137}],165:[function(require,module,exports){"use strict";var $export=require("./_export");var toLength=require("./_to-length");var context=require("./_string-context");var STARTS_WITH="startsWith";var $startsWith=""[STARTS_WITH];$export($export.P+$export.F*require("./_fails-is-regexp")(STARTS_WITH),"String",{startsWith:function startsWith(searchString){var that=context(this,searchString,STARTS_WITH);var index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},{"./_export":84,"./_fails-is-regexp":85,"./_string-context":138,"./_to-length":143}],166:[function(require,module,exports){"use strict";var global=require("./_global");var has=require("./_has");var DESCRIPTORS=require("./_descriptors");var $export=require("./_export");var redefine=require("./_redefine");var META=require("./_meta").KEY;var $fails=require("./_fails");var shared=require("./_shared");var setToStringTag=require("./_set-to-string-tag");var uid=require("./_uid");var wks=require("./_wks");var wksExt=require("./_wks-ext");var wksDefine=require("./_wks-define");var enumKeys=require("./_enum-keys");var isArray=require("./_is-array");var anObject=require("./_an-object");var isObject=require("./_is-object");var toObject=require("./_to-object");var toIObject=require("./_to-iobject");var toPrimitive=require("./_to-primitive");var createDesc=require("./_property-desc");var _create=require("./_object-create");var gOPNExt=require("./_object-gopn-ext");var $GOPD=require("./_object-gopd");var $GOPS=require("./_object-gops");var $DP=require("./_object-dp");var $keys=require("./_object-keys");var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE="prototype";var HIDDEN=wks("_hidden");var TO_PRIMITIVE=wks("toPrimitive");var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared("symbol-registry");var AllSymbols=shared("symbols");var OPSymbols=shared("op-symbols");var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=="function"&&!!$GOPS.f;var QObject=global.QObject;var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;var setSymbolDesc=DESCRIPTORS&&$fails((function(){return _create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a!=7}))?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc)}:dP;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym};var isSymbol=USE_NATIVE&&typeof $Symbol.iterator=="symbol"?function(it){return typeof it=="symbol"}:function(it){return it instanceof $Symbol};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return dP(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key)}return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key])}return result};if(!USE_NATIVE){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag)};redefine($Symbol[PROTOTYPE],"toString",(function toString(){return this._k}));$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames;require("./_object-pie").f=$propertyIsEnumerable;$GOPS.f=$getOwnPropertySymbols;if(DESCRIPTORS&&!require("./_library")){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}wksExt.f=function(name){return wrap(wks(name))}}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=true},useSimple:function(){setter=false}});$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});var FAILS_ON_PRIMITIVES=$fails((function(){$GOPS.f(1)}));$export($export.S+$export.F*FAILS_ON_PRIMITIVES,"Object",{getOwnPropertySymbols:function getOwnPropertySymbols(it){return $GOPS.f(toObject(it))}});$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails((function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"}))),"JSON",{stringify:function stringify(it){var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i)args.push(arguments[i++]);$replacer=replacer=args[1];if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer=="function")value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)}});$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},{"./_an-object":67,"./_descriptors":80,"./_enum-keys":83,"./_export":84,"./_fails":86,"./_global":90,"./_has":91,"./_hide":92,"./_is-array":99,"./_is-object":100,"./_library":108,"./_meta":109,"./_object-create":113,"./_object-dp":114,"./_object-gopd":116,"./_object-gopn":118,"./_object-gopn-ext":117,"./_object-gops":119,"./_object-keys":122,"./_object-pie":123,"./_property-desc":127,"./_redefine":129,"./_set-to-string-tag":132,"./_shared":134,"./_to-iobject":142,"./_to-object":144,"./_to-primitive":145,"./_uid":146,"./_wks":151,"./_wks-define":149,"./_wks-ext":150}],167:[function(require,module,exports){"use strict";var global=require("./_global");var each=require("./_array-methods")(0);var redefine=require("./_redefine");var meta=require("./_meta");var assign=require("./_object-assign");var weak=require("./_collection-weak");var isObject=require("./_is-object");var validate=require("./_validate-collection");var NATIVE_WEAK_MAP=require("./_validate-collection");var IS_IE11=!global.ActiveXObject&&"ActiveXObject"in global;var WEAK_MAP="WeakMap";var getWeak=meta.getWeak;var isExtensible=Object.isExtensible;var uncaughtFrozenStore=weak.ufstore;var InternalMap;var wrapper=function(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined)}};var methods={get:function get(key){if(isObject(key)){var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,WEAK_MAP)).get(key);return data?data[this._i]:undefined}},set:function set(key,value){return weak.def(validate(this,WEAK_MAP),key,value)}};var $WeakMap=module.exports=require("./_collection")(WEAK_MAP,wrapper,methods,weak,true,true);if(NATIVE_WEAK_MAP&&IS_IE11){InternalMap=weak.getConstructor(wrapper,WEAK_MAP);assign(InternalMap.prototype,methods);meta.NEED=true;each(["delete","has","get","set"],(function(key){var proto=$WeakMap.prototype;var method=proto[key];redefine(proto,key,(function(a,b){if(isObject(a)&&!isExtensible(a)){if(!this._f)this._f=new InternalMap;var result=this._f[key](a,b);return key=="set"?this:result}return method.call(this,a,b)}))}))}},{"./_array-methods":69,"./_collection":75,"./_collection-weak":74,"./_global":90,"./_is-object":100,"./_meta":109,"./_object-assign":112,"./_redefine":129,"./_validate-collection":148}],168:[function(require,module,exports){"use strict";var $export=require("./_export");var $includes=require("./_array-includes")(true);$export($export.P,"Array",{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined)}});require("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":65,"./_array-includes":68,"./_export":84}],169:[function(require,module,exports){require("./_wks-define")("asyncIterator")},{"./_wks-define":149}],170:[function(require,module,exports){var $iterators=require("./es6.array.iterator");var getKeys=require("./_object-keys");var redefine=require("./_redefine");var global=require("./_global");var hide=require("./_hide");var Iterators=require("./_iterators");var wks=require("./_wks");var ITERATOR=wks("iterator");var TO_STRING_TAG=wks("toStringTag");var ArrayValues=Iterators.Array;var DOMIterables={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var NAME=collections[i];var explicit=DOMIterables[NAME];var Collection=global[NAME];var proto=Collection&&Collection.prototype;var key;if(proto){if(!proto[ITERATOR])hide(proto,ITERATOR,ArrayValues);if(!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=ArrayValues;if(explicit)for(key in $iterators)if(!proto[key])redefine(proto,key,$iterators[key],true)}}},{"./_global":90,"./_hide":92,"./_iterators":107,"./_object-keys":122,"./_redefine":129,"./_wks":151,"./es6.array.iterator":154}],171:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],172:[function(require,module,exports){var runtime=function(exports){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});return obj[key]}try{define({},"")}catch(err){define=function(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);generator._invoke=makeInvokeMethod(innerFn,self,context);return generator}exports.wrap=wrap;function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){IteratorPrototype=NativeIteratorPrototype}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction");function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}exports.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||(ctor.displayName||ctor.name)==="GeneratorFunction":false};exports.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype)}else{genFun.__proto__=GeneratorFunctionPrototype;define(genFun,toStringTagSymbol,"GeneratorFunction")}genFun.prototype=Object.create(Gp);return genFun};exports.awrap=function(arg){return{__await:arg}};function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg)}else{var result=record.arg;var value=result.value;if(value&&typeof value==="object"&&hasOwn.call(value,"__await")){return PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)}))}return PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped;resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}this._invoke=enqueue}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this};exports.AsyncIterator=AsyncIterator;exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){if(PromiseImpl===void 0)PromiseImpl=Promise;var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running")}if(state===GenStateCompleted){if(method==="throw"){throw arg}return doneResult()}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if(context.method==="next"){context.sent=context._sent=context.arg}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg}context.dispatchException(context.arg)}else if(context.method==="return"){context.abrupt("return",context.arg)}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue}return{value:record.arg,done:context.done}}else if(record.type==="throw"){state=GenStateCompleted;context.method="throw";context.arg=record.arg}}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){context.delegate=null;if(context.method==="throw"){if(delegate.iterator["return"]){context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){return ContinueSentinel}}context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel}var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel}if(info.done){context[delegate.resultName]=info.value;context.next=delegate.nextLoc;if(context.method!=="return"){context.method="next";context.arg=undefined}}else{return info}context.delegate=null;return ContinueSentinel}defineIteratorMethods(Gp);define(Gp,toStringTagSymbol,"Generator");Gp[iteratorSymbol]=function(){return this};Gp.toString=function(){return"[object Generator]"};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1]}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3]}this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true)}exports.keys=function(object){var keys=[];for(var key in object){keys.push(key)}keys.reverse();return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next}}next.done=true;return next}};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable)}if(typeof iterable.next==="function"){return iterable}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next}}next.value=undefined;next.done=true;return next};return next.next=next}}return{next:doneResult}}exports.values=values;function doneResult(){return{value:undefined,done:true}}Context.prototype={constructor:Context,reset:function(skipTempReset){this.prev=0;this.next=0;this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined}}}},stop:function(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg}return this.rval},dispatchException:function(exception){if(this.done){throw exception}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){context.method="next";context.arg=undefined}return!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){return handle("end")}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true)}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){finallyEntry=null}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel}return this.complete(record)},complete:function(record,afterLoc){if(record.type==="throw"){throw record.arg}if(record.type==="break"||record.type==="continue"){this.next=record.arg}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end"}else if(record.type==="normal"&&afterLoc){this.next=afterLoc}return ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel}}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){this.arg=undefined}return ContinueSentinel}};return exports}(typeof module==="object"?module.exports:{});try{regeneratorRuntime=runtime}catch(accidentalStrictMode){Function("r","regeneratorRuntime = r")(runtime)}},{}],173:[function(require,module,exports){(function(global){(function(){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var __extends;var __assign;var __rest;var __decorate;var __param;var __metadata;var __awaiter;var __generator;var __exportStar;var __values;var __read;var __spread;var __spreadArrays;var __await;var __asyncGenerator;var __asyncDelegator;var __asyncValues;var __makeTemplateObject;var __importStar;var __importDefault;var __classPrivateFieldGet;var __classPrivateFieldSet;var __createBinding;(function(factory){var root=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(exports){factory(createExporter(root,createExporter(exports)))}))}else if(typeof module==="object"&&typeof module.exports==="object"){factory(createExporter(root,createExporter(module.exports)))}else{factory(createExporter(root))}function createExporter(exports,previous){if(exports!==root){if(typeof Object.create==="function"){Object.defineProperty(exports,"__esModule",{value:true})}else{exports.__esModule=true}}return function(id,v){return exports[id]=previous?previous(id,v):v}}})((function(exporter){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};__extends=function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};__rest=function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t};__decorate=function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};__metadata=function(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)};__awaiter=function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};__generator=function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};__createBinding=function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]};__exportStar=function(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))exports[p]=m[p]};__values=function(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};__read=function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar};__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};__await=function(v){return this instanceof __await?(this.v=v,this):new __await(v)};__asyncGenerator=function(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}};__asyncDelegator=function(o){var i,p;return i={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}:f}};__asyncValues=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)}))}}function settle(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)}};__makeTemplateObject=function(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked};__importStar=function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];result["default"]=mod;return result};__importDefault=function(mod){return mod&&mod.__esModule?mod:{default:mod}};__classPrivateFieldGet=function(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError("attempted to get private field on non-instance")}return privateMap.get(receiver)};__classPrivateFieldSet=function(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError("attempted to set private field on non-instance")}privateMap.set(receiver,value);return value};exporter("__extends",__extends);exporter("__assign",__assign);exporter("__rest",__rest);exporter("__decorate",__decorate);exporter("__param",__param);exporter("__metadata",__metadata);exporter("__awaiter",__awaiter);exporter("__generator",__generator);exporter("__exportStar",__exportStar);exporter("__createBinding",__createBinding);exporter("__values",__values);exporter("__read",__read);exporter("__spread",__spread);exporter("__spreadArrays",__spreadArrays);exporter("__await",__await);exporter("__asyncGenerator",__asyncGenerator);exporter("__asyncDelegator",__asyncDelegator);exporter("__asyncValues",__asyncValues);exporter("__makeTemplateObject",__makeTemplateObject);exporter("__importStar",__importStar);exporter("__importDefault",__importDefault);exporter("__classPrivateFieldGet",__classPrivateFieldGet);exporter("__classPrivateFieldSet",__classPrivateFieldSet)}))}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1]);
//# sourceMappingURL=kfw.dist.js.map