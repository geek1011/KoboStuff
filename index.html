<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>KoboStuff</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <div class="app">
        <div class="nav">
            <div class="left">
                <a class="item logo" href="https://github.com/pgaskin">Patrick G</a><a class="item" href="https://pgaskin.net/ePubViewer"
                    target="_blank" title="A web-based epub viewer">ePubViewer</a><a class="item" href="https://pgaskin.net/BookReader"
                    target="_blank" title="A simple, cross-platform ebook reader">BookReader</a><a class="item" href="https://pgaskin.net/BookBrowser"
                    target="_blank" title="A web-based library and viewer for your books">BookBrowser</a><a class="item" href="https://pgaskin.net/SimpleMarkdown"
                    target="_blank" title="A powerful markdown editor for Windows">SimpleMarkdown</a>
            </div>
            <div class="right">
                <a class="item share" href="https://github.com/pgaskin/KoboStuff/blob/gh-pages/kobofirmware.html" target="_blank"><i class="fa fa-code"></i></a>
                <a
                    class="item share" href="https://github.com/pgaskin/KoboStuff" target="_blank"><i class="fa fa-github"></i></a><a class="item share" href="https://plus.google.com/share?url=https%3A//pgaskin.net/KoboStuff/kobofirmware.html"
                        target="_blank"><i class="fa fa-google-plus"></i></a><a class="item share" href="https://twitter.com/home?status=Download%20the%20latest%20Kobo%20eReader%20firmware%20at%20https%3A//pgaskin.net/KoboStuff/kobofirmware.html"
                        target="_blank"><i class="fa fa-twitter"></i></a><a class="item share" href="https://www.facebook.com/sharer/sharer.php?u=https%3A//pgaskin.net/KoboStuff/kobofirmware.html"
                        target="_blank"><i class="fa fa-facebook"></i></a>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="main-wrap">
            <div class="main">
                <div>
                    <a href="kobofirmware.html" style="display: block;padding: 5px;text-align: center;font-size: 17px">Kobo Firmware Download Links</a>
                </div>
                <div class="content" style="padding:20px;">
                    <h1>KoboStuff</h1>
                    <p>Random stuff I know about the Kobo eReaders</p>
                    <h2>Model IDs</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Model ID</th>
                                <th>Model</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000300</td>
                                <td>Wifi</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000310</td>
                                <td>Touch</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000320</td>
                                <td>Touch C</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000330</td>
                                <td>Glo</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000340</td>
                                <td>Mini</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000350</td>
                                <td>Aura HD</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000360</td>
                                <td>Aura 6&quot;</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000370</td>
                                <td>Aura H2O</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000373</td>
                                <td>Aura ONE</td>
                            </tr>
                            <tr>
                                <td>00000000-0000-0000-0000-000000000375</td>
                                <td>Aura Edition 2</td>
                            </tr>
                        </tbody>
                    </table>

                    <h2>Adding series metadata to kepub books</h2>
                    <p>First, import the books. Then, open the KoboReader.sqlite file in a sqlite editor. Run the following query: <tt>select ImageId, Title, Series, SeriesNumber from content where ImageId like "file____%"</tt>, and find your book. You can then update the Series and SeriesNumber columns with the series information for the book.</p>

                    <h2>Getting the device information</h2>
                    <h3>The <tt>.kobo/version</tt> file</h3>
                    <p>
                        Inside the <tt>.kobo/version</tt> file, there are 5 fields.
                    </p>
                    <pre>
NXXXXXXXXXX,2.6.35.3,3.19.5761,2.6.35.3,2.6.35.3,00000000-0000-0000-0000-000000000340
Serial #   ,?       ,FW version,?      ,?       ,Model ID
    </pre>
                    <p>
                        The first field is the serial number of the device, the third is the current firmware version, and the last is the model
                        ID. I do not know the rest of them
                    </p>
                    <h3>The <tt>.kobo/affiliate.conf</tt> file</h3>
                    <p>
                        Inside the <tt>.kobo/affiliate.conf</tt> file, there is currently only one setting.
                    </p>
                    <pre>
[General]
affiliate=Kobo
    </pre>
                    <p>
                        Under the General section, there is the affiliate setting. This contains the affiliate for your Kobo.
                    </p>

                    <h2>Checking for updates manually</h2>
                    <p>
                        To check for updates manually, use the following url:
                    </p>
                    <pre>
https://api.kobobooks.com/1.0/UpgradeCheck/Device/<i>ModelID</i>/<i>Affiliate</i>/<i>CurrentFirmwareVersion</i>/<i>SerialNumber</i>
    </pre>
                    <p>
                        Replace the stuff in red with the info you found above. This gives you an UpgradeType and a URL. The URL is the link to the
                        firmware, which you need to extract into the .kobo directory.
                    </p>

                    <p>
                        <span style="font-color:red;">NOTE: </span> If you would like a tool to download the latest firmware
                        automatically, go to the <a href="kobofirmware.html">Kobo Firmware page on my site</a>.
                    </p>

                    <h2>Tweaking the home screen</h2>
                    <p>
                        You can tweak the home screen of the kobo in many ways. The first one I will talk about is how to remove the sync button.
                    </p>
                    <h3>Removing the sync button</h3>
                    <p>
                        It is pretty simple to remove the sync button from the home screen. It will appear again when you sync the device.
                    </p>
                    <ol>
                        <li>Open the file .kobo/KoboReader.sqlite in a sqlite editor</li>
                        <li>Run the sql query <tt>UPDATE activity SET Enabled='false' WHERE Type='Sync'</tt></li>
                        <li>Save your changes, and eject the kobo</li>
                        <li>You are done</li>
                    </ol>
                    <h3>Adding tiles to the home screen</h3>
                    <p>
                        It is possible to add additional tiles to the Kobo homescreen, such as apps and games. You can also add games which are not
                        enabled on your device by default.
                    </p>
                    <ol>
                        <li>Open the file .kobo/KoboReader.sqlite in a sqlite editor</li>
                        <li>Run one of the sql queries in the following list</li>
                        <li>Save your changes, and eject the kobo</li>
                        <li>You are done</li>
                    </ol>
                    <ul id="tileList">

                    </ul>
                    <script>
                        var dateString = (function getDateString() {
                            var pad = function (n, width, z) {
                                z = z || '0';
                                n = n + '';
                                return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
                            };
                            return pad(new Date().getUTCFullYear().toString(), 4) + "-" + pad(new Date().getUTCMonth()
                                .toString() +
                                1, 2) + "-" + pad(new Date().getUTCDate().toString(), 2) + "T" + pad(new Date()
                                .getUTCHours()
                                .toString(), 2) + ":" + pad(new Date().getUTCMinutes(), 2) + ":00"
                        })();
                        var tmpl =
                            "<li><b>{{TILENAME}}</b>: <tt>INSERT INTO `Activity` (Id,Enabled,Type,Action,Date,Data) VALUES ('{{TILEID}}','true','{{TILECATEGORY}}',2,'{{DATE}}',X'00000000');</tt></li>";
                        var tiles = [{
                                TILENAME: "Web Browser",
                                TILEID: "browser",
                                TILECATEGORY: "Extras"
                            },
                            {
                                TILENAME: "Chess (this does not work on newer firmware)",
                                TILEID: "chess",
                                TILECATEGORY: "Extras"
                            },
                            {
                                TILENAME: "Solitaire",
                                TILEID: "solitaire",
                                TILECATEGORY: "Extras"
                            },
                            {
                                TILENAME: "Word Scramble",
                                TILEID: "scramble",
                                TILECATEGORY: "Extras"
                            },
                            {
                                TILENAME: "Sudoku",
                                TILEID: "sudoku",
                                TILECATEGORY: "Extras"
                            },
                            {
                                TILENAME: "Unblock It",
                                TILEID: "rushhour",
                                TILECATEGORY: "Extras"
                            },
                            {
                                TILENAME: "Sketch Pad",
                                TILEID: "sketch",
                                TILECATEGORY: "Extras"
                            }
                        ];

                        var htmlstr = "";
                        for (var i = 0; i < tiles.length; i++) {
                            htmlstr += tmpl.replace("{{TILENAME}}", tiles[i].TILENAME).replace("{{TILEID}}", tiles[i].TILEID)
                                .replace(
                                    "{{TILECATEGORY}}", tiles[i].TILECATEGORY).replace("{{DATE}}", dateString);
                        }
                        document.getElementById("tileList").innerHTML = htmlstr;
                    </script>

                    <h2>Troubleshooting</h2>
                    <h3>The Kobo crashes while reading some ebooks</h3>
                    <p>
                        You can try the following steps in order
                    </p>
                    <ol>
                        <li>Reboot the Kobo, and see if it works</li>
                        <li>Open a book which works, then change the font settings to Georgia, then increase the font size and
                            line spacing, then open the problematic book and see if it works</li>
                        <li>Sign out of your kobo accout then back in (you may lose your collections)</li>
                        <li>Reset your kobo (You will lose all sideloaded books unless you back them up</li>
                    </ol>

                    <h2>Other Stuff</h2>
                    <h3>What the kobo does when you sign out</h3>
                    <p>
                        These are the exact commands which the Kobo runs when you sign out
                    </p>
                    <pre>
rm -rf /mnt/onboard/.kobo
rm -rf /mnt/onboard/.kobo-images
rm -rf /mnt/onboard/.adobe-digital-editions
rm -rf /mnt/sd/koboExtStorage
rm -rf /var/db/dhcp*
    </pre>
                    <h3>Config file entries</h3>
                    <p>Coming soon</p>

                    <hr>
                    <div>
                        Copyright 2018 Patrick G<br> More coming soon
                    </div>

                    <script>
                        (function (i, s, o, g, r, a, m) {
                            i['GoogleAnalyticsObject'] = r;
                            i[r] = i[r] || function () {
                                (i[r].q = i[r].q || []).push(arguments)
                            }, i[r].l = 1 * new Date();
                            a = s.createElement(o),
                                m = s.getElementsByTagName(o)[0];
                            a.async = 1;
                            a.src = g;
                            m.parentNode.insertBefore(a, m)
                        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

                        ga('create', 'UA-66226417-1', 'auto');
                        ga('send', 'pageview');
                    </script>
                </div>
            </div>
        </div>
    </div>
</body>

</html>